<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Ræ•°æ®å¯è§†åŒ–æ‰‹å†Œ-ä¸‹, Shaw">
    <meta name="description" content="åšä¸»æœ€å¼€å§‹æ­£å¼å­¦ä¹  R è¯­è¨€çš„æ—¶å€™ï¼Œæ˜¯å‡ºäºæ•°æ®å¯è§†åŒ–çš„ç›®çš„ï¼Œä»¥ Oreilly çš„ã€ŠRæ•°æ®å¯è§†åŒ–æ‰‹å†Œã€‹ ä¸º handbookï¼Œå°†æ­¤ä¹¦çš„ 90% å†…å®¹åœ¨ jupyter ä¸­éƒ½å¤ç°äº†ä¸€éã€‚jupyter åŸå§‹æ–‡ä»¶å¯åˆ°æˆ‘çš„ Github ç›¸åº”ä»“åº“ä¸­è·å–ã€‚ç”±äºå†…å®¹è¾ƒå¤šï¼Œåˆ†ä¸ºäº†ä¸Šä¸‹ä¸¤éƒ¨åˆ†ã€‚">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>Ræ•°æ®å¯è§†åŒ–æ‰‹å†Œ-ä¸‹ | Shaw</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 6.0.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>



   <style>
    body{
       background-image: url(http://h2.ioliu.cn/bing/BulgariaPerseids_EN-AU11585904087_1920x1080.jpg?imageslim&quot);
       background-repeat:no-repeat;
       background-size: 100% 100%;
       background-attachment:fixed;
    }
</style>



<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Shaw</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>é¦–é¡µ</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>æ ‡ç­¾</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>åˆ†ç±»</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>å½’æ¡£</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>å…³äº</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>ç•™è¨€æ¿</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="æœç´¢" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Shaw</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			é¦–é¡µ
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			æ ‡ç­¾
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			åˆ†ç±»
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			å½’æ¡£
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			å…³äº
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			ç•™è¨€æ¿
		</a>
          
        </li>
        
        
    </ul>
</div>


        </div>

        
    </nav>

</header>

    
<script src="/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('è¯·è¾“å…¥è®¿é—®æœ¬æ–‡ç« çš„å¯†ç ')).toString(CryptoJS.enc.Hex)) {
                alert('å¯†ç é”™è¯¯ï¼Œå°†è¿”å›ä¸»é¡µï¼');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/17.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">Ræ•°æ®å¯è§†åŒ–æ‰‹å†Œ-ä¸‹</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- æ–‡ç« å†…å®¹è¯¦æƒ… -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/R/">
                                <span class="chip bg-color">R</span>
                            </a>
                        
                            <a href="/tags/ggplot2/">
                                <span class="chip bg-color">ggplot2</span>
                            </a>
                        
                            <a href="/tags/handbook/">
                                <span class="chip bg-color">handbook</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/R%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E6%89%8B%E5%86%8C/" class="post-category">
                                Ræ•°æ®å¯è§†åŒ–æ‰‹å†Œ
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>å‘å¸ƒæ—¥æœŸ:&nbsp;&nbsp;
                    2022-01-02
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>æ›´æ–°æ—¥æœŸ:&nbsp;&nbsp;
                    2022-11-03
                </div>
                

                

                

                
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- æ˜¯å¦åŠ è½½ä½¿ç”¨è‡ªå¸¦çš„ prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <pre class="line-numbers language-R" data-language="R"><code class="language-R">library(ggplot2)
library(gcookbook)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h1 id="ç¬¬ä¸ƒç« -æ³¨è§£"><a href="#ç¬¬ä¸ƒç« -æ³¨è§£" class="headerlink" title="ç¬¬ä¸ƒç«  æ³¨è§£"></a>ç¬¬ä¸ƒç«  æ³¨è§£</h1><p>é™¤äº†åæ ‡è½´æ ‡ç­¾ã€åˆ»åº¦çº¿å’Œå›¾ä¾‹è¿™äº›æ ‡å‡†çš„ä¿ç•™å…ƒç´ ï¼Œè¿˜å¯ä»¥å‘å›¾å½¢æ·»åŠ ç‹¬ç«‹çš„å›¾å½¢æˆ–æ–‡æœ¬å…ƒç´ ã€‚è¿™äº›å…ƒç´ å¯ç”¨äºå¢åŠ é¢å¤–çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€é«˜äº®å›¾å½¢çš„æŸä¸ªåŒºåŸŸï¼Œæˆ–æ˜¯è¡¥å……ä¸€äº›å…³äºæ•°æ®çš„æè¿°æ€§æ–‡æœ¬ã€‚</p>
<h2 id="æ·»åŠ æ–‡æœ¬æ³¨è§£"><a href="#æ·»åŠ æ–‡æœ¬æ³¨è§£" class="headerlink" title="æ·»åŠ æ–‡æœ¬æ³¨è§£"></a>æ·»åŠ æ–‡æœ¬æ³¨è§£</h2><p>ä½¿ç”¨ <code>annotate()</code> å’Œä¸€ä¸ªæ–‡æœ¬ç±»å‡ ä½•å¯¹è±¡</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p &lt;- ggplot(faithful, aes(x=eruptions, y=waiting)) + geom_point()

p + annotate('text', x=3, y=48, label='Group 1', family='serif',fontface='italic',color='darkred',size=5) + 
 annotate('text', x=4.5, y=66, label='Group 2', family='serif',fontface='italic',color='darkred',size=5)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_5_0.png" alt="png"></p>
<p>å½“ä½ å¸Œæœ›æ·»åŠ ç‹¬ç«‹çš„æ–‡æœ¬å¯¹è±¡æ—¶ï¼Œåƒä¸‡ä¸è¦ä½¿ç”¨<code>geom_text()</code>ã€‚<code>annotate(geom='text')</code>ä¼šå‘å›¾å½¢æ·»åŠ ä¸€ä¸ªå•ç‹¬çš„æ–‡æœ¬å¯¹è±¡ï¼Œè€Œgeom_text()å´ä¼šæ ¹æ®æ•°æ®åˆ›å»ºè®¸å¤šçš„æ–‡æœ¬å¯¹è±¡ã€‚<br>å¦‚æœä½¿ç”¨geon_text()ï¼Œæ–‡æœ¬ä¼šåœ¨ç›¸åŒçš„ä½ç½®è¢«ä¸¥é‡é®ç›–ï¼Œæ¯ä¸ªæ•°æ®ç‚¹å„é‡ç»˜äº†ä¸€æ¬¡ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p + annotate('text', x=3, y=48, label='Group 1', alpha=.1) +  # æ­£å¸¸
 geom_text(x=4.5, y=66, label='Group 2', alpha=.1)  # é®ç›–ç»˜åˆ¶<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<p><img src="output_7_0.png" alt="png"></p>
<p>åœ¨ä¸Šå›¾ä¸­ï¼Œæ¯ä¸ªæ–‡æœ¬æ ‡ç­¾éƒ½æ˜¯90%é€æ˜çš„ï¼Œè¿™æ ·å°±å¾ˆæ¸…æ¥šåœ°å±•ç¤ºå‡ºäº†å“ªä¸€ä¸ªè¢«é®ç›–ç»˜åˆ¶äº†ï¼ˆgeom_textè¢«é®ç›–ç»˜åˆ¶ï¼‰ã€‚åœ¨è¾“å‡ºä¸ºç‚¹é˜µæ ¼å¼æ—¶ï¼Œé®ç›–ç»˜åˆ¶é—®é¢˜å¯èƒ½ä¼šå¯¼è‡´è¾¹ç¼˜èµ°æ ·ï¼ˆæœ‰é”¯é½¿ï¼‰ã€‚</p>
<p>å¦‚æœåæ ‡è½´æ˜¯è¿ç»­å‹çš„ï¼Œä½ å¯ä»¥ä½¿ç”¨ç‰¹æ®Šå€¼ Inf å’Œ -Inf åœ¨ç»˜å›¾åŒºåŸŸçš„è¾¹ç¼˜æ”¾ç½®æ–‡æœ¬æ³¨è§£ã€‚<br>åŒæ—¶ï¼Œä¹Ÿéœ€è¦ä½¿ç”¨hjustå’Œvjustæ¥è°ƒæ•´æ–‡æœ¬ç›¸å¯¹äºè¾¹è§’çš„ä½ç½®â€”â€”å¦‚æœä½ è®©å®ƒä»¬ç•™åœ¨é»˜è®¤å€¼çš„ä½ç½®ä¸Šï¼Œè¿™äº›æ–‡æœ¬å°±ä¼šå±…ä¸­äºè¾¹ç•Œçº¿ä¹‹ä¸Šã€‚<br>è¦å°†æ–‡æœ¬å®šä½åˆ°ç†æƒ³çš„ä½ç½®ï¼Œå¯èƒ½éœ€è¦è¿›è¡Œä¸€äº›å°è¯•ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p + annotate('text', x=-Inf, y=Inf, label='Upper left', hjust=-.2, vjust=2, size=6) + 
 annotate('text', x=mean(range(faithful$eruptions)), y=-Inf, vjust=-0.4, 
         label='Bottom middle',size=6)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


<p><img src="output_10_0.png" alt="png"></p>
<h2 id="åœ¨æ³¨é‡Šä¸­ä½¿ç”¨æ•°å­¦è¡¨è¾¾å¼"><a href="#åœ¨æ³¨é‡Šä¸­ä½¿ç”¨æ•°å­¦è¡¨è¾¾å¼" class="headerlink" title="åœ¨æ³¨é‡Šä¸­ä½¿ç”¨æ•°å­¦è¡¨è¾¾å¼"></a>åœ¨æ³¨é‡Šä¸­ä½¿ç”¨æ•°å­¦è¡¨è¾¾å¼</h2><p>ä½¿ç”¨<code>annotate(geom='text')</code>å¹¶è®¾ç½®<code>parse=TRUE</code></p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R"># ä¸€æ¡æ­£æ€æ›²çº¿

p &lt;- ggplot(data.frame(x=c(-3,3)), aes(x=x)) + stat_function(fun = dnorm)

p + annotate('text', x=2, y=0.3, parse=TRUE,
           label='frac(1, sqrt(2 * pi)) * e ^ (-x^2 / 2)', size=8)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_13_0.png" alt="png"></p>
<p>ğŸ’¬<strong>è®¨è®º</strong><br>åœ¨ggplot2ä¸­ä½¿ç”¨<code>parse=TRUE</code>å’Œæ–‡æœ¬ç±»å‡ ä½•å¯¹è±¡åˆ›å»ºçš„æ•°å­¦è¡¨è¾¾å¼ï¼Œå’Œé‚£äº›åœ¨RåŸºç¡€å›¾å½¢ä¸­åˆ©ç”¨ plotmath å’Œ expression åˆ›å»ºçš„æ•°å­¦è¡¨è¾¾å¼æœ‰ç€ç±»ä¼¼çš„æ ¼å¼ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼Œå‰è€…ä»¥å­—ç¬¦ä¸²çš„å½¢å¼å­˜å‚¨ï¼Œè€Œåè€…æ˜¯è¡¨è¾¾å¼å¯¹è±¡ã€‚</p>
<p>è¦å°†å¸¸è§„æ–‡æœ¬èå…¥è¡¨è¾¾å¼ä¸­ï¼Œåªéœ€åœ¨åŒå¼•å·å†…ä½¿ç”¨å•å¼•å·ï¼ˆæˆ–è€…åè¿‡æ¥ï¼‰æ ‡å‡ºçº¯æ–‡æœ¬çš„éƒ¨åˆ†å³å¯ã€‚<font color="red">é€šè¿‡å†…éƒ¨å¼•å·é—­åˆçš„æ¯ä¸€å—æ–‡æœ¬éƒ½å°†è¢«ä½œä¸ºæ•°å­¦è¡¨è¾¾å¼ä¸­çš„ä¸€ä¸ªå˜é‡å¯¹å¾…</font>ã€‚  </p>
<p>åˆ‡è®°ï¼Œåœ¨Rçš„æ•°å­¦è¡¨è¾¾å¼è¯­æ³•ä¸­ï¼Œä½ ä¸èƒ½ç®€å•åœ°æŠŠä¸€ä¸ªå˜é‡ç›´æ¥æ”¾åˆ°å¦ä¸€ä¸ªå˜é‡æ—è¾¹è€Œä¸åœ¨ä¸­é—´åŠ ä¸Šä»»ä½•è®°å·ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p + annotate('text', x=0, y=0.05, parse=TRUE, size=6,
            label="'Function:' * y==frac(1,sqrt(2 * pi)) * e^(-x^2/2) ")<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<p><img src="output_15_0.png" alt="png"></p>
<p>â— è¡¨è¾¾å¼ä¸­ï¼Œâ€=â€æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œâ€==â€æ‰æ˜¯ç­‰å·çš„å«ä¹‰<br>åœ¨å¦‚ä¸Šè¡¨è¾¾å¼ä¸­ï¼Œâ€™functionâ€™ å’Œ y ä¸­é—´æ”¾äº†ä¸€ä¸ª * æ“ä½œç¬¦ï¼Œå®ƒä¼šè¢«å½“ä½œä¸€ä¸ªä¸å¯è§çš„ä¹˜å·å¯¹å¾…ï¼ˆè¦æ˜¾ç¤ºä¸€ä¸ªå¯è§çš„ä¹˜å·ï¼Œéœ€è¦ä½¿ç”¨%*%ï¼‰.</p>
<h2 id="æ·»åŠ ç›´çº¿"><a href="#æ·»åŠ ç›´çº¿" class="headerlink" title="æ·»åŠ ç›´çº¿"></a>æ·»åŠ ç›´çº¿</h2><p>å¯¹äºæ¨ªçº¿å’Œç«–çº¿ï¼Œä½¿ç”¨ <code>geom_hline()</code> å’Œ <code>geom_vline()</code>å³å¯ã€‚å¯¹äºæœ‰è§’åº¦çš„ç›´çº¿ï¼Œåˆ™å¯ä»¥ä½¿ç”¨geom_abline()ã€‚å¯¹äºä¸‹ä¾‹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ heightweight æ•°æ®é›†ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p &lt;- ggplot(heightweight, aes(x=ageYear, y=heightIn, color=sex)) + geom_point()

# æ·»åŠ æ¨ªçº¿å’Œç«–çº¿
p + geom_hline(yintercept = 60) + geom_vline(xintercept = 14)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_19_0.png" alt="png"></p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R"># æ·»åŠ æœ‰è§’åº¦çš„ç›´çº¿
p + geom_abline(intercept = 37.4, slope = 1.75)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<p><img src="output_20_0.png" alt="png"></p>
<p>ä¸Šä¾‹æ¼”ç¤ºäº†æ‰‹åŠ¨è®¾ç½®ç›´çº¿ä½ç½®çš„æ–¹æ³•ï¼Œæ•ˆæœæ˜¯æ¯æ·»åŠ ä¸€ä¸ªå‡ ä½•å¯¹è±¡ç»˜åˆ¶ä¸€æ¡çº¿ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å€¼ä»æ•°æ®æ˜ å°„åˆ°xinterceptã€yinterceptç­‰ä¹‹ä¸Šï¼Œç”šè‡³æ˜¯ç»˜åˆ¶å¦ä¸€ä¸ªæ•°æ®æ¡†ä¸­çš„å€¼</p>
<p>æˆ‘ä»¬å°†åœ¨è¿™é‡Œè®¡ç®—ç”·æ€§å’Œå¥³æ€§çš„å¹³å‡èº«é«˜ï¼Œå¹¶å°†å®ƒä»¬å­˜å‚¨åˆ°ä¸€ä¸ªæ•°æ®æ¡†hw_meansä¸­ã€‚ç„¶åä¸ºæ¯ä¸ªå‡å€¼ç»˜åˆ¶ä¸€æ¡æ°´å¹³çº¿ï¼Œå¹¶æ‰‹å·¥è®¾å®šlinetypeå’Œsizeï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">library(plyr) # ä¸ºäº†ä½¿ç”¨ddply()å‡½æ•°<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">hw_means &lt;- ddply(heightweight, 'sex', summarise, heightIn=mean(heightIn))
hw_means<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 2 Ã— 2</caption>
<thead>
    <tr><th scope="col">sex</th><th scope="col">heightIn</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>f</td><td>60.52613</td></tr>
    <tr><td>m</td><td>62.06000</td></tr>
</tbody>
</table>




<pre class="line-numbers language-R" data-language="R"><code class="language-R">p + geom_hline(aes(yintercept=heightIn,color=sex), data=hw_means,
              linetype='dashed', size=1)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<p><img src="output_25_0.png" alt="png"></p>
<p>å¦‚æœæŸä¸ªåæ ‡è½´æ˜¯ç¦»æ•£å‹è€Œä¸æ˜¯è¿ç»­å‹çš„ï¼Œä¸èƒ½ä»¥å­—ç¬¦ä¸²çš„å½¢å¼ç›´æ¥æŒ‡å®šæˆªè·â€”â€”å¿…é¡»ä»ä»¥æ•°å­—çš„å½¢å¼æŒ‡å®šå®ƒä»¬ã€‚<br>å‡è®¾æ­¤åæ ‡è½´è¡¨ç¤ºä¸€ä¸ªå› å­ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªæ°´å¹³ä¸ºæ•°å€¼1ï¼Œç¬¬äºŒä¸ªæ°´å¹³ä¸ºæ•°å€¼2ï¼Œä¾æ¬¡ç±»æ¨ã€‚å¯ä»¥åƒä¸‹é¢è¿™ç§æ‰‹å·¥æŒ‡å®šæ•°å€¼å‹çš„æˆªè·ï¼Œæˆ–è€…ä½¿ç”¨which(levels(â€¦))è®¡ç®—æ‰€éœ€æ•°å€¼ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">pg &lt;- ggplot(PlantGrowth, aes(x=group, y=weight)) + geom_point()

pg + geom_vline(xintercept = 2)

pg + geom_vline(xintercept = which(levels(PlantGrowth$group)=='ctrl'))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_27_0.png" alt="png"></p>
<p><img src="output_27_1.png" alt="png"></p>
<h2 id="æ·»åŠ çº¿æ®µå’Œç®­å¤´"><a href="#æ·»åŠ çº¿æ®µå’Œç®­å¤´" class="headerlink" title="æ·»åŠ çº¿æ®µå’Œç®­å¤´"></a>æ·»åŠ çº¿æ®µå’Œç®­å¤´</h2><p>ä½¿ç”¨<code>annotate('segment')</code></p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">options(repr.plot.width=8, repr.plot.height=4)
p &lt;- ggplot(subset(climate, Source=='Berkeley'), aes(x=Year, y=Anomaly10y)) + 
 geom_line()

p + annotate('segment', x=1950, xend=1980,y=-.25, yend = -.25)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_30_0.png" alt="png"></p>
<p>å¯ä»¥ä½¿ç”¨ grid åŒ…ä¸­çš„<code>arrow()</code>å‡½æ•°å‘çº¿æ®µä¸¤ç«¯æ·»åŠ ç®­å¤´æˆ–å¹³å¤´</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">library(grid)
p + annotate('segment', x = 1850, xend = 1820, y = -.8, yend = -.95, color = 'blue', size = 1, arrow=arrow(length = unit(.3, 'cm'))) + 
    annotate('segment', x=1950, xend=1980,y=-.25, yend = -.25,
            arrow=arrow(ends = 'both', angle = 90, length = unit(.2, 'cm')))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_32_0.png" alt="png"></p>
<p>ç®­å¤´çº¿çš„é»˜è®¤è§’åº¦ï¼ˆangleï¼‰ä¸º30åº¦ï¼Œé»˜è®¤é•¿åº¦ï¼ˆlengthï¼‰ä¸º0.2è‹±å¯¸ï¼ˆ0.508å˜ç±³ï¼‰ã€‚å¦‚æœä¸€ä¸ªæˆ–å¤šä¸ªåæ ‡è½´æ˜¯ç¦»æ•£å‹çš„ï¼Œåˆ™ x å’Œ y çš„ä½ç½®å³ç”±æ‹¥æœ‰åæ ‡å€¼1,2,3ç­‰çš„ç±»åˆ«é¡¹è¡¨ç¤ºã€‚</p>
<h2 id="æ·»åŠ çŸ©å½¢é˜´å½±"><a href="#æ·»åŠ çŸ©å½¢é˜´å½±" class="headerlink" title="æ·»åŠ çŸ©å½¢é˜´å½±"></a>æ·»åŠ çŸ©å½¢é˜´å½±</h2><p>ğŸ’¡ ä½¿ç”¨<code>annotate('rect')</code></p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p &lt;- ggplot(subset(climate, Source=='Berkeley'), aes(x=Year, y=Anomaly10y)) + 
        geom_line()

p + annotate('rect', xmin = 1950, xmax = 1980, ymin = -1, ymax = 1, alpha = .1, fill = 'blue')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_36_0.png" alt="png"></p>
<p>ğŸ’¬<strong>è®¨è®º</strong><br>æ¯ä¸€ä¸ªå›¾å±‚éƒ½æ˜¯æŒ‰ç…§æ·»åŠ åˆ°ggplotå¯¹è±¡çš„å…ˆåé¡ºåºç»˜åˆ¶çš„ã€‚  </p>
<p>åªè¦ä¼ é€’äº†åˆé€‚çš„å‚æ•°ï¼Œä»»æ„å‡ ä½•å¯¹è±¡éƒ½æ˜¯å¯ä»¥é…åˆ<code>annotate()</code>ä½¿ç”¨ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œ<code>geom_rect()</code>æ‰€éœ€çš„å‚æ•°æ˜¯ x å’Œ y çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ã€‚</p>
<h2 id="é«˜äº®æŸä¸€å…ƒç´ "><a href="#é«˜äº®æŸä¸€å…ƒç´ " class="headerlink" title="é«˜äº®æŸä¸€å…ƒç´ "></a>é«˜äº®æŸä¸€å…ƒç´ </h2><p>è¦é«˜äº®ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ï¼Œéœ€è¦åœ¨æ•°æ®ä¸­åˆ›å»ºä¸€ä¸ªæ–°åˆ—å¹¶å°†å…¶æ˜ å°„ä¸ºé¢œè‰²ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªæ–°åˆ— h1ï¼Œ å¹¶æ ¹æ® group çš„å€¼æ¥è®¾å®šå®ƒçš„å€¼ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">pg &lt;- PlantGrowth
pg$h1 &lt;- 'no'
pg$h1[pg$group=='trt2'] &lt;- 'yes'<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">options(repr.plot.width=7, repr.plot.height=7)
ggplot(pg, aes(x=group, y=weight, fill=h1)) + geom_boxplot() + 
 scale_fill_manual(values = c('grey85', '#FFDDCC'), guide='none')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


<p><img src="output_41_0.png" alt="png"></p>
<h2 id="æ·»åŠ è¯¯å·®çº¿"><a href="#æ·»åŠ è¯¯å·®çº¿" class="headerlink" title="æ·»åŠ è¯¯å·®çº¿"></a>æ·»åŠ è¯¯å·®çº¿</h2><p>ä½¿ç”¨<code>geom_errorbar()</code>å¹¶å°†å˜é‡æ˜ å°„åˆ° ymin å’Œ ymaxï¼ˆå½“æ¨ªå‘ä½œå›¾æ—¶ï¼Œä¸º xmin å’Œ xmaxï¼‰ã€‚å¯¹äºæ¡å½¢å›¾å’ŒæŠ˜çº¿å›¾ï¼Œæ·»åŠ è¯¯å·®çº¿çš„æ–¹æ³•ç›¸åŒã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">ce &lt;- subset(cabbage_exp, Cultivar == 'c39')
head(ce,2)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 2 Ã— 6</caption>
<thead>
    <tr><th></th><th scope="col">Cultivar</th><th scope="col">Date</th><th scope="col">Weight</th><th scope="col">sd</th><th scope="col">n</th><th scope="col">se</th></tr>
    <tr><th></th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><th scope="row">1</th><td>c39</td><td>d16</td><td>3.18</td><td>0.9566144</td><td>10</td><td>0.30250803</td></tr>
    <tr><th scope="row">2</th><td>c39</td><td>d20</td><td>2.80</td><td>0.2788867</td><td>10</td><td>0.08819171</td></tr>
</tbody>
</table>




<pre class="line-numbers language-R" data-language="R"><code class="language-R"># ä¸ºæ¡å½¢å›¾æ·»åŠ è¯¯å·®çº¿
ggplot(ce, aes(x=Date, y=Weight)) + 
 geom_bar(fill='white', color='black', stat = 'identity', width = 0.5) + 
 geom_errorbar(aes(ymin=Weight - se, ymax=Weight + se), width = 0.15, size = 1)

# ä¸ºæŠ˜çº¿å›¾æ·»åŠ è¯¯å·®çº¿
ggplot(ce, aes(x=Date, y=Weight)) + 
 geom_line(aes(group=1)) + 
 geom_point(size = 4) + 
 geom_errorbar(aes(ymin=Weight - se, ymax=Weight + se), width = 0.15, size = 1)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_45_0.png" alt="png"></p>
<p><img src="output_45_1.png" alt="png"></p>
<p>å…³äº <code>geom_line()</code>ä¸­è®¾ç½®groupï¼Œå¯å‚è§<a href="#%E7%BB%98%E5%88%B6%E7%AE%80%E5%8D%95%E6%8A%98%E7%BA%BF%E5%9B%BE">ç¬¬å››ç« æŠ˜çº¿å›¾</a></p>
<p>ğŸ’¬<strong>è®¨è®º</strong><br>å¯¹äºä¸€å¹…åˆ†ç»„çš„æ¡å½¢å›¾ï¼Œå„è¯¯å·®çº¿ä¹Ÿå¿…é¡»è¢«å¹¶åˆ—ï¼ˆdodgedï¼‰ï¼›ï¼ˆå‚è§<a href="#%E7%BB%98%E5%88%B6%E7%B0%87%E7%8A%B6%E6%9D%A1%E5%BD%A2%E5%9B%BE">ç»˜åˆ¶ç°‡çŠ¶æ¡å½¢å›¾</a>ä»¥äº†è§£å…³äºåˆ†ç»„æ¡å½¢å›¾å’Œå¹¶åˆ—çš„æ›´å¤šä¿¡æ¯ï¼‰ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">head(cabbage_exp, 2)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 2 Ã— 6</caption>
<thead>
    <tr><th></th><th scope="col">Cultivar</th><th scope="col">Date</th><th scope="col">Weight</th><th scope="col">sd</th><th scope="col">n</th><th scope="col">se</th></tr>
    <tr><th></th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><th scope="row">1</th><td>c39</td><td>d16</td><td>3.18</td><td>0.9566144</td><td>10</td><td>0.30250803</td></tr>
    <tr><th scope="row">2</th><td>c39</td><td>d20</td><td>2.80</td><td>0.2788867</td><td>10</td><td>0.08819171</td></tr>
</tbody>
</table>



<p><code>geom_bar()</code>çš„é»˜è®¤å¹¶åˆ—å®½åº¦ä¸º0.9ï¼Œå¿…é¡»è®©è¯¯å·®çº¿çš„å¹¶åˆ—å®½åº¦ä¸æ­¤ç›¸åŒã€‚å¦‚æœä¸æŒ‡å®šå¹¶åˆ—å®½åº¦ï¼Œåˆ™é»˜è®¤æŒ‰è¯¯å·®çº¿çš„å®½åº¦å¹¶åˆ—ï¼Œè€Œæ­¤å®½åº¦é€šå¸¸å°äºæ¡å½¢çš„å®½åº¦ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R"># åä¾‹ï¼šæœªæŒ‡å®šå¹¶åˆ—å®½åº¦
ggplot(cabbage_exp, aes(x=Date, y=Weight, fill=Cultivar)) + 
 geom_bar(position = 'dodge', stat = 'identity') + 
 geom_errorbar(aes(ymin=Weight-se, ymax=Weight+se),
              position='dodge', width=0.2)

# æ­£ä¾‹ï¼šè®¾å®šåˆ—å®½ä¸æ¡å½¢çš„ç›¸åŒ
ggplot(cabbage_exp, aes(x=Date, y=Weight, fill=Cultivar)) + 
 geom_bar(position = 'dodge', stat = 'identity', width = 0.6) + 
 geom_errorbar(aes(ymin=Weight-se, ymax=Weight+se),
              position=position_dodge(0.6), width=0.2, )<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_50_0.png" alt="png"></p>
<p><img src="output_50_1.png" alt="png"></p>
<p>å¯¹äºæŠ˜çº¿å›¾å’Œç‚¹å›¾ï¼Œåº” å…ˆç»˜åˆ¶è¯¯å·®çº¿ï¼Œè¿™æ ·å®ƒä»¬å°±ä¼šä½äºç‚¹å’Œçº¿çš„ä¸‹å±‚ã€‚</p>
<p>åº”å½“åŒæ—¶å¹¶åˆ—æ‰€æœ‰çš„å‡ ä½•å…ƒç´ ï¼Œè¿™æ ·å®ƒä»¬å°±ä¼šåŒè¯¯å·®çº¿å¯¹é½ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">pd &lt;- position_dodge(.3) # ä¿å­˜å¹¶åˆ—è®¾ç½®ï¼Œå› ä¸ºæˆ‘ä»¬è¦é‡å¤ä½¿ç”¨

ggplot(cabbage_exp, aes(x=Date, y=Weight, color=Cultivar, group=Cultivar)) + 
 geom_errorbar(aes(ymin=Weight-se, ymax=Weight+se), position = pd, width=0.2, color = 'black') + 
 geom_line(position = pd) + 
 geom_point(position = pd, size = 2.5)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_53_0.png" alt="png"></p>
<p>é€šè¿‡å°† Cultivar æ˜ å°„åˆ° group çš„æ–¹å¼æ¥ç¡®ä¿å®ƒè¢«ä½œä¸ºåˆ†ç»„å˜é‡ä½¿ç”¨ã€‚<br>å½“ä¸€ä¸ªç¦»æ•£å‹å˜é‡è¢«æ˜ å°„åˆ°ä¸€ä¸ªå¦‚ color æˆ– fill çš„å›¾å½¢å±æ€§æ—¶ï¼Œæ­¤å˜é‡å°±ä¼šè¢«ç”¨äºå¯¹æ•°æ®è¿›è¡Œåˆ†ç»„ã€‚</p>
<h3 id="æ·»åŠ è¯¯å·®çº¿å®ä¾‹"><a href="#æ·»åŠ è¯¯å·®çº¿å®ä¾‹" class="headerlink" title="æ·»åŠ è¯¯å·®çº¿å®ä¾‹"></a>æ·»åŠ è¯¯å·®çº¿å®ä¾‹</h3><pre class="line-numbers language-R" data-language="R"><code class="language-R">condition &lt;- c(rep('wt1',3), rep('MutL',3), rep('Î”L',3), rep('blank',3), rep('wt2',3), rep('Î”upL',3), rep('Î”lowL',3), rep('A1c',3))<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">value &lt;- c(1.00, 1.03, 0.96, 0.47, 0.51, 0.50, 0.60, 0.56, 0.57, rep(0,3),0.97, 1.02, 1.00, 0.24, 0.27, 0.25, 0.23, 0.25, 0.23, 0.11, 0.12, 0.10)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">df &lt;- data.frame(condition, value)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">ord &lt;- unique(df$condition)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">ord<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>'wt1'</li><li>'MutL'</li><li>'Î”L'</li><li>'blank'</li><li>'wt2'</li><li>'Î”upL'</li><li>'Î”lowL'</li><li>'A1c'</li></ol>




<pre class="line-numbers language-R" data-language="R"><code class="language-R">mean_df &lt;- as.data.frame(tapply(df$value, df$condition, FUN = mean))  #å¾—åˆ°å¹³å‡å€¼
means &lt;- mean_df[ord,] # æŒ‰conditionçš„é¡ºåºå–å¹³å‡å€¼

sd_df &lt;- as.data.frame(tapply(df$value, df$condition, FUN = sd))
sds &lt;- sd_df[ord,]

mean_col &lt;- rep(means,rep(3,length(means))) # é‡å¤å¹³å‡å€¼ç”¨äºåšæ–°åˆ—
sd_col &lt;- rep(sds,rep(3,length(sds)))

df$mean &lt;- mean_col
df$sd &lt;- sd_col<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">df$condition &lt;- factor(condition,levels = rev(ord)) # è®¾å®šcondition çš„ level é¡ºåº<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">#pdf(file='LH_plot.pdf')
ggplot(df, aes(x=condition)) + 
 theme_classic(base_size = 25) +
 geom_bar(mapping = aes(y = mean) ,color=NA, fill="GoldEnrod",width = 0.4, stat = 'summary') + 
 geom_errorbar(aes(ymin=mean-sd, ymax=mean+sd),width=0.4, size = 1.5) +
 geom_point(aes(x=factor(condition), y = mean),size=2.5, position = position_jitter(width = 0.26)) + 
 theme(axis.text.y = element_text(hjust = 1,family = 'sans', face = 'bold.italic')) + 
 coord_flip() + 
 scale_y_continuous(position = 'right', expand = c(0,0.0)) + 
 labs(x= '', y = '') + 
 theme(axis.ticks.y = element_blank())<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre><code>No summary function supplied, defaulting to `mean_se()`
</code></pre>
<p><img src="output_63_1.png" alt="png"></p>
<h2 id="å‘ç‹¬ç«‹åˆ†é¢æ·»åŠ æ³¨è§£"><a href="#å‘ç‹¬ç«‹åˆ†é¢æ·»åŠ æ³¨è§£" class="headerlink" title="å‘ç‹¬ç«‹åˆ†é¢æ·»åŠ æ³¨è§£"></a>å‘ç‹¬ç«‹åˆ†é¢æ·»åŠ æ³¨è§£</h2><p>ä½¿ç”¨åˆ†é¢å˜é‡åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®æ¡†ï¼Œå¹¶è®¾å®šæ¯ä¸ªåˆ†é¢è¦ç»˜åˆ¶çš„å€¼ã€‚ç„¶åé…åˆæ–°æ•°æ®æ¡†ä½¿ç”¨<code>geom_text()</code>:</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">head(mpg, 2)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<table class="dataframe">
<caption>A tibble: 2 Ã— 11</caption>
<thead>
    <tr><th scope="col">manufacturer</th><th scope="col">model</th><th scope="col">displ</th><th scope="col">year</th><th scope="col">cyl</th><th scope="col">trans</th><th scope="col">drv</th><th scope="col">cty</th><th scope="col">hwy</th><th scope="col">fl</th><th scope="col">class</th></tr>
    <tr><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;chr&gt;</th></tr>
</thead>
<tbody>
    <tr><td>audi</td><td>a4</td><td>1.8</td><td>1999</td><td>4</td><td>auto(l5)  </td><td>f</td><td>18</td><td>29</td><td>p</td><td>compact</td></tr>
    <tr><td>audi</td><td>a4</td><td>1.8</td><td>1999</td><td>4</td><td>manual(m5)</td><td>f</td><td>21</td><td>29</td><td>p</td><td>compact</td></tr>
</tbody>
</table>




<pre class="line-numbers language-R" data-language="R"><code class="language-R">options(repr.plot.width=8, repr.plot.height=4)
# åŸºæœ¬å›¾å½¢
p &lt;- ggplot(mpg, aes(x=displ, y=hwy)) + geom_point() + facet_grid(. ~ drv) 

# å­˜æœ‰æ¯ä¸ªåˆ†é¢æ‰€éœ€è¦æ ‡ç­¾çš„æ•°æ®æ¡†
f_labels &lt;- data.frame(drv = c('4', 'f', 'r'), label = c('4wd', 'Front', 'Rear'))

p + geom_text(x=6, y=40, aes(label=label), data = f_labels)

# å¦‚æœä½ ä½¿ç”¨annotate(), æ ‡ç­¾å°†åœ¨æ‰€æœ‰åˆ†é¢ä¸Šå‡ºç°
p + annotate('text',x=6, y=42, label='label text')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_67_0.png" alt="png"></p>
<p><img src="output_67_1.png" alt="png"></p>
<h1 id="ç¬¬å…«ç« -åæ ‡è½´"><a href="#ç¬¬å…«ç« -åæ ‡è½´" class="headerlink" title="ç¬¬å…«ç«  åæ ‡è½´"></a>ç¬¬å…«ç«  åæ ‡è½´</h1><h2 id="äº¤æ¢xè½´å’Œyè½´"><a href="#äº¤æ¢xè½´å’Œyè½´" class="headerlink" title="äº¤æ¢xè½´å’Œyè½´"></a>äº¤æ¢xè½´å’Œyè½´</h2><p>ä½¿ç”¨coord_flip()æ¥ç¿»è½¬åæ ‡è½´ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">ggplot(PlantGrowth, aes(x=group, y=weight)) + geom_boxplot()

ggplot(PlantGrowth, aes(x=group, y=weight)) + geom_boxplot() + coord_flip()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


<p><img src="output_71_0.png" alt="png"></p>
<p><img src="output_71_1.png" alt="png"></p>
<p>å¯¹äºæ•£ç‚¹å›¾æ¥è¯´ï¼Œè°ƒæ¢çºµè½´å’Œæ¨ªè½´ä¸Šæ˜¾ç¤ºçš„å…ƒç´ éå¸¸ç®€å•ï¼šä»…ä»…äº¤æ¢æ˜ å°„åˆ° x å’Œ y çš„å˜é‡å°±å¯ä»¥äº†ã€‚ä½†å¹¶ä¸æ˜¯æ‰€æœ‰ ggplot2 ä¸­çš„å‡ ä½•å¯¹è±¡éƒ½ä¼šåŒç­‰å¯¹å¾… xè½´ å’Œ yè½´ã€‚<br>ä¸¾ä¾‹æ¥è¯´ï¼Œç®±çº¿å›¾ä¾ y è½´å¯¹æ•°æ®è®¡ç®—ç»Ÿè®¡æ‘˜è¦ï¼ŒæŠ˜çº¿å›¾ä¸­çš„çº¿æ®µåªæ²¿ x è½´ç§»åŠ¨ï¼Œè¯¯å·®çº¿åªæœ‰ä¸€ä¸ªå•ç‹¬çš„ x å€¼ä½†å…·æœ‰è‹¥å¹² y å€¼ï¼Œç­‰ç­‰ã€‚å¦‚æœä½ æ­£åœ¨ä½¿ç”¨è¿™äº›å‡ ä½•å¯¹è±¡ï¼Œå¹¶ä¸”å¸Œæœ›åœ¨å›¾å½¢ä¸­äº¤æ¢å®ƒä»¬çš„åæ ‡è½´ï¼Œé‚£ä¹ˆ <code>coord_flip()</code> æ­£æ˜¯ä½ æ‰€éœ€è¦çš„ã€‚  </p>
<p>æœ‰æ—¶åœ¨äº¤æ¢åæ ‡è½´åï¼Œå„é¡¹çš„é¡ºåºå¯èƒ½æ­£å¥½ä¸ä½ æƒ³è¦çš„ç›¸åã€‚å¦‚æœ x å˜é‡æ˜¯ä¸€å„ factor å˜é‡ï¼Œåˆ™æ’åˆ—é¡ºåºå¯ä»¥é€šè¿‡ä½¿ç”¨<code>scale_x_distance()</code>å’Œå‚æ•° <code>limit=rev(levels(...))</code>è¿›è¡Œåè½¬ï¼Œ</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">ggplot(PlantGrowth, aes(x=group, y=weight)) + geom_boxplot() + coord_flip() + 
 scale_x_discrete(limits=rev(levels(PlantGrowth$group)))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<p><img src="output_73_0.png" alt="png"></p>
<h2 id="è®¾ç½®è¿ç»­å‹åæ ‡è½´çš„å€¼åŸŸ"><a href="#è®¾ç½®è¿ç»­å‹åæ ‡è½´çš„å€¼åŸŸ" class="headerlink" title="è®¾ç½®è¿ç»­å‹åæ ‡è½´çš„å€¼åŸŸ"></a>è®¾ç½®è¿ç»­å‹åæ ‡è½´çš„å€¼åŸŸ</h2><p>å¯ä»¥ä½¿ç”¨<code>xlim()</code>æˆ–<code>ylim()</code>æ¥è®¾ç½®ä¸€æ¡è¿ç»­å‹åæ ‡è½´çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">head(PlantGrowth, 2)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 2 Ã— 2</caption>
<thead>
    <tr><th></th><th scope="col">weight</th><th scope="col">group</th></tr>
    <tr><th></th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;fct&gt;</th></tr>
</thead>
<tbody>
    <tr><th scope="row">1</th><td>4.17</td><td>ctrl</td></tr>
    <tr><th scope="row">2</th><td>5.58</td><td>ctrl</td></tr>
</tbody>
</table>




<pre class="line-numbers language-R" data-language="R"><code class="language-R">p &lt;- ggplot(PlantGrowth, aes(x=group, y=weight)) + geom_boxplot()

p + ylim(0, max(PlantGrowth$weight))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


<p><img src="output_77_0.png" alt="png"></p>
<p>ğŸ’¬<strong>è®¨è®º</strong><br>ä½¿ç”¨<code>ylim()</code>æ¥è®¾å®šèŒƒå›´æ˜¯é€šè¿‡<code>scale_y_continuous()</code>æ¥è®¾å®šèŒƒå›´çš„ç®€ä¾¿å†™æ³•ã€‚ä¸€ä¸‹ä¸¤ç§è¡¨è¾¾æ–¹å¼ç­‰ä»·ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">ylim(0, 10)
scale_y_continuous(limits = c(0, 10))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<pre><code>&lt;ScaleContinuousPosition&gt;
 Range:  
 Limits:    0 --   10



&lt;ScaleContinuousPosition&gt;
 Range:  
 Limits:    0 --   10
</code></pre>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p + scale_y_continuous(limits = c(0, 10), breaks = c(0, 5, 10))<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<p><img src="output_80_0.png" alt="png"></p>
<p>ggplot2ä¸­æœ‰ä¸¤ç§è®¾ç½®åæ ‡è½´å€¼åŸŸçš„æ–¹å¼ã€‚ç¬¬ä¸€ç§æ˜¯ä¿®æ”¹æ ‡åº¦ï¼Œç¬¬äºŒç§æ˜¯åº”ç”¨ä¸€ä¸ªåæ ‡å˜æ¢ã€‚<br>å½“ä½ ä¿®æ”¹xæ ‡åº¦å’Œyæ ‡åº¦çš„èŒƒå›´æ—¶ï¼Œä»»ä½•åœ¨èŒƒå›´ä»¥å¤–çš„æ•°æ®éƒ½ä¼šè¢«ç§»é™¤â€”â€”æ¢è¨€ä¹‹ï¼Œè¶…å‡ºèŒƒå›´çš„æ•°æ®ä¸ä»…ä¸ä¼šè¢«å±•ç¤ºï¼Œè€Œä¸”ä¼šè¢«å®Œå…¨ç§»å‡ºè€ƒè™‘å¤„ç†çš„æ•°æ®èŒƒå›´ã€‚  </p>
<p>ä»¥ä¸Šç®±çº¿å›¾ä¸ºä¾‹ï¼Œå¦‚æœä½ é™åˆ¶äº† y çš„å€¼åŸŸï¼Œä½¿å¾—æŸäº›åŸå§‹æ•°æ®è¢«å‰ªæ‰ï¼Œåˆ™ç®±çº¿å›¾ä¸­ç»Ÿè®¡é‡çš„è®¡ç®—éƒ½ä¼šåŸºäºä¿®å‰ªåçš„æ•°æ®ï¼Œè€Œç®±çº¿çš„å½¢çŠ¶ä¹Ÿä¼šéšä¹‹æ”¹å˜</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p + scale_y_continuous(limits = c(5.0, 6.5))
p + coord_cartesian(ylim = c(5.0, 6.5))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<pre><code>Warning message:
"Removed 13 rows containing non-finite values (stat_boxplot)."
</code></pre>
<p><img src="output_83_1.png" alt="png"></p>
<p><img src="output_83_2.png" alt="png"></p>
<p>é€šè¿‡ä½¿ç”¨åæ ‡å˜æ¢ï¼Œæ•°æ®åˆ™ä¸ä¼šè¢«ä¿®å‰ªï¼Œä»æœ¬è´¨ä¸Šè¯´ï¼Œå®ƒåªæ˜¯å°†æ•°æ®æ”¾å¤§æˆ–ç¼©å°åˆ°æŒ‡å®šçš„èŒƒå›´ã€‚</p>
<p>æœ€åï¼Œä½¿ç”¨<code>expand_limits()</code>æ¥å•å‘æ‰©å±•å€¼åŸŸä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ä¸è¿‡ï¼Œä¸èƒ½ç”¨å®ƒæ¥ç¼©å‡å€¼åŸŸï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p + expand_limits(y=0)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<p><img src="output_86_0.png" alt="png"></p>
<h2 id="åè½¬ä¸€æ¡è¿ç»­å‹åæ ‡è½´"><a href="#åè½¬ä¸€æ¡è¿ç»­å‹åæ ‡è½´" class="headerlink" title="åè½¬ä¸€æ¡è¿ç»­å‹åæ ‡è½´"></a>åè½¬ä¸€æ¡è¿ç»­å‹åæ ‡è½´</h2><p>ä½¿ç”¨ <code>scale_y_reverse</code> æˆ– <code>scale_x_reverse</code>ã€‚åæ ‡è½´çš„æ–¹å‘ä¹Ÿå¯é€šè¿‡æŒ‡å®šååºçš„èŒƒå›´æ¥åè½¬ï¼Œå…ˆå†™æœ€å¤§å€¼ï¼Œå†å†™æœ€å°å€¼ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">ggplot(PlantGrowth, aes(x=group, y=weight)) + geom_boxplot() + scale_y_reverse()

# é€šè¿‡æŒ‡å®šååºçš„èŒƒå›´äº§ç”Ÿç±»ä¼¼çš„æ•ˆæœ
ggplot(PlantGrowth, aes(x=group, y=weight)) + geom_boxplot() + scale_y_reverse()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_89_0.png" alt="png"></p>
<p><img src="output_89_1.png" alt="png"></p>
<p>ğŸ’¬<strong>è®¨è®º</strong><br>ä¸<code>scale_y_continuous()</code>ç±»ä¼¼ï¼Œ<code>scale_y_reverse()</code>ä¹Ÿæ— æ³•ä¸ylimé…åˆå·¥ä½œï¼ˆå¯¹xè½´å±æ€§ä¹Ÿä¸€æ ·ï¼‰ã€‚å¦‚æœä½ å¸Œæœ›åè½¬æŸæ¡åæ ‡è½´å¹¶ä¸ºå®ƒè®¾å®šå€¼åŸŸï¼Œåˆ™å¿…é¡»ä½¿ç”¨<code>scale_y_continuous()</code>ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">ggplot(PlantGrowth, aes(x=group, y=weight)) + geom_boxplot() + 
 scale_y_reverse(limits=c(8,0))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<p><img src="output_91_0.png" alt="png"></p>
<h2 id="ä¿®æ”¹ç±»åˆ«å‹åæ ‡è½´ä¸Šé¡¹ç›®çš„é¡ºåº"><a href="#ä¿®æ”¹ç±»åˆ«å‹åæ ‡è½´ä¸Šé¡¹ç›®çš„é¡ºåº" class="headerlink" title="ä¿®æ”¹ç±»åˆ«å‹åæ ‡è½´ä¸Šé¡¹ç›®çš„é¡ºåº"></a>ä¿®æ”¹ç±»åˆ«å‹åæ ‡è½´ä¸Šé¡¹ç›®çš„é¡ºåº</h2><p>å¯¹äºç±»åˆ«å‹ï¼ˆæˆ–è€…è¯´ç¦»æ•£å‹ï¼‰åæ ‡è½´æ¥è¯´ï¼Œä¼šæœ‰ä¸€ä¸ªå› å­å‹å˜é‡æ˜ å°„åˆ°å®ƒä¸Šé¢ï¼Œåæ ‡è½´ä¸Šé¡¹ç›®çš„é¡ºåºå¯ä»¥é€šè¿‡è®¾å®š<code>scale_x_discrete()</code>æˆ–<code>scale_y_discrete()</code>ä¸­çš„å‚æ•°limitsæ¥ä¿®æ”¹ã€‚</p>
<p>è¦æ‰‹åŠ¨è®¾å®šåæ ‡è½´ä¸Šé¡¹ç›®çš„é¡ºåºï¼Œå°†ä¸€ä¸ªä¾ç†æƒ³é¡ºåºæ’åˆ—çš„æ°´å¹³å‘é‡æŒ‡å®šç»™limitså³å¯ã€‚ä¹Ÿå¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼å¿½ç•¥æ‰æŸäº›é¡¹ç›®ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">unique(PlantGrowth$group)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>ctrl</li><li>trt1</li><li>trt2</li></ol>

<details>
    <summary style="display:list-item;cursor:pointer">
        <strong>Levels</strong>:
    </summary>
    <style>
    .list-inline {list-style: none; margin:0; padding: 0}
    .list-inline>li {display: inline-block}
    .list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
    </style>
    <ol class="list-inline"><li>'ctrl'</li><li>'trt1'</li><li>'trt2'</li></ol>
</details>



<pre class="line-numbers language-R" data-language="R"><code class="language-R">p &lt;- ggplot(PlantGrowth, aes(x=group, y=weight)) + geom_boxplot()

p + scale_x_discrete(limits=c('ctrl', 'trt1', 'trt2'))

p + scale_x_discrete(limits=c('ctrl', 'trt1'))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre><code>Warning message:
"Removed 10 rows containing missing values (stat_boxplot)."
</code></pre>
<p><img src="output_96_1.png" alt="png"></p>
<p><img src="output_96_2.png" alt="png"></p>
<p>è¦åè½¬é¡¹ç›®é¡ºåºï¼Œè®¾å®š <code>limits=rev(levels(...))</code>ï¼Œå°†å› å­å‹å˜é‡æ”¾å…¥æ‹¬å·ä¸­å³å¯ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p + scale_x_discrete(limits=rev(levels(PlantGrowth$group)))<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<p><img src="output_98_0.png" alt="png"></p>
<h2 id="è®¾ç½®xè½´å’Œyè½´çš„ç¼©æ”¾æ¯”ä¾‹"><a href="#è®¾ç½®xè½´å’Œyè½´çš„ç¼©æ”¾æ¯”ä¾‹" class="headerlink" title="è®¾ç½®xè½´å’Œyè½´çš„ç¼©æ”¾æ¯”ä¾‹"></a>è®¾ç½®xè½´å’Œyè½´çš„ç¼©æ”¾æ¯”ä¾‹</h2><p>ä½¿ç”¨ <code>coord_fixed()</code>ã€‚ ä»¥ä¸‹ä»£ç å°†å¾—åˆ° x è½´å’Œ y è½´ä¹‹é—´ 1ï¼š1 çš„ç¼©æ”¾ç»“æœã€‚è¿™é‡Œçš„1ï¼š1æŒ‡çš„æ˜¯åæ ‡è½´å•ä½é•¿åº¦è¡¨ç¤ºçš„æ•°å€¼èŒƒå›´ï¼Œè€Œä¸æ˜¯æ€»é•¿å®½æ¯”ä¾‹ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">sp &lt;- ggplot(marathon, aes(x=Half, y=Full)) + geom_point()

sp + coord_fixed()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


<p><img src="output_101_0.png" alt="png"></p>
<p>é€šè¿‡åœ¨<code>scale_y_continuous()</code>å’Œ<code>scale_x_continuous</code>ä¸­è°ƒæ•´å‚æ•°breaksï¼Œä»è€Œå°†åˆ»åº¦é—´è·è®¾ä¸ºç›¸åŒï¼Œä¹Ÿä¼šæœ‰æ‰€å¸®åŠ©</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">sp + coord_fixed() + 
 scale_y_continuous(breaks = seq(0, 420, 30)) + 
 scale_x_continuous(breaks = seq(0, 420, 30))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


<p><img src="output_103_0.png" alt="png"></p>
<p>å¦‚æœä½ å¸Œæœ›ä¸ºä¸¤ä¸ªåæ ‡è½´ä¹‹é—´æŒ‡å®šå…¶ä»–çš„å›ºå®šæ¯”ä¾‹è€Œéç›¸åŒçš„æ¯”ä¾‹ï¼Œå¯ä»¥è®¾ç½®å‚æ•°ratioã€‚å¯¹äºmarathonæ•°æ®é›†ï¼Œæˆ‘ä»¬å¯èƒ½æƒ³è®©å¯¹åº”åŠç¨‹é©¬æ‹‰æ¾æ—¶é—´çš„åæ ‡è½´è¢«æ‹‰ä¼¸åˆ°å…¨ç¨‹é©¬æ‹‰æ¾æ—¶é—´åæ ‡è½´çš„ä¸¤å€ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">sp + coord_fixed(ratio = 1/2) + 
 scale_y_continuous(breaks = seq(0, 420, 30)) + 
 scale_x_continuous(breaks = seq(0, 420, 15))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


<p><img src="output_105_0.png" alt="png"></p>
<h2 id="è®¾ç½®åˆ»åº¦çº¿çš„ä½ç½®"><a href="#è®¾ç½®åˆ»åº¦çº¿çš„ä½ç½®" class="headerlink" title="è®¾ç½®åˆ»åº¦çº¿çš„ä½ç½®"></a>è®¾ç½®åˆ»åº¦çº¿çš„ä½ç½®</h2><p>é€šå¸¸æ¥è¯´ggplot()ä¼šè‡ªåŠ¨å°†åˆ»åº¦çº¿æ‘†æ”¾åœ¨åˆé€‚çš„ä½ç½®ï¼Œä½†å¦‚æœä½ å¸Œæœ›æ”¹å˜å®ƒä»¬çš„ä½ç½®ï¼Œè®¾ç½®æ ‡åº¦ä¸­çš„å‚æ•°breakså³å¯ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">ggplot(PlantGrowth, aes(x=group, y=weight)) + geom_boxplot()

ggplot(PlantGrowth, aes(x=group, y=weight)) + geom_boxplot() + 
 scale_y_continuous(breaks = c(4, 4.25, 4.5, 5, 6, 8)) + 
 theme_classic()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_108_0.png" alt="png"></p>
<p><img src="output_108_1.png" alt="png"></p>
<p>ğŸ’¬<strong>è®¨è®º</strong><br>å¯ä»¥ä½¿ç”¨<code>seq()</code>å‡½æ•°æˆ–è¿ç®—ç¬¦ï¼šæ¥ç”Ÿæˆåˆ»åº¦çº¿çš„ä½ç½®å‘é‡ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">seq(4, 7, by=.5)

5:10<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>4</li><li>4.5</li><li>5</li><li>5.5</li><li>6</li><li>6.5</li><li>7</li></ol>




<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li></ol>



<p>è®¾å®š<code>breaks</code>å°†ä¼šå†³å®šä¸ºå“ªäº›æ°´å¹³åŠ ä¸Šæ ‡ç­¾ï¼Œä½†ä¸ä¼šç§»é™¤å®ƒä»¬æˆ–æ˜¯æ”¹å˜å®ƒä»¬çš„é¡ºåºã€‚å¯ä»¥é€šè¿‡æŒ‡å®š<code>limits</code>æ¥ä¿®æ”¹é¡¹ç›®çš„é¡ºåºæˆ–ç§»é™¤é¡¹ç›®.</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">ggplot(PlantGrowth, aes(x=group, y=weight)) + geom_boxplot() + 
 scale_x_discrete(limits=c('trt2','ctrl'), breaks = 'ctrl')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<pre><code>Warning message:
"Removed 10 rows containing missing values (stat_boxplot)."
</code></pre>
<p><img src="output_112_1.png" alt="png"></p>
<h2 id="ç§»é™¤åˆ»åº¦çº¿å’Œæ ‡ç­¾"><a href="#ç§»é™¤åˆ»åº¦çº¿å’Œæ ‡ç­¾" class="headerlink" title="ç§»é™¤åˆ»åº¦çº¿å’Œæ ‡ç­¾"></a>ç§»é™¤åˆ»åº¦çº¿å’Œæ ‡ç­¾</h2><p>ä»…ç§»é™¤åˆ»åº¦æ ‡ç­¾ï¼Œä½¿ç”¨ <code>theme(axis.text.y = element_blank())</code> (ä¹Ÿå¯å¯¹axis.text.xåšç›¸åŒå¤„ç†)å³å¯ã€‚è¿™ç§æ–¹æ³•å¯¹äºè¿ç»­å‹å’Œç¦»æ•£å‹åæ ‡è½´å‡æœ‰æ•ˆï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p &lt;- ggplot(PlantGrowth, aes(x=group, y=weight)) + geom_boxplot()

p + theme(axis.text.y = element_blank())<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


<p><img src="output_115_0.png" alt="png"></p>
<p>è¦ç§»é™¤åˆ»åº¦çº¿ï¼Œå¯ä½¿ç”¨theme(axis.ticks=element_blank()).è¿™æ ·ä¼šåŒæ—¶ç§»é™¤ä¸¤è½´çš„åˆ»åº¦çº¿ï¼ˆæ— æ³•ä»…éšè—å•ä¸ªåæ ‡è½´çš„åˆ»åº¦çº¿ï¼‰ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p + theme(axis.ticks = element_blank(), axis.text.y = element_blank())<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<p><img src="output_117_0.png" alt="png"></p>
<p>è¦ç§»é™¤åˆ»åº¦çº¿ã€åˆ»åº¦æ ‡ç­¾å’Œç½‘æ ¼çº¿ï¼Œå°†<code>breaks</code>è®¾ç½®ä¸º<code>NULL</code>å³å¯ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p + scale_y_continuous(breaks = NULL)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<p><img src="output_119_0.png" alt="png"></p>
<p>ğŸ’¬<strong>è®¨è®º</strong><br>äº‹å®ä¸Šï¼Œå…±æœ‰ä¸‰ç§é¡¹ç›®å¯ä»¥æ§åˆ¶ï¼šåˆ»åº¦æ ‡ç­¾ã€åˆ»åº¦çº¿å’Œç½‘æ ¼çº¿ã€‚å¯¹äºè¿ç»­å‹åæ ‡è½´ï¼Œggplot()é€šå¸¸ä¼šåœ¨æ¯ä¸ªbreakså€¼çš„ä½ç½®æ”¾ç½®åˆ»åº¦çº¿ã€åˆ»åº¦æ ‡ç­¾å’Œä¸»ç½‘æ ¼çº¿ã€‚å¯¹äºç±»åˆ«å‹åæ ‡è½´ï¼Œè¿™äº›å…ƒç´ åˆ™å‡ºç°åœ¨æ¯ä¸ªlimitså€¼çš„ä½ç½®ã€‚<br>æˆ‘ä»¬å¯ä»¥ç‹¬ç«‹æ§åˆ¶æ¯æ¡åæ ‡è½´ä¸Šçš„åˆ»åº¦æ ‡ç­¾ã€‚ä½†æ˜¯ï¼Œåˆ»åº¦çº¿å’Œç½‘æ ¼çº¿å¿…é¡»åŒæ—¶æ§åˆ¶ã€‚</p>
<h2 id="ä¿®æ”¹åˆ»åº¦æ ‡ç­¾çš„æ–‡æœ¬"><a href="#ä¿®æ”¹åˆ»åº¦æ ‡ç­¾çš„æ–‡æœ¬" class="headerlink" title="ä¿®æ”¹åˆ»åº¦æ ‡ç­¾çš„æ–‡æœ¬"></a>ä¿®æ”¹åˆ»åº¦æ ‡ç­¾çš„æ–‡æœ¬</h2><pre class="line-numbers language-R" data-language="R"><code class="language-R">hwp &lt;- ggplot(heightweight, aes(x=ageYear, y=heightIn)) + 
        geom_point()

hwp<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_122_0.png" alt="png"></p>
<p>è¦æƒ³ä»»æ„è®¾å®šæ ‡ç­¾ï¼Œåœ¨æ ‡åº¦ä¸­ä¸ºbreakså’Œlabelsèµ‹å€¼å³å¯ã€‚å…¶ä¸­ä¸€ä¸ªæ ‡ç­¾å«æœ‰ä¸€ä¸ªæ¢è¡Œç¬¦ï¼ˆ\nï¼‰ï¼Œæ„ä¸ºè®©ggplot()åœ¨é‚£é‡Œå¦èµ·ä¸€è¡Œï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">hwp + scale_y_continuous(breaks = c(50,56,60,66,72),
                        labels = c('Tiny', 'Really\nshort', 'Short',
                                  'Medium', 'Tallish'))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


<p><img src="output_124_0.png" alt="png"></p>
<p>ğŸ’¬<strong>è®¨è®º</strong><br>é™¤äº†å®Œå…¨ä»»æ„åœ°è®¾ç½®æ ‡ç­¾ä»¥å¤–ï¼Œæ›´å¸¸è§çš„æƒ…å†µæ˜¯æ•°æ®ä»¥æŸç§æ ¼å¼å­˜å‚¨ï¼Œè€Œæˆ‘ä»¬å¸Œæœ›ä»¥å¦å¤–ä¸€ç§æ ¼å¼æ˜¾ç¤ºæ ‡ç­¾ã€‚<br>æˆ‘ä»¬å¯èƒ½å‘è®©èº«é«˜å˜é‡æ˜¾ç¤ºä¸ºè‹±å°ºå’Œè‹±å¯¸çš„æ ¼å¼ï¼Œè€Œä¸æ˜¯ä»…ä»…æ˜¾ç¤ºä¸€ä¸ªè‹±å¯¸æ•°å€¼ã€‚è¦å®Œæˆè¿™é¡¹ä»»åŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªæ ¼å¼åˆ·ï¼ˆformatterï¼‰å‡½æ•°ï¼Œè¿™æ ·çš„å‡½æ•°å¯ä»¥è¯»å…¥æ•°å€¼å¹¶è¿”å›ç›¸åº”çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹å‡½æ•°å¯å°†è‹±å¯¸æ•°å€¼è½¬æ¢ä¸ºè‹±å°ºåŠ è‹±å¯¸çš„æ ¼å¼ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">footinch_formatter &lt;- function(x){
    foot &lt;- floor(x/12)
    inch &lt;- x %% 12
    return(paste(foot, "'", inch, "\"", sep=""))
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä¸‹é¢æ˜¯æ­¤å‡½æ•°å¯¹è¾“å…¥å€¼56~64çš„è¿”å›ç»“æœï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">footinch_formatter(56:64)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>'4\'8"'</li><li>'4\'9"'</li><li>'4\'10"'</li><li>'4\'11"'</li><li>'5\'0"'</li><li>'5\'1"'</li><li>'5\'2"'</li><li>'5\'3"'</li><li>'5\'4"'</li></ol>



<p>ç°åœ¨å°±å¯ä»¥ä½¿ç”¨å‚æ•°labelsæŠŠæˆ‘ä»¬çš„å‡½æ•°ä¼ é€’ç»™æ ‡åº¦äº†ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">hwp + scale_y_continuous(labels = footinch_formatter)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<p><img src="output_130_0.png" alt="png"></p>
<p>åœ¨å›¾ä¸­ï¼Œæ¯éš”äº”è‹±å¯¸æ”¾ç½®äº†ä¸€ä¸ªè‡ªåŠ¨ç”Ÿæˆçš„åˆ»åº¦çº¿ï¼Œä½†æ˜¯å¯¹äºè¿™ä¸ªæ•°æ®æ¥è¯´çœ‹èµ·æ¥æœ‰ç‚¹å¤æ€ªã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æŒ‡å®šå‚æ•°breaksè®©ggplot()æ¯éš”å››è‹±å¯¸è®¾ç½®ä¸€æ¡åˆ»åº¦çº¿å–è€Œä»£ä¹‹ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">hwp + scale_y_continuous(breaks = seq(48,72,4), labels = footinch_formatter)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<p><img src="output_132_0.png" alt="png"></p>
<p>å¦ä¸€é¡¹å¸¸è§ä»»åŠ¡æ˜¯å°†æ—¶é—´æµ‹åº¦è½¬æ¢ä¸ºHH:MM:SS(æ—¶ï¼šåˆ†ï¼šç§’)æˆ–è€…å…¶ä»–ç±»ä¼¼çš„æ ¼å¼ã€‚ä»¥ä¸‹å‡½æ•°å¯ä»¥è¯»å…¥åˆ†é’Ÿçš„æ•°å€¼å¹¶å°†å®ƒä»¬è½¬æ¢ä¸ºè¿™ç§æ ¼å¼ï¼ŒåŒæ—¶èˆå…¥åˆ°æœ€æ¥è¿‘çš„ç§’æ•°ï¼ˆä¹Ÿå¯ä»¥æŒ‰ç…§è‡ªå·±çš„ç‰¹æ®Šéœ€è¦æ¥å®šä¹‰ï¼‰ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">timeHMS_formatter &lt;- function(x){
    h &lt;- floor(x/60)
    m &lt;- floor(x %% 60)
    s &lt;- round(60 * (x %% 1)) # èˆå…¥åˆ°æœ€æ¥è¿‘çš„ç§’æ•°
    lab &lt;- sprintf("%02d:%02d:%02d", h, m, s) # æ ¼å¼åŒ–å­—ç¬¦ä¸²ä¸ºHH:MM:SS çš„æ ¼å¼
    lab &lt;- gsub("^00:", "", lab) # å¦‚æœå¼€å¤´å­˜åœ¨00ï¼šåˆ™ç§»é™¤
    lab &lt;- gsub("^0", "", lab) # å¦‚æœå¼€å¤´å­˜åœ¨0 åˆ™ç§»é™¤
    return(lab)
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">timeHMS_formatter(c(.33, 50, 51.25, 59.32, 60, 60.1, 130.32))<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>'0:20'</li><li>'50:00'</li><li>'51:15'</li><li>'59:19'</li><li>'1:00:00'</li><li>'1:00:06'</li><li>'2:10:19'</li></ol>



<p>éšggplot2å®‰è£…çš„scalesåŒ…è‡ªå¸¦äº†ä¸€äº›å†…å»ºçš„æ ¼å¼åŒ–å‡½æ•°ï¼š  </p>
<ul>
<li>comma() åœ¨åƒã€ç™¾ä¸‡ã€åäº¿ç­‰ä½ç½®å‘æ•°å­—æ·»åŠ é€—å·ã€‚</li>
<li>dollar()æ·»åŠ ä¸€ä¸ªç¾å…ƒç¬¦å·å¹¶èˆå…¥åˆ°æœ€æ¥è¿‘çš„ç¾åˆ†ã€‚</li>
<li>percent()ä¹˜ä»¥100ï¼Œèˆå…¥åˆ°æœ€æ¥è¿‘çš„æ•´æ•°å€¼ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªç™¾åˆ†å·ã€‚</li>
<li>scientific()å¯¹å¤§æ•°å­—å’Œå°æ•°å­—ç»™å‡ºç§‘å­¦è®¡æ•°æ³•è¡¨ç¤ºï¼Œå¦‚ 3.30e+05ã€‚  </li>
</ul>
<p>å¦‚æœä½ å¸Œæœ›ä½¿ç”¨è¿™äº›å‡½æ•°ï¼Œå¿…é¡»é¦–å…ˆä½¿ç”¨library(scales)åŠ è½½scalesåŒ…</p>
<h2 id="ä¿®æ”¹åˆ»åº¦æ ‡ç­¾çš„å¤–è§‚"><a href="#ä¿®æ”¹åˆ»åº¦æ ‡ç­¾çš„å¤–è§‚" class="headerlink" title="ä¿®æ”¹åˆ»åº¦æ ‡ç­¾çš„å¤–è§‚"></a>ä¿®æ”¹åˆ»åº¦æ ‡ç­¾çš„å¤–è§‚</h2><p>ğŸ’¡ <strong>æ–¹æ³•</strong><br>æ—‹è½¬æ ‡ç­¾æ–‡æœ¬</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">bp &lt;- ggplot(PlantGrowth, aes(x=group, y=weight)) + geom_boxplot() + 
       scale_x_discrete(breaks=c('ctrl', 'trt1', 'trt2'),
                       labels=c('Control', 'Treatment 1', 'treatment 2'))

bp<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_139_0.png" alt="png"></p>
<p>è¦å°†æ–‡æœ¬é€†æ—¶é’ˆæ—‹è½¬90Â°ï¼Œåªéœ€ä½¿ç”¨ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">bp + theme(axis.text.x = element_text(angle = 90, hjust = 1, vjust = .5))<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<p><img src="output_141_0.png" alt="png"></p>
<p>å°†æ–‡æœ¬æ—‹è½¬30Â°å¯ä»¥å ç”¨æ›´å°çš„çºµå‘ç©ºé—´ï¼Œå¹¶ä¸”æ˜“äºé˜…è¯»ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">bp + theme(axis.text.x = element_text(angle = 30, hjust = 1, vjust = 1))<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<p><img src="output_143_0.png" alt="png"></p>
<p>å‚æ•°hjustå’Œvjustè®¾ç½®äº†æ¨ªå‘å¯¹é½ï¼ˆå·¦å¯¹é½/å±…ä¸­/å³å¯¹é½ï¼‰å’Œçºµå‘å¯¹é½ï¼ˆé¡¶éƒ¨å¯¹é½/å±…ä¸­/åº•éƒ¨å¯¹é½ï¼‰ã€‚</p>
<p>ğŸ’¬<strong>è®¨è®º</strong><br>é™¤äº†æ—‹è½¬ä»¥å¤–ï¼Œå…¶ä»–çš„æ–‡æœ¬å±æ€§ï¼Œå¦‚å¤§å°ã€æ ·å¼ï¼ˆç²—ä½“/æ–œä½“/å¸¸è§„ï¼‰å’Œå­—ä½“æ—ï¼ˆå¦‚ Times æˆ– Helveticaï¼‰å¯ä»¥ä½¿ç”¨element_text()è¿›è¡Œè®¾ç½®ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">bp + theme(axis.text.x = element_text(family='Times', face='italic', color='darkred', size=rel(0.9)))<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre><code>Warning message in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, :
"Windowså­—ä½“æ•°æ®åº“é‡Œæ²¡æœ‰è¿™æ ·çš„å­—ä½“ç³»åˆ—"
Warning message in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, :
"Windowså­—ä½“æ•°æ®åº“é‡Œæ²¡æœ‰è¿™æ ·çš„å­—ä½“ç³»åˆ—"
</code></pre>
<p><img src="output_146_1.png" alt="png"></p>
<p>size è¢«è®¾ä¸º rel(0.9)ï¼Œæ„ä¸ºå½“å‰ä¸»é¢˜åŸºç¡€å­—ä½“å¤§å°çš„0.9å€ã€‚  </p>
<p>è¿™äº›å‘½ä»¤ä»…ä»…æ§åˆ¶äº†å•ä¸ªåæ ‡è½´ä¸Šåˆ»åº¦æ ‡ç­¾çš„å¤–è§‚ï¼Œå¹¶ä¸å½±å“å…¶ä»–åæ ‡è½´ã€åæ ‡è½´æ ‡ç­¾ã€æ•´ä½“çš„æ ‡é¢˜æˆ–å›¾ä¾‹ã€‚è¦åŒæ—¶æ§åˆ¶æ‰€æœ‰è¿™äº›å…ƒç´ çš„å¤–è§‚ï¼Œå¯ä»¥ä½¿ç”¨ä¸»é¢˜ç³»ç»Ÿã€‚å‚è§ <a href="#"></a></p>
<h2 id="ä¿®æ”¹åæ ‡è½´æ ‡ç­¾çš„æ–‡æœ¬"><a href="#ä¿®æ”¹åæ ‡è½´æ ‡ç­¾çš„æ–‡æœ¬" class="headerlink" title="ä¿®æ”¹åæ ‡è½´æ ‡ç­¾çš„æ–‡æœ¬"></a>ä¿®æ”¹åæ ‡è½´æ ‡ç­¾çš„æ–‡æœ¬</h2><p>ä½¿ç”¨<code>xlab()</code>æˆ–<code>ylab()</code>æ¥ä¿®æ”¹åæ ‡è½´æ ‡ç­¾çš„æ–‡æœ¬ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">hwp &lt;- ggplot(heightweight, aes(x=ageYear, y=heightIn, color=sex)) + 
        geom_point()

# ä½¿ç”¨é»˜è®¤çš„åæ ‡è½´æ ‡ç­¾
hwp

# è®¾ç½®åæ ‡è½´æ ‡ç­¾
hwp + xlab('Age in years') + ylab('Height in inches')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_150_0.png" alt="png"></p>
<p><img src="output_150_1.png" alt="png"></p>
<p>ğŸ’¬<strong>è®¨è®º</strong><br>é»˜è®¤æƒ…å†µä¸‹ï¼Œå›¾å½¢å°†ç›´æ¥ä½¿ç”¨æ•°æ®æ¡†ä¸­çš„åˆ—åä½œä¸ºæ•°æ®è½´æ ‡ç­¾ã€‚è¿™å¯¹äºæ¢ç´¢æ•°æ®æ¥è¯´å¯èƒ½è¿˜å¥½ï¼Œä½†åœ¨å¯¹å¤–å‘ˆç°æ•°æ®æ—¶ï¼Œä½ ä¹Ÿè®¸ä¼šå¸Œæœ›æ›´å…·æè¿°åŠ›çš„åæ ‡è½´æ ‡ç­¾ã€‚  </p>
<p>é™¤äº†<code>xlab()</code>å’Œ<code>ylab()</code>ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code>labs()</code>ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">hwp + labs(x='Age in years', y='Height in inches')<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<p><img src="output_152_0.png" alt="png"></p>
<p>è®¾ç½®åæ ‡è½´æ ‡ç­¾çš„å¦ä¸€ç§æ–¹æ³•æ˜¯åœ¨æ ‡åº¦ä¸­æŒ‡å®šï¼Œå°±åƒè¿™æ ·ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">hwp + scale_x_continuous(name='Age in years')<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>è¿™ç§æ–¹æ³•çœ‹èµ·æ¥å¯èƒ½æœ‰ç‚¹åˆ«æ‰­ï¼Œä¸è¿‡å¯èƒ½åœ¨ä½ åŒæ—¶è®¾å®šæ ‡åº¦çš„å…¶ä»–å±æ€§ï¼ˆå¦‚åˆ»åº¦çº¿ä½ç½®ã€å€¼åŸŸç­‰ï¼‰æ—¶ä¼šæ¯”è¾ƒæœ‰ç”¨ã€‚</p>
<p>å½“ç„¶ï¼Œè¿™ç§æ–¹æ³•åŒæ ·é€‚ç”¨äºå…¶ä»–çš„åæ ‡è½´æ ‡åº¦ï¼Œå¦‚scale_y_continuous()ã€scale_x_discrete()ç­‰ã€‚</p>
<p>è¿˜å¯ä»¥é€‚ç”¨\næ¥æ·»åŠ æ¢è¡Œ</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">hwp + scale_x_continuous(name = 'Age\n(years)')<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<p><img src="output_158_0.png" alt="png"></p>
<h2 id="ç§»é™¤åæ ‡è½´æ ‡ç­¾"><a href="#ç§»é™¤åæ ‡è½´æ ‡ç­¾" class="headerlink" title="ç§»é™¤åæ ‡è½´æ ‡ç­¾"></a>ç§»é™¤åæ ‡è½´æ ‡ç­¾</h2><p>ğŸ’¡ <strong>æ–¹æ³•</strong><br>ä½¿ç”¨theme(axis.title.x = element_black())ã€‚å¯¹äºyè½´æ ‡ç­¾ï¼Œé’ˆå¯¹axis.title.yåšåŒæ ·å¤„ç†ã€‚</p>
<p>ç§»é™¤åæ ‡è½´æ ‡ç­¾çš„å¦ä¸€ç§æ–¹æ³•æ˜¯å°†å…¶è®¾ä¸ºä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚ä½†å¦‚æœä»¥è¿™ç§æ–¹å¼å»åšï¼Œé‚£ä¹ˆå›¾ä¸­å°†ä»ä¸ºæ–‡æœ¬ç•™å‡ºç©ºé—´ã€‚</p>
<h2 id="ç§»é™¤åæ ‡è½´æ ‡ç­¾çš„å¤–è§‚"><a href="#ç§»é™¤åæ ‡è½´æ ‡ç­¾çš„å¤–è§‚" class="headerlink" title="ç§»é™¤åæ ‡è½´æ ‡ç­¾çš„å¤–è§‚"></a>ç§»é™¤åæ ‡è½´æ ‡ç­¾çš„å¤–è§‚</h2><p>ğŸ’¡ <strong>æ–¹æ³•</strong><br>ä½¿ç”¨<code>axis.title.x()</code>å³å¯</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">hwp &lt;- ggplot(heightweight, aes(x=ageYear, y=heightIn)) + geom_point()

hwp + theme(axis.title.x = element_text(face='italic', color='darkred', size=14))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


<p><img src="output_164_0.png" alt="png"></p>
<p>ğŸ’¬<strong>è®¨è®º</strong><br>å¯¹äºyè½´æ ‡ç­¾æ¥è¯´ï¼Œæœ‰æ—¶ä¸å¯¹æ–‡æœ¬è¿›è¡Œæ—‹è½¬ä¼šæ¯”è¾ƒæœ‰ç”¨ã€‚<br>å½“è°ƒç”¨<code>element_text()</code>æ—¶é»˜è®¤è§’åº¦ä¸º0ï¼Œæ‰€ä»¥å¦‚æœè®¾ç½®äº†axis.title.y ä½†æ²¡æœ‰æŒ‡å®šè¿™ä¸ªè§’åº¦ï¼Œå®ƒå°†ä»¥æ–‡æœ¬çš„é¡¶éƒ¨æŒ‡å‘ä¸Šæ–¹çš„æœå‘æ˜¾ç¤ºã€‚å¦‚æœä¿®æ”¹äº†axis.title.yä¸­çš„å…¶ä»–ä»»ä½•å±æ€§å¹¶ä¸”å¸Œæœ›å®ƒä»¥æ­£å¸¸æœå‘ï¼Œå³æ—‹è½¬90Â°æ˜¾ç¤ºï¼Œåˆ™å¿…é¡»æ‰‹åŠ¨æŒ‡å®šè¿™ä¸ªè§’åº¦ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">hwp + ylab('Height\n(inches)') + 
 theme(axis.title.y = element_text(angle = 90, face = 'italic', color = 'darkred', 'size'=14))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<p><img src="output_166_0.png" alt="png"></p>
<h2 id="æ²¿åæ ‡è½´æ˜¾ç¤ºç›´çº¿"><a href="#æ²¿åæ ‡è½´æ˜¾ç¤ºç›´çº¿" class="headerlink" title="æ²¿åæ ‡è½´æ˜¾ç¤ºç›´çº¿"></a>æ²¿åæ ‡è½´æ˜¾ç¤ºç›´çº¿</h2><p>â“å¦‚ä½•æ²¿xè½´å’Œyè½´æ˜¾ç¤ºç›´çº¿ï¼Œä½†ä¸åœ¨å›¾å½¢çš„å¦å¤–ä¸¤ä¾§æ˜¾ç¤ºï¼Ÿ<br>ğŸ’¡ä½¿ç”¨ä¸»é¢˜è®¾ç½®ä¸­çš„ <code>axis.line</code> </p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p &lt;- ggplot(heightweight, aes(x=ageYear, y=heightIn)) + geom_point()

p + theme_bw() +
  theme(panel.border = element_blank(),
      axis.line = element_line(color='black'))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_169_0.png" alt="png"></p>
<p>å¦‚æœæœ€åˆä½¿ç”¨çš„ä¸»é¢˜åœ¨ç»˜å›¾åŒºåŸŸçš„å‘¨å›´å°±æœ‰ä¸€æ¡è¾¹ï¼ˆå¦‚ <code>theme_bw()</code>ï¼‰ï¼Œåˆ™éœ€è¦åŒæ—¶é‡ç½®å‚æ•° <code>panel.border</code></p>
<p>å¦‚æœè¾¹ç•Œçº¿æ¯”è¾ƒç²—ï¼Œåˆ™å®ƒä»¬çš„æœ«ç«¯å°†ä»…ä¼šéƒ¨åˆ†åœ°é‡å ã€‚è¦è®©å®ƒä»¬å®Œå…¨é‡å ï¼Œè®¾ç½®<code>lineend="square"</code>å³å¯ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R"># å¯¹äºè¾ƒç²—åœ°çº¿æ¡ï¼Œåªæœ‰ä¸€åŠé‡å 
p + theme_bw() + 
  theme(panel.border = element_blank(),
      axis.line = element_line(color='black', size=4))

# å®Œå…¨é‡å 
p + theme_bw() +
  theme(axis.line = element_line(color='black', size=4, lineend = "square"),
        panel.border = element_blank())<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_171_0.png" alt="png"></p>
<p><img src="output_171_1.png" alt="png"></p>
<h2 id="ä½¿ç”¨å¯¹æ•°åæ ‡è½´"><a href="#ä½¿ç”¨å¯¹æ•°åæ ‡è½´" class="headerlink" title="ä½¿ç”¨å¯¹æ•°åæ ‡è½´"></a>ä½¿ç”¨å¯¹æ•°åæ ‡è½´</h2><p>ğŸ’¡ä½¿ç”¨scale_x_log10() å’Œ/æˆ– scale_y_log10:</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">library(MASS)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre><code>Warning message:
"package 'MASS' was built under R version 4.0.5"
</code></pre>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">head(Animals,2)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 2 Ã— 2</caption>
<thead>
    <tr><th></th><th scope="col">body</th><th scope="col">brain</th></tr>
    <tr><th></th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><th scope="row">Mountain beaver</th><td>  1.35</td><td>  8.1</td></tr>
    <tr><th scope="row">Cow</th><td>465.00</td><td>423.0</td></tr>
</tbody>
</table>




<pre class="line-numbers language-R" data-language="R"><code class="language-R">p &lt;- ggplot(Animals, aes(x=body, y=brain, label=row.names(Animals))) + 
      geom_text(size=3)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">p

# ä½¿ç”¨å¯¹æ•°åæ ‡è½´
p + scale_x_log10() + 
 scale_y_log10()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_177_0.png" alt="png"></p>
<p><img src="output_177_1.png" alt="png"></p>
<p>å…³äºå°†åˆ»åº¦çº¿æ”¾åˆ°ä½•å¤„çš„é—®é¢˜ï¼Œggplot2ä¼šè¯•ç€åšå‡ºæ˜æ™ºçš„é€‰æ‹©ï¼Œä½†æ˜¯å¦‚æœä½ ä¸å–œæ¬¢è¿™äº›åˆ»åº¦ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡æŒ‡å®šbreaksï¼ˆä¹Ÿå¯é¢å¤–æŒ‡å®šlabelsï¼‰æ¥ä¿®æ”¹å®ƒä»¬ï¼Œåœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œè‡ªåŠ¨ç”Ÿæˆåˆ»åº¦çº¿çš„é—´è·è¾ƒç†æƒ³çš„é—´è·æ›´è¿œã€‚é’ˆå¯¹yè½´çš„åˆ»åº¦çº¿ï¼Œå¯ä»¥åƒè¿™æ ·<br><strong>10^(0:3)</strong><br>è·å¾—ä¸€ä¸ªå«æœ‰ä»10<sup>0</sup>åˆ°10<sup>3</sup>çš„10çš„å„æ¬¡å¹‚çš„å‘é‡</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p + scale_x_log10(breaks=10^(-1:5)) + scale_y_log10(breaks=10^(0:3))<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<p><img src="output_179_0.png" alt="png"></p>
<p>è¦è®©åˆ»åº¦æ ‡ç­¾è€Œä½¿ç”¨æŒ‡æ•°è®°æ•°æ³•ï¼Œåªè¦ä½¿ç”¨scalesåŒ…ä¸­çš„å‡½æ•°trans_format()å³å¯ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">library(scales)
p + scale_x_log10(breaks=10^(-1:5),
                 labels=trans_format("log10", math_format(10^.x))) +
  scale_y_log10(breaks=10^(0:3),
               labels=trans_format("log10", math_format(10^.x)))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_181_0.png" alt="png"></p>
<p>ä½¿ç”¨å¯¹æ•°åæ ‡è½´çš„å¦ä¸€ç§æ–¹æ³•æ˜¯ï¼Œåœ¨å°†æ•°æ®æ˜ å°„åˆ°xå’Œyåæ ‡ä¹‹å‰ï¼Œå…ˆå¯¹å…¶è¿›è¡Œå˜æ¢ã€‚ä»æŠ€æœ¯ä¸Šè®²ï¼Œåæ ‡è½´ä»ç„¶æ˜¯çº¿æ€§çš„â€”â€”å®ƒè¡¨ç¤ºå¯¹æ•°æ®å˜æ¢åçš„æ•°å€¼ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">ggplot(Animals, aes(x=log10(body), y=log10(brain), label=row.names(Animals))) + 
 geom_text(size=3)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<p><img src="output_183_0.png" alt="png"></p>
<p>ä½¿ç”¨è¿™äº›å˜æ¢æœ‰ç‚¹å¤æ‚â€”â€” scales_x_log10() å¯ä»¥ç®€å†™ï¼Œä½†æ˜¯å¯¹äºå…¶ä»–çš„å¯¹æ•°æ ‡åº¦è€Œè¨€ï¼Œéœ€è¦å®Œæ•´åœ°å®šä¹‰å®ƒä»¬ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">library(scales)

p + scale_x_continuous(trans = log_trans(),
                      breaks = trans_breaks("log", function(x) exp(x)),
                      labels = trans_format("log", math_format(e^.x))) + 
    scale_y_continuous(trans = log2_trans(),
                      breaks = trans_breaks("log2", function(x) 2^x),
                      labels = trans_format("log2", math_format(2^x)))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_185_0.png" alt="png"></p>
<p>ä¹Ÿå¯ä»¥åªä½¿ç”¨ä¸€æ¡å¯¹æ•°åæ ‡è½´ã€‚è¿™ç§åšæ³•å¯¹äºå‘ˆç°é‡‘èæ•°æ®å¾€å¾€æ˜¯æœ‰ç”¨çš„ï¼Œå› ä¸ºè¿™æ ·å¾€å¾€èƒ½æ›´å¥½åœ°å±•ç¤ºå‡ºæŒ‰æ¯”ä¾‹çš„å˜åŒ–ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">options(repr.plot.width = 8, repr.plot.height = 3 )
ggplot(aapl, aes(x=date, y=adj_price)) + geom_line()

ggplot(aapl, aes(x=date, y=adj_price)) + geom_line() + 
 scale_y_log10(breaks=c(2,10,50,250))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_187_0.png" alt="png"></p>
<p><img src="output_187_1.png" alt="png"></p>
<h2 id="ä¸ºå¯¹æ•°åæ ‡è½´æ·»åŠ åˆ»åº¦"><a href="#ä¸ºå¯¹æ•°åæ ‡è½´æ·»åŠ åˆ»åº¦" class="headerlink" title="ä¸ºå¯¹æ•°åæ ‡è½´æ·»åŠ åˆ»åº¦"></a>ä¸ºå¯¹æ•°åæ ‡è½´æ·»åŠ åˆ»åº¦</h2><p>â“å¦‚ä½•ä¸ºå¯¹æ•°åæ ‡è½´æ·»åŠ é—´è·é€’å‡çš„åˆ»åº¦çº¿<br>ğŸ’¡ä½¿ç”¨<code>annotation_logticks()</code>  </p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">library(MASS)
library(scales)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<pre><code>Warning message:
"package 'MASS' was built under R version 4.0.5"
</code></pre>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">head(Animals, 2)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 2 Ã— 2</caption>
<thead>
    <tr><th></th><th scope="col">body</th><th scope="col">brain</th></tr>
    <tr><th></th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><th scope="row">Mountain beaver</th><td>  1.35</td><td>  8.1</td></tr>
    <tr><th scope="row">Cow</th><td>465.00</td><td>423.0</td></tr>
</tbody>
</table>




<pre class="line-numbers language-R" data-language="R"><code class="language-R">ggplot(Animals, aes(x=body, y=brain, label=rownames(Animals))) + 
 geom_text(size=3) + 
 annotation_logticks() + 
 theme_bw() +
 scale_x_log10(breaks = trans_breaks("log10", function(x) 10^x), 
               labels = trans_format("log10", math_format(10^.x))) + 
 scale_y_log10(breaks = trans_breaks("log10", function(x) 10^x),
               labels = trans_format("log10", math_format(10^.x)))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_192_0.png" alt="png"></p>
<p>ğŸ’¬<strong>è®¨è®º</strong><br>ä½¿ç”¨annotation_logticks()åˆ›å»ºçš„åˆ»åº¦çº¿äº‹å®ä¸Šæ˜¯ç»˜å›¾åŒºåŸŸä¸­çš„å‡ ä½•å¯¹è±¡ã€‚åœ¨æ¯ä¸ª10çš„å¹‚æ¬¡å¤„æœ‰ä¸€æ¡é•¿åˆ»åº¦çº¿ï¼Œåœ¨æ¯ä¸ª5çš„ä½ç½®å¤„æœ‰ä¸€æ¡ä¸­ç­‰é•¿åº¦çš„åˆ»åº¦çº¿ã€‚</p>
<h2 id="ç»˜åˆ¶ç¯çŠ¶å›¾å½¢"><a href="#ç»˜åˆ¶ç¯çŠ¶å›¾å½¢" class="headerlink" title="ç»˜åˆ¶ç¯çŠ¶å›¾å½¢"></a>ç»˜åˆ¶ç¯çŠ¶å›¾å½¢</h2><p>ğŸ’¡<strong>æ–¹æ³•</strong><br>ä½¿ç”¨<code>coord_polar()</code>ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">head(wind,5)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 5 Ã— 7</caption>
<thead>
    <tr><th></th><th scope="col">TimeUTC</th><th scope="col">Temp</th><th scope="col">WindAvg</th><th scope="col">WindMax</th><th scope="col">WindDir</th><th scope="col">SpeedCat</th><th scope="col">DirCat</th></tr>
    <tr><th></th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><th scope="row">3</th><td> 0</td><td>3.54</td><td>9.52</td><td>10.39</td><td>89</td><td>10-15</td><td>90</td></tr>
    <tr><th scope="row">4</th><td> 5</td><td>3.52</td><td>9.10</td><td> 9.90</td><td>92</td><td>5-10 </td><td>90</td></tr>
    <tr><th scope="row">5</th><td>10</td><td>3.53</td><td>8.73</td><td> 9.51</td><td>92</td><td>5-10 </td><td>90</td></tr>
    <tr><th scope="row">6</th><td>15</td><td>3.63</td><td>8.97</td><td> 9.90</td><td>94</td><td>5-10 </td><td>90</td></tr>
    <tr><th scope="row">7</th><td>20</td><td>3.71</td><td>8.51</td><td> 9.41</td><td>97</td><td>5-10 </td><td>90</td></tr>
</tbody>
</table>



<p>æˆ‘ä»¬å°†ä½¿ç”¨<code>geom_histogram()</code>å¯¹æ¯ä¸ª<code>SpeedCat</code>å’Œ<code>DirCat</code>çš„ç±»åˆ«ç»˜åˆ¶æ ·æœ¬æ•°é‡çš„è®¡æ•°å€¼ã€‚å°†binwidthè®¾ç½®ä¸º15ä»¥ä½¿ç›´æ–¹å›¾çš„originå¼€å§‹äº-7.5çš„ä½ç½®ï¼Œè¿™æ ·æ¯ä¸ªæ‰‡å½¢å°±ä¼šå±…ä¸­äº0ã€15ã€30ç­‰ä½ç½®ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">ggplot(wind, aes(x=DirCat, fill=SpeedCat)) + 
 geom_histogram(binwidth=15, boundary=-7.5) + 
 coord_polar() + 
 scale_x_continuous(limits=c(0,360))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<pre><code>Warning message:
"Removed 8 rows containing missing values (geom_bar)."
</code></pre>
<p><img src="output_198_1.png" alt="png"></p>
<p>ä½¿ç”¨åæ ‡å›¾æ—¶è¦å°å¿ƒï¼Œå› ä¸ºè¿™ç§å›¾å½¢ä¼šæ‰­æ›²å¯¹æ•°æ®çš„æ„ŸçŸ¥ã€‚æœ¬ä¾‹ä¸­ï¼Œåœ¨210Â°ä½ç½®æœ‰15ä¸ªé£é€Ÿä¸º15-20çš„è§‚æµ‹ä»¥åŠ13ä¸ªé£é€Ÿå¤§äº20çš„è§‚æµ‹ï¼Œä½†æ˜¯å¯¹å›¾å½¢åŒ†åŒ†ä¸€ç¥æ—¶ï¼Œçœ‹èµ·æ¥é£é€Ÿå¤§äº20çš„è§‚æµ‹æ›´å¤šä¸€äº›ï¼Œè€Œä¸”è¿˜å­˜åœ¨ä¸‰ä¸ªé£é€Ÿ10-15çš„è§‚æµ‹ï¼Œå®ƒä»¬å´å‡ ä¹ä¸å¯è§ã€‚</p>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åè½¬å›¾ä¾‹ã€ä½¿ç”¨ä¸åŒçš„è°ƒè‰²æ¿ã€æ·»åŠ å¤–æ¡†çº¿ä»¥åŠå°†åˆ†å‰²ç‚¹è®¾ç½®ä¸ºæŸäº›æ›´ç†Ÿæ‚‰çš„å€¼çš„æ–¹å¼ï¼Œè®©å›¾å½¢ç¨å¾®ç¾è§‚ä¸€äº›ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">ggplot(wind, aes(x=DirCat, fill=SpeedCat)) + 
 theme_bw() + 
 geom_histogram(binwidth=15, origin=-7.5, color='black', size=.25) + 
 guides(fill=guide_legend(reverse = TRUE)) + 
 coord_polar() + 
 scale_x_continuous(limits = c(0,360), breaks = seq(0,360,by=45),
                   minor_breaks=seq(0, 360, by=15)) + 
 scale_fill_brewer()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre><code>Warning message:
"`origin` is deprecated. Please use `boundary` instead."
Warning message:
"Removed 8 rows containing missing values (geom_bar)."
</code></pre>
<p><img src="output_201_1.png" alt="png"></p>
<p>ä½¿ç”¨å‚æ•°startè®¾ç½®å›¾å½¢èµ·å§‹çš„è§’åº¦å¯èƒ½ä¹Ÿæ˜¯æœ‰ç”¨çš„ï¼Œç‰¹åˆ«æ˜¯å½“æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç¦»æ•£å‹å˜é‡æ˜ å°„ä¸ºè§’åº¦ï¼ˆthetaï¼‰æ—¶ã€‚èµ·å§‹è§’åº¦çš„å€¼ä»¥å¼§åº¦è®¡ï¼Œå¦‚æœçŸ¥é“è¦è°ƒæ•´çš„è§’åº¦ï¼Œåˆ™å¿…é¡»å°†å®ƒè½¬æ¢ä¸ºå¼§åº¦ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">coord_polar(start = -45 * pi / 180)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<pre><code>&lt;ggproto object: Class CoordPolar, Coord, gg&gt;
    aspect: function
    backtransform_range: function
    clip: on
    default: FALSE
    direction: 1
    distance: function
    is_free: function
    is_linear: function
    labels: function
    modify_scales: function
    r: y
    range: function
    render_axis_h: function
    render_axis_v: function
    render_bg: function
    render_fg: function
    setup_data: function
    setup_layout: function
    setup_panel_guides: function
    setup_panel_params: function
    setup_params: function
    start: -0.785398163397448
    theta: x
    train_panel_guides: function
    transform: function
    super:  &lt;ggproto object: Class CoordPolar, Coord, gg&gt;
</code></pre>
<p>æåæ ‡å¯ä¸å…¶ä»–å‡ ä½•å¯¹è±¡æ­é…ä½¿ç”¨ï¼ŒåŒ…æ‹¬çº¿å’Œç‚¹ã€‚åœ¨ä½¿ç”¨è¿™äº›å‡ ä½•å¯¹è±¡æ—¶æœ‰ä¸€äº›é‡è¦çš„é—®é¢˜è¦ç‰¢è®°äºå¿ƒã€‚é¦–å…ˆï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå¯¹äºæ˜ å°„åˆ°yï¼ˆæˆ–è€…è¯´rï¼‰çš„å˜é‡ï¼Œæœ€å°å€¼å°†è¢«æ˜ å°„åˆ°ä¸­å¿ƒï¼›</p>
<h2 id="åœ¨åæ ‡è½´ä¸Šä½¿ç”¨æ—¥æœŸ"><a href="#åœ¨åæ ‡è½´ä¸Šä½¿ç”¨æ—¥æœŸ" class="headerlink" title="åœ¨åæ ‡è½´ä¸Šä½¿ç”¨æ—¥æœŸ"></a>åœ¨åæ ‡è½´ä¸Šä½¿ç”¨æ—¥æœŸ</h2><h2 id="æœ‰ç”¨çš„é“¾æ¥"><a href="#æœ‰ç”¨çš„é“¾æ¥" class="headerlink" title="æœ‰ç”¨çš„é“¾æ¥"></a>æœ‰ç”¨çš„é“¾æ¥</h2><p>æ¯”è¾ƒå¥½çš„å¹²è´§åšå®¢<br><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/03255dd4324d">r&lt;-ggplot2 ä¿®æ”¹xå’Œyè½´åˆ»åº¦</a></p>
<h1 id="ç¬¬ä¹ç« -æ§åˆ¶å›¾å½¢çš„æ•´ä½“å¤–è§‚"><a href="#ç¬¬ä¹ç« -æ§åˆ¶å›¾å½¢çš„æ•´ä½“å¤–è§‚" class="headerlink" title="ç¬¬ä¹ç«  æ§åˆ¶å›¾å½¢çš„æ•´ä½“å¤–è§‚"></a>ç¬¬ä¹ç«  æ§åˆ¶å›¾å½¢çš„æ•´ä½“å¤–è§‚</h1><h2 id="è®¾ç½®å›¾å½¢æ ‡é¢˜"><a href="#è®¾ç½®å›¾å½¢æ ‡é¢˜" class="headerlink" title="è®¾ç½®å›¾å½¢æ ‡é¢˜"></a>è®¾ç½®å›¾å½¢æ ‡é¢˜</h2><h1 id="ç¬¬åç« -å›¾ä¾‹"><a href="#ç¬¬åç« -å›¾ä¾‹" class="headerlink" title="ç¬¬åç«  å›¾ä¾‹"></a>ç¬¬åç«  å›¾ä¾‹</h1><h2 id="ç§»é™¤å›¾ä¾‹"><a href="#ç§»é™¤å›¾ä¾‹" class="headerlink" title="ç§»é™¤å›¾ä¾‹"></a>ç§»é™¤å›¾ä¾‹</h2><p>ğŸ’¡ä½¿ç”¨ guides()ï¼Œå¹¶æŒ‡å®šéœ€è¦ç§»é™¤å›¾ä¾‹çš„æ ‡åº¦</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p &lt;- ggplot(PlantGrowth, aes(x=group, y=weight, fill=group)) + 
 geom_boxplot() + 
 theme_bw(base_size = 25) + 
 theme(panel.grid = element_blank())<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">p + guides(fill="none")<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<p><img src="output_214_0.png" alt="png"></p>
<p>æˆ–è€…åœ¨æ ‡åº¦ä¸­è®¾ç½® guide=â€noneâ€</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p + scale_fill_discrete(guide="none")<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<p><img src="output_216_0.png" alt="png"></p>
<p>ä½¿ç”¨ä¸»é¢˜ç³»ç»Ÿ themeï¼Œä¼šç§»é™¤æ‰€æœ‰å›¾ä¾‹</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p + theme(legend.position = "none")<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<p><img src="output_218_0.png" alt="png"></p>
<p>å½“æŸä¸ªå˜é‡è¢«æ˜ å°„åˆ°å›¾å½¢å±æ€§fillä¸Šæ—¶ï¼Œé»˜è®¤ä½¿ç”¨çš„æ ‡åº¦ä¸ºscale_fill_discrete() (ä¸scale_fill_hue()ç­‰ä»·)ï¼Œè¿™ä¼šå°†ä¸åŒå› å­æ°´å¹³æ˜ å°„åˆ°è‰²ç¯ä¸Šå‡åŒ€åˆ†å¸ƒçš„é¢œè‰²å€¼ä¸Šã€‚å¯¹äºfillæ¥è¯´ï¼Œä¹Ÿæœ‰å…¶ä»–çš„æ ‡åº¦å¯ç”¨ï¼Œå¦‚scale_fill_manual()ã€‚</p>
<h2 id="ä¿®æ”¹å›¾ä¾‹çš„ä½ç½®"><a href="#ä¿®æ”¹å›¾ä¾‹çš„ä½ç½®" class="headerlink" title="ä¿®æ”¹å›¾ä¾‹çš„ä½ç½®"></a>ä¿®æ”¹å›¾ä¾‹çš„ä½ç½®</h2><p>ğŸ’¡ä½¿ç”¨theme(legend.position=â€¦)å³å¯ã€‚é€šè¿‡æŒ‡å®šä½ç½®å‚æ•°ä¸ºtopã€leftã€rightæˆ–bottomï¼Œå›¾ä¾‹å³å¯è¢«æ”¾ç½®åœ¨é¡¶éƒ¨ã€å·¦ä¾§ã€å³ä¾§æˆ–åº•éƒ¨ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p + 
 scale_fill_brewer(palette = 'Pastel2') + 
 theme(legend.position = 'top')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


<p><img src="output_222_0.png" alt="png"></p>
<p>é€šè¿‡æŒ‡å®šåƒ legend.position=c(1,0) è¿™æ ·çš„ä½ç½®åæ ‡ï¼Œå›¾ä¾‹äº¦å¯è¢«ç½®äºç»˜å›¾åŒºåŸŸå†…éƒ¨ã€‚ç©ºé—´ä¸­å·¦ä¸‹è§’ä¸ºåŸç‚¹(0,0)ï¼Œå³ä¸Šè§’ä¸º(1,1)</p>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨ legend.justification æ¥æŒ‡å®šå›¾ä¾‹æ¡†çš„å“ªä¸€éƒ¨åˆ†è¢«æ”¾ç½®åˆ° legend.position æ‰€æŒ‡å®šçš„ä½ç½®ä¸Šã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå›¾ä¾‹çš„ä¸­å¿ƒ(0.5, 0.5)è¢«ç½®äºç»™å®šçš„åæ ‡å¤„ï¼Œä½†æ˜¯æŒ‡å®šä¸€ä¸ªä¸åŒçš„ç‚¹å¾€å¾€æ˜¯æœ‰ç”¨çš„ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p + theme(legend.position = c(0.95,0.025), legend.justification = c(1,0))<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<p><img src="output_225_0.png" alt="png"></p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p + theme(legend.position = c(1,1), legend.justification = c(1,1))<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<p><img src="output_226_0.png" alt="png"></p>
<p>åœ¨ç»˜å›¾åŒºåŸŸå†…æ”¾ç½®å›¾ä¾‹æ—¶ï¼Œæ·»åŠ ä¸€ä¸ªä¸é€æ˜çš„è¾¹ç•Œä½¿å…¶ä¸å›¾å½¢åˆ†å¼€å¯èƒ½ä¼šæœ‰æ‰€å¸®åŠ©</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p + theme(legend.background = element_rect(fill = "white",color = "black"),
          legend.position = c(.85, .2))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<p><img src="output_228_0.png" alt="png"></p>
<h2 id="ä¿®æ”¹å›¾ä¾‹é¡¹ç›®çš„é¡ºåº"><a href="#ä¿®æ”¹å›¾ä¾‹é¡¹ç›®çš„é¡ºåº" class="headerlink" title="ä¿®æ”¹å›¾ä¾‹é¡¹ç›®çš„é¡ºåº"></a>ä¿®æ”¹å›¾ä¾‹é¡¹ç›®çš„é¡ºåº</h2><p>å°†å¯¹åº”æ ‡åº¦çš„å‚æ•°limitsè®¾ç½®ä¸ºç†æƒ³çš„é¡ºåºå³å¯</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p + scale_fill_discrete(limits=c('trt1','trt2','ctrl'))<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<p><img src="output_231_0.png" alt="png"></p>
<p>è¦æ³¨æ„çš„æ˜¯ï¼Œxè½´ä¸Šçš„é¡ºåºå¹¶æ²¡æœ‰æ”¹å˜ã€‚è¦ä¿®æ”¹è¿™ä¸ªé¡ºåºï¼Œéœ€è¦è®¾ç½® scale_x_discrete() çš„limitså‚æ•°ï¼Œæˆ–è€…ä¿®æ”¹æ•°æ®ï¼Œä½¿å…¶æ‹¥æœ‰ä¸€ä¸ªä¸åŒå› å­çš„æ°´å¹³é¡ºåºã€‚</p>
<p>ä½¿ç”¨ç°åº¦è°ƒè‰²æ¿</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p + scale_fill_grey(start = .5, end = .1, limits=c('trt1', 'trt2', 'ctrl'))<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<p><img src="output_234_0.png" alt="png"></p>
<h2 id="åè½¬å›¾ä¾‹é¡¹ç›®çš„é¡ºåº"><a href="#åè½¬å›¾ä¾‹é¡¹ç›®çš„é¡ºåº" class="headerlink" title="åè½¬å›¾ä¾‹é¡¹ç›®çš„é¡ºåº"></a>åè½¬å›¾ä¾‹é¡¹ç›®çš„é¡ºåº</h2><p>ğŸ’¡æ·»åŠ guides(fill=guide_legend(reverse=TRUE))ä»¥åè½¬å›¾ä¾‹çš„é¡ºåºï¼ˆå¯¹äºå…¶ä»–å›¾å½¢å±æ€§ï¼Œä½¿ç”¨ç›¸åº”å›¾å½¢å±æ€§çš„åç§°ï¼Œå¦‚coloræˆ–sizeæ›¿æ¢fillå³å¯ï¼‰ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p &lt;- ggplot(PlantGrowth, aes(x=group, y=weight, fill=group)) +
 theme_bw(base_size = 25) + 
 geom_boxplot()
p<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_237_0.png" alt="png"></p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p + guides(fill=guide_legend(reverse = TRUE))<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<p><img src="output_238_0.png" alt="png"></p>
<p>åœ¨è®¾å®šæ ‡åº¦çš„åŒæ—¶ä¹Ÿå¯ä»¥æ§åˆ¶å›¾ä¾‹</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">scale_fill_hue(guide=guide_legend(reverse = TRUE))<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="ä¿®æ”¹å›¾ä¾‹æ ‡é¢˜"><a href="#ä¿®æ”¹å›¾ä¾‹æ ‡é¢˜" class="headerlink" title="ä¿®æ”¹å›¾ä¾‹æ ‡é¢˜"></a>ä¿®æ”¹å›¾ä¾‹æ ‡é¢˜</h2><pre class="line-numbers language-R" data-language="R"><code class="language-R">p &lt;- ggplot(PlantGrowth, aes(x=group, y=weight, fill=group)) + 
 geom_boxplot() + 
 theme_bw(base_size = 25)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">p<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<p><img src="output_243_0.png" alt="png"></p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R"># æŒ‡å®šå›¾å½¢å±æ€§è¿›è¡Œå‘½å
p + labs(fill='condition')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<p><img src="output_244_0.png" alt="png"></p>
<p>åœ¨è®¾å®šæ ‡åº¦æ—¶ä¹Ÿå¯ä»¥è®¾ç½®å›¾ä¾‹æ ‡é¢˜ã€‚ç”±äºå›¾ä¾‹å’Œåæ ‡è½´å‡ä¸ºå¼•å¯¼å…ƒç´ ï¼Œè¿™æ ·åšä¸è®¾ç½®xè½´æˆ–yè½´æ ‡é¢˜çš„åŸç†æ˜¯ç›¸åŒçš„ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p + scale_fill_discrete(name='condition')<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>å¦‚æœæœ‰å¤šä¸ªå˜é‡è¢«æ˜ å°„åˆ°å¸¦æœ‰å›¾ä¾‹çš„å›¾å½¢å±æ€§ï¼ˆå³é™¤xå’Œyä»¥å¤–çš„å›¾å½¢å±æ€§ï¼‰ï¼Œå¯ä»¥åˆ†åˆ«è®¾ç½®æ¯ä¸ªå›¾ä¾‹çš„æ ‡é¢˜ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">library(gcookbook)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">hw &lt;- ggplot(data = heightweight, aes(x=ageYear, y=heightIn, color=sex)) + 
 geom_point(aes(size=weightLb)) + scale_size_continuous(range = c(1,4)) + 
 theme_bw(base_size = 25) + 
 theme(panel.grid = element_blank())

hw

hw + labs(color='Male/Female', size='weight\n(pounds)')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_249_0.png" alt="png"></p>
<p><img src="output_249_1.png" alt="png"></p>
<h2 id="ä¿®æ”¹å›¾ä¾‹æ ‡é¢˜çš„å¤–è§‚"><a href="#ä¿®æ”¹å›¾ä¾‹æ ‡é¢˜çš„å¤–è§‚" class="headerlink" title="ä¿®æ”¹å›¾ä¾‹æ ‡é¢˜çš„å¤–è§‚"></a>ä¿®æ”¹å›¾ä¾‹æ ‡é¢˜çš„å¤–è§‚</h2><p>ä½¿ç”¨theme(legend.title=element_text())</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p &lt;- ggplot(PlantGrowth, aes(x=group, y=weight, fill=group)) + 
 geom_boxplot() + theme_bw(base_size = 25)

p + theme(legend.title = element_text(face = 'italic', family = 'times', color = 'red', size = 14))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<pre><code>Warning message in grid.Call(C_stringMetric, as.graphicsAnnot(x$label)):
"Windowså­—ä½“æ•°æ®åº“é‡Œæ²¡æœ‰è¿™æ ·çš„å­—ä½“ç³»åˆ—"
Warning message in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, :
"Windowså­—ä½“æ•°æ®åº“é‡Œæ²¡æœ‰è¿™æ ·çš„å­—ä½“ç³»åˆ—"
Warning message in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, :
"Windowså­—ä½“æ•°æ®åº“é‡Œæ²¡æœ‰è¿™æ ·çš„å­—ä½“ç³»åˆ—"
</code></pre>
<p><img src="output_252_1.png" alt="png"></p>
<h2 id="ç§»é™¤å›¾ä¾‹æ ‡é¢˜"><a href="#ç§»é™¤å›¾ä¾‹æ ‡é¢˜" class="headerlink" title="ç§»é™¤å›¾ä¾‹æ ‡é¢˜"></a>ç§»é™¤å›¾ä¾‹æ ‡é¢˜</h2><p>æ·»åŠ è¯­å¥guides(fill=guide_legend(title=NULL))å¯ä»¥ä»å›¾ä¾‹ä¸­ç§»é™¤æ ‡é¢˜</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">ggplot(PlantGrowth, aes(x=group, y=weight, fill=group)) + 
 geom_boxplot() + 
 guides(fill=guide_legend(title = NULL))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


<p><img src="output_255_0.png" alt="png"></p>
<h2 id="ä¿®æ”¹å›¾ä¾‹æ ‡ç­¾"><a href="#ä¿®æ”¹å›¾ä¾‹æ ‡ç­¾" class="headerlink" title="ä¿®æ”¹å›¾ä¾‹æ ‡ç­¾"></a>ä¿®æ”¹å›¾ä¾‹æ ‡ç­¾</h2><pre class="line-numbers language-R" data-language="R"><code class="language-R">library(gcookbook)

p &lt;- ggplot(PlantGrowth, aes(x=group, y=weight, fill=group)) + 
 geom_boxplot()

p + scale_fill_discrete(labels=c('control','Treatmant1','Treatmant2'))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_257_0.png" alt="png"></p>
<p>å¦‚æœæœ‰ä¸€ä¸ªå˜é‡è¢«åˆ†åˆ«æ˜ å°„åˆ°ä¸¤ä¸ªå›¾å½¢å±æ€§ï¼Œåˆ™é»˜è®¤ä¼šç”Ÿæˆä¸€ä¸ªç»„åˆäº†ä¸¤ç§æƒ…å†µçš„å›¾ä¾‹ã€‚å¦‚æœå¸Œæœ›ä¿®æ”¹å›¾ä¾‹æ ‡ç­¾ï¼Œåˆ™å¿…é¡»åŒæ—¶ä¿®æ”¹ä¸¤ç§æ ‡åº¦ä¸­çš„æ ‡ç­¾ï¼›å¦åˆ™ä¼šå¾—åˆ°ä¸¤ä¸ªåˆ†ç¦»çš„å›¾ä¾‹ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p &lt;- ggplot(heightweight, aes(x=ageYear, y=heightIn, shape=sex, color=sex))+ 
 geom_point() + 
 theme_bw(base_size = 25)

p 

# ä¿®æ”¹ä¸€ä¸ªæ ‡åº¦ä¸­çš„æ ‡ç­¾
p + scale_shape_discrete(labels=c('Female','Male'))

p + scale_shape_discrete(labels=c('Female','Male')) + 
 scale_color_discrete(labels=c('Female','Male'))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_259_0.png" alt="png"></p>
<p><img src="output_259_1.png" alt="png"></p>
<p><img src="output_259_2.png" alt="png"></p>
<h2 id="ä¿®æ”¹å›¾ä¾‹æ ‡ç­¾çš„å¤–è§‚"><a href="#ä¿®æ”¹å›¾ä¾‹æ ‡ç­¾çš„å¤–è§‚" class="headerlink" title="ä¿®æ”¹å›¾ä¾‹æ ‡ç­¾çš„å¤–è§‚"></a>ä¿®æ”¹å›¾ä¾‹æ ‡ç­¾çš„å¤–è§‚</h2><p>ä½¿ç”¨theme(legend.text=element_text())</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p + theme(legend.text = element_text(face = 'italic', family = 'Times', color = 'red', size = 14))<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre><code>Warning message in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, :
"Windowså­—ä½“æ•°æ®åº“é‡Œæ²¡æœ‰è¿™æ ·çš„å­—ä½“ç³»åˆ—"
Warning message in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, :
"Windowså­—ä½“æ•°æ®åº“é‡Œæ²¡æœ‰è¿™æ ·çš„å­—ä½“ç³»åˆ—"
</code></pre>
<p><img src="output_262_1.png" alt="png"></p>
<h2 id="æ›´æ”¹å›¾ä¾‹æ¡ç›®å¸ƒå±€"><a href="#æ›´æ”¹å›¾ä¾‹æ¡ç›®å¸ƒå±€" class="headerlink" title="æ›´æ”¹å›¾ä¾‹æ¡ç›®å¸ƒå±€"></a>æ›´æ”¹å›¾ä¾‹æ¡ç›®å¸ƒå±€</h2><p>å‚è€ƒé“¾æ¥<a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_46084093/article/details/103921549">R ggplot2 æ”¹å›¾ä¾‹æ¡ç›®å¸ƒå±€</a></p>
<p>å¿«æ·è°ƒæ•´æ–¹æ³•åœ¨themeä¸»é¢˜ç³»ç»Ÿï¼Œç²¾ç¡®è°ƒæ•´åœ¨ <code>guides</code>æŒ‡å—ç³»ç»Ÿ</p>
<p>ç²¾å‡†è°ƒæ•´ï¼Œå‚æ•°æœ‰</p>
<ul>
<li>ncolè¡¨ç¤ºåˆ—æ•°ï¼Œ</li>
<li>nrowè¡¨ç¤ºè¡Œæ•°ï¼Œncolå’Œnrowè®¾ç½®ä¸€ä¸ªå³å¯</li>
<li>byrow å¯é€‰T/Fï¼Œé»˜è®¤Fï¼Œå³æŒ‰ç…§åˆ—å¡«å……</li>
<li>reverse å¯é€‰T/Fï¼Œé»˜è®¤Fï¼Œå³å‡åºå¡«å……ï¼Œåä¹‹åˆ™é™åº</li>
</ul>
<pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># å¿«æ·è°ƒæ•´</span>
base <span class="token operator">+</span> theme<span class="token punctuation">(</span>
  legend.direction <span class="token operator">=</span> <span class="token string">"horizontal"</span>
<span class="token punctuation">)</span> 

<span class="token comment"># ç²¾å‡†è°ƒæ•´</span>
base <span class="token operator">+</span> guides<span class="token punctuation">(</span>
  color <span class="token operator">=</span> guide_legend<span class="token punctuation">(</span>
    ncol <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> 
    byrow <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span>
    reverse <span class="token operator">=</span> T<span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h1 id="ç¬¬åä¸€ç« -åˆ†é¢"><a href="#ç¬¬åä¸€ç« -åˆ†é¢" class="headerlink" title="ç¬¬åä¸€ç«  åˆ†é¢"></a>ç¬¬åä¸€ç«  åˆ†é¢</h1><h2 id="ä½¿ç”¨åˆ†é¢å°†æ•°æ®åˆ†å‰²ç»˜åˆ¶åˆ°å­å›¾ä¸­"><a href="#ä½¿ç”¨åˆ†é¢å°†æ•°æ®åˆ†å‰²ç»˜åˆ¶åˆ°å­å›¾ä¸­" class="headerlink" title="ä½¿ç”¨åˆ†é¢å°†æ•°æ®åˆ†å‰²ç»˜åˆ¶åˆ°å­å›¾ä¸­"></a>ä½¿ç”¨åˆ†é¢å°†æ•°æ®åˆ†å‰²ç»˜åˆ¶åˆ°å­å›¾ä¸­</h2><pre class="line-numbers language-R" data-language="R"><code class="language-R">head(mpg,2)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<table class="dataframe">
<caption>A tibble: 2 Ã— 11</caption>
<thead>
    <tr><th scope="col">manufacturer</th><th scope="col">model</th><th scope="col">displ</th><th scope="col">year</th><th scope="col">cyl</th><th scope="col">trans</th><th scope="col">drv</th><th scope="col">cty</th><th scope="col">hwy</th><th scope="col">fl</th><th scope="col">class</th></tr>
    <tr><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;chr&gt;</th></tr>
</thead>
<tbody>
    <tr><td>audi</td><td>a4</td><td>1.8</td><td>1999</td><td>4</td><td>auto(l5)  </td><td>f</td><td>18</td><td>29</td><td>p</td><td>compact</td></tr>
    <tr><td>audi</td><td>a4</td><td>1.8</td><td>1999</td><td>4</td><td>manual(m5)</td><td>f</td><td>21</td><td>29</td><td>p</td><td>compact</td></tr>
</tbody>
</table>




<pre class="line-numbers language-R" data-language="R"><code class="language-R">p &lt;- ggplot(mpg, aes(x=displ, y=hwy)) + geom_point()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R"># çºµå‘æ’åˆ—çš„å­é¢æ¿æ ¹æ® drv åˆ†é¢
p + facet_grid(drv ~ .)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>facet_wrap( ~ drv)</code></p>
<p><img src="output_267_0.png" alt="png"></p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R"># æ¨ªå‘æ’åˆ—çš„å­é¢æ¿æ ¹æ® cyl åˆ†é¢
p + facet_grid(. ~ cyl)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<p><img src="output_268_0.png" alt="png"></p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R"># åŒæ—¶çºµå‘(drv)å’Œæ¨ªå‘(cyl)åˆ†å‰²
p + facet_grid(drv ~ cyl)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<p><img src="output_269_0.png" alt="png"></p>
<h2 id="åœ¨ä¸åŒåæ ‡è½´ä¸‹ä½¿ç”¨åˆ†é¢"><a href="#åœ¨ä¸åŒåæ ‡è½´ä¸‹ä½¿ç”¨åˆ†é¢" class="headerlink" title="åœ¨ä¸åŒåæ ‡è½´ä¸‹ä½¿ç”¨åˆ†é¢"></a>åœ¨ä¸åŒåæ ‡è½´ä¸‹ä½¿ç”¨åˆ†é¢</h2><p>å°†æ ‡åº¦è®¾ç½®ä¸º â€œfree_xâ€ã€â€free_yâ€ã€æˆ–â€freeâ€</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R"># ä½¿ç”¨è‡ªç”±çš„ y æ ‡åº¦
p + facet_grid(drv ~ cyl, scales = 'free_y')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<p><img src="output_272_0.png" alt="png"></p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p + facet_grid(drv ~ cyl, scales = 'free')<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<p><img src="output_273_0.png" alt="png"></p>
<h2 id="ä¿®æ”¹åˆ†é¢çš„æ–‡æœ¬æ ‡ç­¾"><a href="#ä¿®æ”¹åˆ†é¢çš„æ–‡æœ¬æ ‡ç­¾" class="headerlink" title="ä¿®æ”¹åˆ†é¢çš„æ–‡æœ¬æ ‡ç­¾"></a>ä¿®æ”¹åˆ†é¢çš„æ–‡æœ¬æ ‡ç­¾</h2><p>ğŸ’¡ä¿®æ”¹å› å­å„æ°´å¹³çš„åç§°å³å¯</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">mpg2 &lt;- mpg<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">levels(mpg2$drv)[levels(mpg2$drv)=="4"] &lt;- "4wd"
levels(mpg2$drv)[levels(mpg2$drv)=="f"] &lt;- "Font"
levels(mpg2$drv)[levels(mpg2$drv)=="r"] &lt;- "Rear"<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">levels(mpg$drv)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<pre><code>NULL
</code></pre>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">ggplot(mpg2, aes(x=displ, y=hwy)) + geom_point() + facet_grid(drv ~ .)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<p><img src="output_279_0.png" alt="png"></p>
<h2 id="ä¿®æ”¹åˆ†é¢æ ‡ç­¾å’Œè¡¨æ ‡é¢˜çš„å¤–è§‚"><a href="#ä¿®æ”¹åˆ†é¢æ ‡ç­¾å’Œè¡¨æ ‡é¢˜çš„å¤–è§‚" class="headerlink" title="ä¿®æ”¹åˆ†é¢æ ‡ç­¾å’Œè¡¨æ ‡é¢˜çš„å¤–è§‚"></a>ä¿®æ”¹åˆ†é¢æ ‡ç­¾å’Œè¡¨æ ‡é¢˜çš„å¤–è§‚</h2><p>ä½¿ç”¨ä¸»é¢˜ç³»ç»Ÿï¼Œé€šè¿‡è®¾ç½® <code>strip.text()</code> æ¥æ§åˆ¶æ–‡æœ¬çš„å¤–è§‚ï¼Œè®¾ç½®strip.background() ä»¥æ§åˆ¶èƒŒæ™¯çš„å¤–è§‚ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">library(gcookbook)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">head(cabbage_exp,2)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 2 Ã— 6</caption>
<thead>
    <tr><th></th><th scope="col">Cultivar</th><th scope="col">Date</th><th scope="col">Weight</th><th scope="col">sd</th><th scope="col">n</th><th scope="col">se</th></tr>
    <tr><th></th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><th scope="row">1</th><td>c39</td><td>d16</td><td>3.18</td><td>0.9566144</td><td>10</td><td>0.30250803</td></tr>
    <tr><th scope="row">2</th><td>c39</td><td>d20</td><td>2.80</td><td>0.2788867</td><td>10</td><td>0.08819171</td></tr>
</tbody>
</table>




<pre class="line-numbers language-R" data-language="R"><code class="language-R">ggplot(cabbage_exp, aes(x=Cultivar, y=Weight)) + geom_bar(stat = 'identity') + 
 facet_grid(. ~ Date) + 
 theme_bw(base_size = 20) + 
 theme(strip.background = element_rect(fill = 'lightblue', color='black', size=1),
       strip.text = element_text(face='bold', size=rel(1.5))
      )<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_284_0.png" alt="png"></p>
<h2 id="facet-wrap-ä¸-facet-grid"><a href="#facet-wrap-ä¸-facet-grid" class="headerlink" title="facet_wrap ä¸ facet_grid"></a>facet_wrap ä¸ facet_grid</h2><p>ä¸¤ä¸ªå‡½æ•°è¿™ä¸¤ä¸ªå‡½æ•°éƒ½å¯ä»¥è¿›è¡Œåˆ†é¢ï¼Œä½†ä½¿ç”¨å’Œè¾¾åˆ°çš„æ•ˆæœæœ‰æ‰€ä¸åŒã€‚<br>å‚è€ƒ <a target="_blank" rel="noopener" href="https://blog.csdn.net/u014566586/article/details/100190957">ggplot2 åˆ†é¢ç›¸å…³è®¾ç½®ï¼ˆfacetï¼‰</a></p>
<pre class="line-numbers language-r" data-language="r"><code class="language-r">facet_wrap<span class="token punctuation">(</span>facets<span class="token punctuation">,</span> nrow <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> ncol <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> scales <span class="token operator">=</span> <span class="token string">"fixed"</span><span class="token punctuation">,</span> shrink <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> as.table <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> drop <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span>

facet_grid<span class="token punctuation">(</span>facets<span class="token punctuation">,</span> margins <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> scales <span class="token operator">=</span> <span class="token string">"fixed"</span><span class="token punctuation">,</span> space <span class="token operator">=</span> <span class="token string">"fixed"</span><span class="token punctuation">,</span> shrink <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> labeller <span class="token operator">=</span> <span class="token string">"label_value"</span><span class="token punctuation">,</span> as.table <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> drop <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>å…¶ä¸­facet_wrapå’Œfacet_gridä¸åŒåœ¨äºfacet_wrapæ˜¯åŸºäºä¸€ä¸ªå› å­è¿›è¡Œè®¾ç½®ï¼Œfacetsè¡¨ç¤ºå½¢å¼ä¸ºï¼š<del>å˜é‡ï¼ˆ</del>å•å…ƒæ ¼ï¼‰ </p>
<p>è€Œfacet_gridæ˜¯åŸºäºä¸¤ä¸ªå› å­è¿›è¡Œè®¾ç½®ï¼Œfacetsè¡¨ç¤ºå½¢å¼ä¸ºï¼šå˜é‡<del>å˜é‡ï¼ˆè¡Œ</del>åˆ—ï¼‰ï¼Œå¦‚æœæŠŠä¸€ä¸ªå› å­ç”¨ç‚¹è¡¨ç¤ºï¼Œä¹Ÿå¯ä»¥è¾¾åˆ°facet_wrapçš„æ•ˆæœï¼Œä¹Ÿå¯ä»¥ç”¨åŠ å·è®¾ç½®æˆä¸¤ä¸ªä»¥ä¸Šå˜é‡</p>
<p>ä¾‹å¦‚ï¼šå˜é‡+å˜é‡~å˜é‡ çš„å½¢å¼ï¼Œè¡¨ç¤ºå¯¹ä¸‰ä¸ªå˜é‡è®¾ç½®åˆ†é¢ã€‚</p>
<p>å…·ä½“å‚æ•°ï¼š<br>å…·ä½“çš„å‚æ•°ï¼ˆæŠŠä¸¤ä¸ªå‡½æ•°å‚æ•°å’Œåœ¨ä¸€èµ·ï¼‰ï¼š</p>
<ul>
<li><p>nrow,ncol åˆ†é¢è®¾ç½®æˆçš„è¡Œå’Œåˆ—ï¼Œå‚æ•°ä¸ºæ•°å€¼ï¼Œè¡¨ç¤ºå‡ è¡Œæˆ–è€…å‡ åˆ—</p>
</li>
<li><p>scales  å‚æ•°fixedè¡¨ç¤ºå›ºå®šåæ ‡è½´åˆ»åº¦ï¼Œfreeè¡¨ç¤ºåé¦ˆåæ ‡è½´åˆ»åº¦ï¼Œä¹Ÿå¯ä»¥å•ç‹¬è®¾ç½®æˆfree_xæˆ–free_y</p>
</li>
<li><p>shrink  ä¹Ÿå’Œåæ ‡è½´åˆ»åº¦æœ‰å…³ï¼Œå¦‚æœä¸ºTRUEï¼ˆé»˜è®¤å€¼ï¼‰åˆ™æŒ‰ç»Ÿè®¡åçš„æ•°æ®è°ƒæ•´åˆ»åº¦èŒƒå›´ï¼Œå¦åˆ™æŒ‰ç»Ÿè®¡å‰çš„æ•°æ®è®¾å®šåæ ‡ã€‚</p>
</li>
<li><p>drop è¡¨ç¤ºæ˜¯å¦å»æ‰æ²¡æœ‰æ•°æ®çš„åˆ†ç»„ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¸æ˜¾ç¤ºï¼Œé€»è¾‘å€¼ä¸ºFALSE</p>
</li>
<li><p>as.table å’Œå°å›¾æ’åˆ—é¡ºåºæœ‰å…³çš„é€‰é¡¹ã€‚å¦‚æœä¸ºTRUEï¼ˆé»˜è®¤ï¼‰åˆ™æŒ‰è¡¨æ ¼æ–¹å¼æ’åˆ—ï¼Œå³æœ€å¤§å€¼ï¼ˆæŒ‡åˆ†ç»„levelå€¼ï¼‰æ’åœ¨è¡¨æ ¼æœ€åå³å³ä¸‹è§’ï¼Œå¦åˆ™æ’åœ¨å·¦ä¸Šè§’ã€‚</p>
</li>
<li><p>margins é€šè¿‡TRUEæˆ–è€…FALSEè¡¨ç¤ºå¦è®¾ç½®è€Œä¸€ä¸ªæ€»å’Œçš„åˆ†é¢å˜é‡ï¼Œé»˜è®¤æƒ…å†µä¸ºFALSEï¼Œå³ä¸è®¾ç½®</p>
</li>
<li><p>space    è¡¨ç¤ºåˆ†é¢ç©ºé—´æ˜¯å¦å¯ä»¥æŒ‰ç…§æ•°æ®è¿›è¡Œç¼©æ”¾ï¼Œå‚æ•°å’Œscalesä¸€æ ·</p>
</li>
</ul>
<h1 id="ç¬¬åäºŒç« -é…è‰²"><a href="#ç¬¬åäºŒç« -é…è‰²" class="headerlink" title="ç¬¬åäºŒç«  é…è‰²"></a>ç¬¬åäºŒç«  é…è‰²</h1><p>å¯¹äºç‚¹å½¢æ¥è¯´ï¼Œå¤§å¤šæ•°ç‚¹å½¢ï¼Œæ•´ä¸ªç‚¹çš„é¢œè‰²æ˜¯ç”± color æ§åˆ¶çš„ï¼Œè€Œä¸æ˜¯ fillã€‚ä¾‹å¤–çš„æƒ…å†µæ˜¯21-25å·ç‚¹ï¼Œå®ƒä»¬ä¸ä»…æœ‰å¡«å……è‰²ï¼Œä¹Ÿæœ‰è¾¹ç•Œè‰²</p>
<img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQyGbFLS6kIzEFecRarshBazlmY_FGGN4pX1w&amp;usqp=CAU" width="700">

<p>å‡½æ•°<code>scale_fill_hue()</code>ä¸­ï¼Œé¢œè‰²æ¥è‡ª HCL è‰²ç³»ï¼ˆhue-chroma-lightnessï¼šè‰²ç›¸-è‰²åº¦-äº®åº¦ï¼‰çš„è‰²è½®ï¼Œé»˜è®¤äº®åº¦æ˜¯54ï¼ˆå–å€¼ä¸º0~100ï¼‰</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">library(gcookbook)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">p &lt;- ggplot(data = uspopage, aes(x = Year, y = Thousands, fill = AgeGroup)) + 
 geom_area()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">h &lt;- ggplot(heightweight, aes(x=ageYear, y=heightIn, color=sex)) + 
 geom_point()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R"># é»˜è®¤äº®åº¦ 65
h

# ç•¥å¾®åŠ æ·±
h + scale_color_hue(l=45)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_292_0.png" alt="png"></p>
<p><img src="output_292_1.png" alt="png"></p>
<p>ColorBreweråŒ…æä¾›äº†å¾ˆå¤šè°ƒè‰²æ¿ï¼Œä½ å¯ä»¥ç”Ÿæˆä¸€å¼ å›¾æ¥æŸ¥çœ‹è¯¥åŒ…ä¸­çš„æ‰€æœ‰è°ƒè‰²æ¿ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">library(RColorBrewer)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">display.brewer.all()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<p><img src="output_295_0.png" alt="png"></p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p + scale_fill_brewer(palette = 'Oranges')<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<p><img src="output_296_0.png" alt="png"></p>
<p>ä½ è¿˜å¯ä»¥ä½¿ç”¨ç°åº¦è°ƒè‰²æ¿ï¼Œå®ƒå¾ˆé€‚åˆé»‘ç™½æ‰“å°ã€‚æ ‡åº¦èŒƒå›´æ˜¯0~1ï¼ˆå…¶ä¸­0å¯¹åº”é»‘è‰²ï¼Œ1å¯¹åº”ç™½è‰²ï¼‰ï¼Œç°åº¦è°ƒè‰²æ¿çš„é»˜è®¤èŒƒå›´æ˜¯0.2~0.8ï¼Œä½†è¿™ä¸ªå¯ä»¥æ”¹ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p + scale_fill_grey(start = 0, end = 0.7)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<p><img src="output_298_0.png" alt="png"></p>
<h2 id="å¯¹ç¦»æ•£å‹å˜é‡ä½¿ç”¨è‡ªå®šä¹‰è°ƒè‰²æ¿"><a href="#å¯¹ç¦»æ•£å‹å˜é‡ä½¿ç”¨è‡ªå®šä¹‰è°ƒè‰²æ¿" class="headerlink" title="å¯¹ç¦»æ•£å‹å˜é‡ä½¿ç”¨è‡ªå®šä¹‰è°ƒè‰²æ¿"></a>å¯¹ç¦»æ•£å‹å˜é‡ä½¿ç”¨è‡ªå®šä¹‰è°ƒè‰²æ¿</h2><pre class="line-numbers language-R" data-language="R"><code class="language-R"># ä½¿ç”¨é¢œè‰²å
h + scale_color_manual(values = c('red','blue'))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<p><img src="output_300_0.png" alt="png"></p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R"># ä½¿ç”¨RGBå€¼
h + theme_bw(base_size = 25) +
 scale_color_manual(values = c('#CC6666','#7777DD'))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


<p><img src="output_301_0.png" alt="png"></p>
<p>ğŸ’¬å‚æ•° values å‘é‡ä¸­çš„å…ƒç´ é¡ºåºè‡ªåŠ¨åŒ¹é…ç¦»æ•£æ ‡åº¦å¯¹åº”å› å­æ°´å¹³çš„é¡ºåºã€‚<br>æŸ¥çœ‹å› å­é¡ºåºçš„æ–¹æ³•ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">levels(heightweight$sex)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>'f'</li><li>'m'</li></ol>



<p>å¦‚æœå˜é‡æ˜¯å­—ç¬¦å‹å‘é‡è€Œéå› å­å½¢å¼ï¼Œé‚£ä¹ˆå®ƒä¼šè¢«è‡ªåŠ¨è½¬åŒ–ä¸ºå› å­ï¼›é¡ºåºä¹Ÿé»˜è®¤åœ°æŒ‰ç…§å­—æ¯è¡¨æ’åº.</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R"># è‡ªå®šä¹‰é¢œè‰²åˆ†é…çš„é¡ºåº
h + scale_color_manual(values = c(m='blue',f='red'))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<p><img src="output_305_0.png" alt="png"></p>
<p>RGB é¢œè‰²ç”±6ä¸ªæ•°å­—ç»„æˆ:0-9,A-F(10-15).å½¢å¦‚: <code>#RRGGBB</code><br>æ¯ä¸€ä¸ªé¢œè‰²ç”±ä¸¤ä¸ªæ•°å­—æ¥è¡¨ç¤º,èŒƒå›´ä» 00 åˆ° FF( å¯¹åº”åè¿›åˆ¶ä¸­çš„255 )<br>ğŸ’¡åå…­è¿›åˆ¶ä¸­æ¯ä¸ªé¢œè‰²é€šé“å¸¸å¸¸é‡å¤åŒæ ·çš„æ•°å­—,å› ä¸ºè¿™æ ·æ›´å®¹æ˜“é˜…è¯»å¹¶ä¸”ç¬¬äºŒä¸ªæ•°å­—çš„ç²¾ç¡®å€¼å¯¹å¤–è§‚çš„å½±å“å¹¶ä¸æ˜¯å¾ˆæ˜æ˜¾.</p>
<p>è¿™é‡Œæ€»ç»“äº†ä¸€äº›è®¾ç½®RGBé¢œè‰²çš„ç»éªŒ:  </p>
<ul>
<li>åœ¨ä¸€èˆ¬æƒ…å†µä¸‹,æ›´å¤§çš„æ•°å­—æ›´æ˜äº®,è¾ƒå°çš„æ•°å­—æ›´æš—æ·¡.</li>
<li>å¦‚æœæƒ³å¾—åˆ°ç°è‰²,å°†ä¸‰ä¸ªé¢œè‰²é€šé“è®¾ç½®ä¸ºç›¸åŒçš„å€¼.</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://html-color-codes.com/">RGBé¢œè‰²åå…­è¿›åˆ¶è¡¨</a></p>
<h2 id="å¯¹è¿ç»­å‹å˜é‡ä½¿ç”¨è‡ªå®šä¹‰è°ƒè‰²æ¿"><a href="#å¯¹è¿ç»­å‹å˜é‡ä½¿ç”¨è‡ªå®šä¹‰è°ƒè‰²æ¿" class="headerlink" title="å¯¹è¿ç»­å‹å˜é‡ä½¿ç”¨è‡ªå®šä¹‰è°ƒè‰²æ¿"></a>å¯¹è¿ç»­å‹å˜é‡ä½¿ç”¨è‡ªå®šä¹‰è°ƒè‰²æ¿</h2><p>å¯¹è¿ç»­å‹å˜é‡è‡ªå®šä¹‰æ¸å˜å¼çš„è°ƒè‰²æ¿.é¢œè‰²å¯ä»¥ç”¨å·²å‘½åçš„,ä¹Ÿå¯ä»¥ç”¨RGBå€¼æ¥æŒ‡å®š.</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">library(gcookbook)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R"># åŸºç¡€å›¾å½¢
p &lt;- ggplot(heightweight, aes(x=ageYear, y=heightIn, color=weightLb)) + 
 geom_point(size=3)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R"># é»˜è®¤é¢œè‰²
p <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<p><img src="output_313_0.png" alt="png"></p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R"># ä½¿ç”¨ä¸¤ç§é¢œè‰²çš„æ¸å˜è‰²
p + scale_color_gradient(low = 'black', high = 'white')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<p><img src="output_314_0.png" alt="png"></p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R"># æ¸å˜è‰²ä¸­é—´ç”¨ç™½è‰²åˆ’åˆ†
library(scales)
# muted, æ¥è‡ª scales åŒ…: ä½¿æ ‡å‡†é¢œè‰²å˜å¾—æ›´æŸ”å’Œ, é¥±å’Œåº¦æ›´ä½
p + scale_color_gradient2(low = muted('blue'), mid = 'white', high = muted('red'), midpoint = 110)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_315_0.png" alt="png"></p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R"># nä¸ªé¢œè‰²çš„æ¸å˜
p + scale_color_gradientn(colors = c('darkred','orange','yellow','white'))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<p><img src="output_316_0.png" alt="png"></p>
<img width="700" src="data:image/png;base64,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" title="è¿ç»­çš„å¡«å……è‰²å’Œè½®å»“è‰²æ ‡åº¦">

<h2 id="æ ¹æ®æ•°å€¼è®¾å®šé˜´å½±é¢œè‰²"><a href="#æ ¹æ®æ•°å€¼è®¾å®šé˜´å½±é¢œè‰²" class="headerlink" title="æ ¹æ®æ•°å€¼è®¾å®šé˜´å½±é¢œè‰²"></a>æ ¹æ®æ•°å€¼è®¾å®šé˜´å½±é¢œè‰²</h2><p>ğŸ’¡å¢åŠ ä¸€åˆ—æ¥å¯¹yè¿›è¡Œåˆ’åˆ†,ç„¶åå°†è¯¥åˆ—æ˜ å°„åˆ°å¡«å……è‰²æ ‡åº¦ä¸Š. åœ¨æœ¬ä¾‹ä¸­,é¦–å…ˆå¯¹æ•°æ®è¿›è¡Œæ­£è´Ÿåˆ’åˆ†.</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">library(gcookbook)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">cb&lt;- subset(climate, Source=='Berkeley')<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">cb$valence[ cb$Anomaly10y &gt;= 0 ] &lt;- 'pos'
cb$valence[ cb$Anomaly10y &lt; 0 ] &lt;- 'neg'<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">head(cb,2)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 2 Ã— 7</caption>
<thead>
    <tr><th></th><th scope="col">Source</th><th scope="col">Year</th><th scope="col">Anomaly1y</th><th scope="col">Anomaly5y</th><th scope="col">Anomaly10y</th><th scope="col">Unc10y</th><th scope="col">valence</th></tr>
    <tr><th></th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;chr&gt;</th></tr>
</thead>
<tbody>
    <tr><th scope="row">1</th><td>Berkeley</td><td>1800</td><td>NA</td><td>NA</td><td>-0.435</td><td>0.505</td><td>neg</td></tr>
    <tr><th scope="row">2</th><td>Berkeley</td><td>1801</td><td>NA</td><td>NA</td><td>-0.453</td><td>0.493</td><td>neg</td></tr>
</tbody>
</table>



<p>å¯¹æ•°æ®åˆ’åˆ†æ­£è´Ÿä¹‹åï¼Œå°±å¯ä»¥å°†valenceå˜é‡æ˜ å°„åˆ°å¡«å……è‰²ä¸Šæ¥ä½œå›¾äº†</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">options(repr.plot.width=12)
ggplot(cb, aes(x=Year, y=Anomaly10y)) + 
 geom_area(aes(fill=valence)) + 
 geom_line(size=1.5) + 
 geom_hline(yintercept = 0) + 
 theme_bw(base_size = 20) + 
 theme(panel.grid = element_blank(),
       legend.position = 'top') + 
 scale_fill_manual(values = c('neg'='blue','pos'='red'))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_325_0.png" alt="png"></p>
<p>å¦‚æœä½ ä»”ç»†è§‚å¯Ÿæ­¤å›¾ï¼Œä¼šå‘ç°åœ¨0æ°´å¹³çº¿é™„è¿‘æœ‰ä¸€äº›å‡Œä¹±çš„é˜´å½±ã€‚è¿™æ˜¯å› ä¸ºä¸¤ä¸ªé¢œè‰²åŒºåŸŸéƒ½æ˜¯å„è‡ªçš„æ•°æ®ç‚¹å¤šè¾¹å½¢åŒ…å›´å½¢æˆçš„ï¼Œè€Œè¿™äº›æ•°æ®ç‚¹å¹¶ä¸éƒ½åœ¨0ä¸Šã€‚<br>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ç”¨approx()å°†æ•°æ®æ’å€¼åˆ°1000ä¸ªç‚¹å·¦å³ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R"># approx() è¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼ŒåŒ…å« x å’Œ yå‘é‡
interp &lt;- approx(cb$Year, cb$Anomaly10y, n = 1000)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R"># æ”¾åœ¨æ•°æ®æ¡†ä¸­ï¼Œå¹¶é‡æ–°è®¡ç®—valence
cbi &lt;- data.frame(Year=interp$x, Anomaly10y=interp$y) 
cbi$valence[ cbi$Anomaly10y &gt;=0 ] &lt;- 'pos'
cbi$valence[ cbi$Anomaly10y &lt;0 ] &lt;- 'neg'<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">options(repr.plot.width=12)
ggplot(cbi, aes(x=Year, y=Anomaly10y)) + 
 geom_area(aes(fill=valence), alpha=0.6) + 
 geom_line(size=1.5) + 
 geom_hline(yintercept = 0,size=1.2) + 
 theme_bw(base_size = 20) + 
 theme(panel.grid = element_blank(),
       legend.position = 'top') + 
 scale_fill_manual(values = c('neg'='#CCEEFF','pos'='#FFDDDD'))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_329_0.png" alt="png"></p>
<h1 id="ç¬¬åä¸‰ç« -å…¶ä»–å›¾å½¢"><a href="#ç¬¬åä¸‰ç« -å…¶ä»–å›¾å½¢" class="headerlink" title="ç¬¬åä¸‰ç«  å…¶ä»–å›¾å½¢"></a>ç¬¬åä¸‰ç«  å…¶ä»–å›¾å½¢</h1><h2 id="ç»˜åˆ¶ç›¸å…³çŸ©é˜µå›¾"><a href="#ç»˜åˆ¶ç›¸å…³çŸ©é˜µå›¾" class="headerlink" title="ç»˜åˆ¶ç›¸å…³çŸ©é˜µå›¾"></a>ç»˜åˆ¶ç›¸å…³çŸ©é˜µå›¾</h2><pre class="line-numbers language-R" data-language="R"><code class="language-R">head(mtcars,3)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 3 Ã— 11</caption>
<thead>
    <tr><th></th><th scope="col">mpg</th><th scope="col">cyl</th><th scope="col">disp</th><th scope="col">hp</th><th scope="col">drat</th><th scope="col">wt</th><th scope="col">qsec</th><th scope="col">vs</th><th scope="col">am</th><th scope="col">gear</th><th scope="col">carb</th></tr>
    <tr><th></th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><th scope="row">Mazda RX4</th><td>21.0</td><td>6</td><td>160</td><td>110</td><td>3.90</td><td>2.620</td><td>16.46</td><td>0</td><td>1</td><td>4</td><td>4</td></tr>
    <tr><th scope="row">Mazda RX4 Wag</th><td>21.0</td><td>6</td><td>160</td><td>110</td><td>3.90</td><td>2.875</td><td>17.02</td><td>0</td><td>1</td><td>4</td><td>4</td></tr>
    <tr><th scope="row">Datsun 710</th><td>22.8</td><td>4</td><td>108</td><td> 93</td><td>3.85</td><td>2.320</td><td>18.61</td><td>1</td><td>1</td><td>4</td><td>1</td></tr>
</tbody>
</table>



<p>é¦–å…ˆï¼Œä½¿ç”¨corå‡½æ•°è®¡ç®—ç›¸å…³çŸ©é˜µï¼Œå°†ä¼šå¾—åˆ°æ¯ä¸¤åˆ—ä¹‹é—´çš„ç›¸å…³ç³»æ•°ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">mcor &lt;- cor(mtcars)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R"># è¾“å‡º mcorï¼Œä¿ç•™ä¸¤ä½å°æ•°
round(mcor, digits = 2)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<table class="dataframe">
<caption>A matrix: 11 Ã— 11 of type dbl</caption>
<thead>
    <tr><th></th><th scope="col">mpg</th><th scope="col">cyl</th><th scope="col">disp</th><th scope="col">hp</th><th scope="col">drat</th><th scope="col">wt</th><th scope="col">qsec</th><th scope="col">vs</th><th scope="col">am</th><th scope="col">gear</th><th scope="col">carb</th></tr>
</thead>
<tbody>
    <tr><th scope="row">mpg</th><td> 1.00</td><td>-0.85</td><td>-0.85</td><td>-0.78</td><td> 0.68</td><td>-0.87</td><td> 0.42</td><td> 0.66</td><td> 0.60</td><td> 0.48</td><td>-0.55</td></tr>
    <tr><th scope="row">cyl</th><td>-0.85</td><td> 1.00</td><td> 0.90</td><td> 0.83</td><td>-0.70</td><td> 0.78</td><td>-0.59</td><td>-0.81</td><td>-0.52</td><td>-0.49</td><td> 0.53</td></tr>
    <tr><th scope="row">disp</th><td>-0.85</td><td> 0.90</td><td> 1.00</td><td> 0.79</td><td>-0.71</td><td> 0.89</td><td>-0.43</td><td>-0.71</td><td>-0.59</td><td>-0.56</td><td> 0.39</td></tr>
    <tr><th scope="row">hp</th><td>-0.78</td><td> 0.83</td><td> 0.79</td><td> 1.00</td><td>-0.45</td><td> 0.66</td><td>-0.71</td><td>-0.72</td><td>-0.24</td><td>-0.13</td><td> 0.75</td></tr>
    <tr><th scope="row">drat</th><td> 0.68</td><td>-0.70</td><td>-0.71</td><td>-0.45</td><td> 1.00</td><td>-0.71</td><td> 0.09</td><td> 0.44</td><td> 0.71</td><td> 0.70</td><td>-0.09</td></tr>
    <tr><th scope="row">wt</th><td>-0.87</td><td> 0.78</td><td> 0.89</td><td> 0.66</td><td>-0.71</td><td> 1.00</td><td>-0.17</td><td>-0.55</td><td>-0.69</td><td>-0.58</td><td> 0.43</td></tr>
    <tr><th scope="row">qsec</th><td> 0.42</td><td>-0.59</td><td>-0.43</td><td>-0.71</td><td> 0.09</td><td>-0.17</td><td> 1.00</td><td> 0.74</td><td>-0.23</td><td>-0.21</td><td>-0.66</td></tr>
    <tr><th scope="row">vs</th><td> 0.66</td><td>-0.81</td><td>-0.71</td><td>-0.72</td><td> 0.44</td><td>-0.55</td><td> 0.74</td><td> 1.00</td><td> 0.17</td><td> 0.21</td><td>-0.57</td></tr>
    <tr><th scope="row">am</th><td> 0.60</td><td>-0.52</td><td>-0.59</td><td>-0.24</td><td> 0.71</td><td>-0.69</td><td>-0.23</td><td> 0.17</td><td> 1.00</td><td> 0.79</td><td> 0.06</td></tr>
    <tr><th scope="row">gear</th><td> 0.48</td><td>-0.49</td><td>-0.56</td><td>-0.13</td><td> 0.70</td><td>-0.58</td><td>-0.21</td><td> 0.21</td><td> 0.79</td><td> 1.00</td><td> 0.27</td></tr>
    <tr><th scope="row">carb</th><td>-0.55</td><td> 0.53</td><td> 0.39</td><td> 0.75</td><td>-0.09</td><td> 0.43</td><td>-0.66</td><td>-0.57</td><td> 0.06</td><td> 0.27</td><td> 1.00</td></tr>
</tbody>
</table>



<p>å¦‚æœæ•°æ®å«æœ‰ä¸èƒ½ç”¨æ¥è®¡ç®—ç³»æ•°çš„ä»»ä½•åˆ—ï¼ˆæ¯”å¦‚ä¸€åˆ—å§“åï¼‰ï¼Œåº”è¯¥å…ˆå°†è¿™äº›åˆ—å‰”é™¤ã€‚å¦‚æœåœ¨åŸå§‹æ•°æ®ä¸­å­˜åœ¨ç¼ºå¤±å€¼ï¼ˆNAï¼‰ï¼Œå¾—åˆ°çš„ç›¸å…³çŸ©é˜µä¹Ÿä¼šæœ‰ç¼ºå¤±å€¼ã€‚ä¸ºäº†å…‹æœè¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨å‡½æ•°é€‰é¡¹use=â€complete.obsâ€æˆ–è€…use=â€pairwise.complete.obsâ€ã€‚</p>
<p>ä½¿ç”¨corrplotåŒ…æ¥ç»˜åˆ¶ç›¸å…³çŸ©é˜µå›¾ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">library(corrplot)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre><code>Warning message:
"package 'corrplot' was built under R version 4.0.5"
corrplot 0.89 loaded
</code></pre>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">corrplot(mcor)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<p><img src="output_339_0.png" alt="png"></p>
<p>ğŸ’¬<strong>è®¨è®º</strong><br><code>corrplot()</code>å‡½æ•°æœ‰ç›¸å½“å¤šçš„é€‰é¡¹ã€‚è¿™é‡Œç»™å‡ºä¸€ä¸ªç»˜åˆ¶ç›¸å…³çŸ©é˜µå›¾çš„ä¾‹å­ï¼Œä¾‹å›¾ä½¿ç”¨é¢œè‰²æ–¹å—å’Œé»‘è‰²æ–‡æœ¬æ ‡ç­¾ï¼Œå¹¶ä¸”ä¸Šè¾¹çš„æ–‡æœ¬æ ‡ç­¾å‘ˆ45Â°å³å€¾ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">corrplot(mcor, method = "shade", shade.col = NA, tl.col = "black", tl.srt = 45)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<p><img src="output_341_0.png" alt="png"></p>
<p>å°†ç›¸å…³ç³»æ•°å±•ç¤ºåœ¨çŸ©é˜µçš„æ¯ä¸€ä¸ªå°æ–¹å—ä¸Šï¼ŒåŒæ—¶è°ƒæ·¡ä¸€ç‚¹è°ƒè‰²æ¿ï¼Œä¼šä½¿ç³»æ•°æ›´åŠ å¯è¯»ï¼›åŒæ—¶ï¼Œç§»é™¤å¤šä½™çš„é¢œè‰²å›¾ä¾‹ã€‚æ­¤å¤–ï¼Œå¯¹çŸ©é˜µé‡æ–°æ’åºï¼Œä½¿å¾—ç›¸è¿‘çš„å˜é‡åœ¨å›¾ä¸­æ›´è¿‘ã€‚å…¶ä¸­ä½¿ç”¨çš„å‚æ•°æ˜¯order=â€AOEâ€ï¼ˆå‰ä¸¤ä¸ªç‰¹å¾å‘é‡çš„è§’æ’åºï¼‰ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">col &lt;- colorRampPalette(c("#BB4444", "#EE9988", "#FFFFFF", "#77AADD", "#4477AA"))

corrplot(mcor, method = "shade", shade.col = NA, tl.col = "black", tl.srt = 45,
        col=col(200), addCoef.col="black", cl.pos = "no", order="AOE")<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>


<pre><code>Error in colorlegend(colbar = colbar, labels = round(labels, 2), offset = cl.offset, : æ‰¾ä¸åˆ°å¯¹è±¡'vertical'
Traceback:


1. corrplot(mcor, method = "shade", shade.col = NA, tl.col = "black", 
 .     tl.srt = 45, col = col(200), addCoef.col = "black", cl.pos = "no", 
 .     order = "AOE")

2. colorlegend(colbar = colbar, labels = round(labels, 2), offset = cl.offset, 
 .     ratio.colbar = 0.3, cex = cl.cex, xlim = xlim, ylim = ylim, 
 .     vertical = vertical, align = cl.align.text)
</code></pre>
<p><img src="output_343_1.png" alt="png"></p>
<p>å’Œå…¶ä»–ç‹¬ç«‹çš„ç»˜å›¾å‡½æ•°ä¸€æ ·ï¼Œcorrplot()æœ‰å¾ˆå¤šè‡ªå·±çš„é€‰é¡¹ã€‚è¿™é‡Œåˆ—å‡ºä¸€äº›æœ€æœ‰ç”¨çš„é€‰é¡¹ã€‚  </p>
<p><code>type = c("full", "lower", "upper")</code>å…¨éƒ¨ï¼Œä»…ä½¿ç”¨ä¸‹ä¸‰è§’æˆ–ä¸Šä¸‰è§’<br><code>diag = TRUE</code>æ˜¯å¦æ˜¾ç¤ºå¯¹è§’çº¿ä¸Šçš„æ•°å€¼<br><code>method = "shade"</code>  ä½¿ç”¨é¢œè‰²æ–¹å—å›¾å½¢<br><code>method = "ellipse"</code>ä½¿ç”¨æ¤­åœ†å›¾å½¢<br><code>addCoef.col="color"</code>  åœ¨å›¾å½¢ä¸Šæ·»åŠ ç›¸å…³ç³»æ•°çš„é¢œè‰²<br><code>tl.srt = number</code>è®¾å®šå›¾å½¢ä¸Šæ–¹æ–‡æœ¬æ ‡ç­¾çš„å€¾æ–œè§’åº¦<br><code>tl.col = "color"</code>è®¾å®šæ–‡æœ¬æ ‡ç­¾é¢œè‰²<br><code>order = c("AOE", "FPC", "hclust")</code>çŸ©é˜µé‡æ’åºï¼Œä½¿ç”¨ç‰¹å¾å€¼è§’æ’åºã€ç¬¬ä¸€ä¸»æˆåˆ†æˆ–å±‚æ¬¡èšç±»</p>
<h2 id="ç»˜åˆ¶å‡½æ•°æ›²çº¿"><a href="#ç»˜åˆ¶å‡½æ•°æ›²çº¿" class="headerlink" title="ç»˜åˆ¶å‡½æ•°æ›²çº¿"></a>ç»˜åˆ¶å‡½æ•°æ›²çº¿</h2><p>ä½¿ç”¨<code>stat_function()</code>å‡½æ•°ã€‚ä¸ºäº†å¾—åˆ°åˆé€‚çš„xçš„èŒƒå›´ï¼Œå¿…é¡»ç»™<code>ggplot()</code>å‡½æ•°ä¼ é€’ä¸€ä¸ªâ€œå“‘â€æ•°æ®é›†ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œä½¿ç”¨æ­£æ€åˆ†å¸ƒçš„å¯†åº¦å‡½æ•°<code>dnorm()</code>æ¥æ¼”ç¤ºã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p &lt;- ggplot(data.frame(x=c(-3,3)), aes(x=x))

p + stat_function(fun = dnorm)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


<p><img src="output_347_0.png" alt="png"></p>
<p>æŸäº›å‡½æ•°éœ€è¦è®¾å®šé¢å¤–çš„å‚æ•°ï¼Œæ¯”å¦‚tåˆ†å¸ƒçš„å¯†åº¦å‡½æ•°<code>dt()</code>å°±éœ€è¦ä¸€ä¸ªå‚æ•°æ¥è®¾å®šè‡ªç”±åº¦ã€‚å¯ä»¥è¿™æ ·æ¥è®¾å®šé¢å¤–çš„å‚æ•°ï¼šæŠŠå‚æ•°æ”¾åˆ°ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œå†ä¼ ç»™ args å‚æ•°</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p + stat_function(fun = dt, args = list(df=2))<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<p><img src="output_349_0.png" alt="png"></p>
<p>ä¹Ÿå¯ä»¥ç»˜åˆ¶è‡ªå®šä¹‰çš„å‡½æ•°ã€‚å…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯xè½´çš„å€¼ï¼Œå¹¶ä¸”å¿…é¡»è¿”å›yè½´çš„å€¼ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">myfun &lt;- function(xvar) {
    1 / (1 + exp(-xvar + 10))
}

ggplot(data.frame(x=c(0,20)), aes(x=x))  + stat_function(fun=myfun)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_351_0.png" alt="png"></p>
<p>è®¡ç®—å‡½æ•°å€¼æ—¶é»˜è®¤ä½¿ç”¨ç»™å‡ºçš„xèŒƒå›´å†…çš„101ä¸ªç‚¹ã€‚æƒ³å¢åŠ ç‚¹æ•°ï¼Œä½¿å¾—æ›²çº¿æ›´å¹³æ»‘ï¼Œå¯ä»¥ç»™<code>stat_function()</code>ä¼ é€’ä¸€ä¸ªæ›´å¤§çš„nï¼Œæ¯”å¦‚<code>stat_function(fun=myfun, n=200)</code></p>
<h2 id="åœ¨å‡½æ•°æ›²çº¿ä¸‹æ·»åŠ é˜´å½±"><a href="#åœ¨å‡½æ•°æ›²çº¿ä¸‹æ·»åŠ é˜´å½±" class="headerlink" title="åœ¨å‡½æ•°æ›²çº¿ä¸‹æ·»åŠ é˜´å½±"></a>åœ¨å‡½æ•°æ›²çº¿ä¸‹æ·»åŠ é˜´å½±</h2><p>æ ¹æ®ä½ çš„æ›²çº¿å‡½æ•°å®šä¹‰ä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚</p>
<h2 id="å¦‚ä½•ç»˜åˆ¶çƒ­å›¾"><a href="#å¦‚ä½•ç»˜åˆ¶çƒ­å›¾" class="headerlink" title="å¦‚ä½•ç»˜åˆ¶çƒ­å›¾"></a>å¦‚ä½•ç»˜åˆ¶çƒ­å›¾</h2><p>ä½¿ç”¨<code>geom_title()</code>æˆ–è€…<code>geom_raster()</code>ï¼Œå¹¶å°†ä¸€ä¸ªè¿ç»­å˜é‡æ˜ å°„åˆ°fillä¸Šã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">presidents
# æ—¶é—´åºåˆ—å¯¹è±¡ è€Œä¸æ˜¯æ•°æ®æ¡†<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<table class="dataframe">
<caption>A Time Series: 30 Ã— 4</caption>
<thead>
    <tr><th></th><th scope="col">Qtr1</th><th scope="col">Qtr2</th><th scope="col">Qtr3</th><th scope="col">Qtr4</th></tr>
</thead>
<tbody>
    <tr><th scope="row">1945</th><td>NA</td><td>87</td><td>82</td><td>75</td></tr>
    <tr><th scope="row">1946</th><td>63</td><td>50</td><td>43</td><td>32</td></tr>
    <tr><th scope="row">1947</th><td>35</td><td>60</td><td>54</td><td>55</td></tr>
    <tr><th scope="row">1948</th><td>36</td><td>39</td><td>NA</td><td>NA</td></tr>
    <tr><th scope="row">1949</th><td>69</td><td>57</td><td>57</td><td>51</td></tr>
    <tr><th scope="row">1950</th><td>45</td><td>37</td><td>46</td><td>39</td></tr>
    <tr><th scope="row">1951</th><td>36</td><td>24</td><td>32</td><td>23</td></tr>
    <tr><th scope="row">1952</th><td>25</td><td>32</td><td>NA</td><td>32</td></tr>
    <tr><th scope="row">1953</th><td>59</td><td>74</td><td>75</td><td>60</td></tr>
    <tr><th scope="row">1954</th><td>71</td><td>61</td><td>71</td><td>57</td></tr>
    <tr><th scope="row">1955</th><td>71</td><td>68</td><td>79</td><td>73</td></tr>
    <tr><th scope="row">1956</th><td>76</td><td>71</td><td>67</td><td>75</td></tr>
    <tr><th scope="row">1957</th><td>79</td><td>62</td><td>63</td><td>57</td></tr>
    <tr><th scope="row">1958</th><td>60</td><td>49</td><td>48</td><td>52</td></tr>
    <tr><th scope="row">1959</th><td>57</td><td>62</td><td>61</td><td>66</td></tr>
    <tr><th scope="row">1960</th><td>71</td><td>62</td><td>61</td><td>57</td></tr>
    <tr><th scope="row">1961</th><td>72</td><td>83</td><td>71</td><td>78</td></tr>
    <tr><th scope="row">1962</th><td>79</td><td>71</td><td>62</td><td>74</td></tr>
    <tr><th scope="row">1963</th><td>76</td><td>64</td><td>62</td><td>57</td></tr>
    <tr><th scope="row">1964</th><td>80</td><td>73</td><td>69</td><td>69</td></tr>
    <tr><th scope="row">1965</th><td>71</td><td>64</td><td>69</td><td>62</td></tr>
    <tr><th scope="row">1966</th><td>63</td><td>46</td><td>56</td><td>44</td></tr>
    <tr><th scope="row">1967</th><td>44</td><td>52</td><td>38</td><td>46</td></tr>
    <tr><th scope="row">1968</th><td>36</td><td>49</td><td>35</td><td>44</td></tr>
    <tr><th scope="row">1969</th><td>59</td><td>65</td><td>65</td><td>56</td></tr>
    <tr><th scope="row">1970</th><td>66</td><td>53</td><td>61</td><td>52</td></tr>
    <tr><th scope="row">1971</th><td>51</td><td>48</td><td>54</td><td>49</td></tr>
    <tr><th scope="row">1972</th><td>49</td><td>61</td><td>NA</td><td>NA</td></tr>
    <tr><th scope="row">1973</th><td>68</td><td>44</td><td>40</td><td>27</td></tr>
    <tr><th scope="row">1974</th><td>28</td><td>25</td><td>24</td><td>24</td></tr>
</tbody>
</table>




<pre class="line-numbers language-R" data-language="R"><code class="language-R">str(presidents)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre><code> Time-Series [1:120] from 1945 to 1975: NA 87 82 75 63 50 43 32 35 60 ...
</code></pre>
<p>é¦–å…ˆå°†å®ƒè½¬åŒ–ä¸º<code>ggplot()</code>å¯ç”¨çš„æ•°æ®æ¡†æ ¼å¼ï¼Œå…¶ä¸­çš„åˆ—éƒ½æ˜¯æ•°å€¼å½¢å¼çš„ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">pres_rating &lt;- data.frame(
    rating  = as.numeric(presidents),
    year    = as.numeric(floor(time(presidents))),
    quarter = as.numeric(cycle(presidents))
)

pres_rating<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 120 Ã— 3</caption>
<thead>
    <tr><th scope="col">rating</th><th scope="col">year</th><th scope="col">quarter</th></tr>
    <tr><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>NA</td><td>1945</td><td>1</td></tr>
    <tr><td>87</td><td>1945</td><td>2</td></tr>
    <tr><td>82</td><td>1945</td><td>3</td></tr>
    <tr><td>75</td><td>1945</td><td>4</td></tr>
    <tr><td>63</td><td>1946</td><td>1</td></tr>
    <tr><td>50</td><td>1946</td><td>2</td></tr>
    <tr><td>43</td><td>1946</td><td>3</td></tr>
    <tr><td>32</td><td>1946</td><td>4</td></tr>
    <tr><td>35</td><td>1947</td><td>1</td></tr>
    <tr><td>60</td><td>1947</td><td>2</td></tr>
    <tr><td>54</td><td>1947</td><td>3</td></tr>
    <tr><td>55</td><td>1947</td><td>4</td></tr>
    <tr><td>36</td><td>1948</td><td>1</td></tr>
    <tr><td>39</td><td>1948</td><td>2</td></tr>
    <tr><td>NA</td><td>1948</td><td>3</td></tr>
    <tr><td>NA</td><td>1948</td><td>4</td></tr>
    <tr><td>69</td><td>1949</td><td>1</td></tr>
    <tr><td>57</td><td>1949</td><td>2</td></tr>
    <tr><td>57</td><td>1949</td><td>3</td></tr>
    <tr><td>51</td><td>1949</td><td>4</td></tr>
    <tr><td>45</td><td>1950</td><td>1</td></tr>
    <tr><td>37</td><td>1950</td><td>2</td></tr>
    <tr><td>46</td><td>1950</td><td>3</td></tr>
    <tr><td>39</td><td>1950</td><td>4</td></tr>
    <tr><td>36</td><td>1951</td><td>1</td></tr>
    <tr><td>24</td><td>1951</td><td>2</td></tr>
    <tr><td>32</td><td>1951</td><td>3</td></tr>
    <tr><td>23</td><td>1951</td><td>4</td></tr>
    <tr><td>25</td><td>1952</td><td>1</td></tr>
    <tr><td>32</td><td>1952</td><td>2</td></tr>
    <tr><td>...</td><td>...</td><td>...</td></tr>
    <tr><td>38</td><td>1967</td><td>3</td></tr>
    <tr><td>46</td><td>1967</td><td>4</td></tr>
    <tr><td>36</td><td>1968</td><td>1</td></tr>
    <tr><td>49</td><td>1968</td><td>2</td></tr>
    <tr><td>35</td><td>1968</td><td>3</td></tr>
    <tr><td>44</td><td>1968</td><td>4</td></tr>
    <tr><td>59</td><td>1969</td><td>1</td></tr>
    <tr><td>65</td><td>1969</td><td>2</td></tr>
    <tr><td>65</td><td>1969</td><td>3</td></tr>
    <tr><td>56</td><td>1969</td><td>4</td></tr>
    <tr><td>66</td><td>1970</td><td>1</td></tr>
    <tr><td>53</td><td>1970</td><td>2</td></tr>
    <tr><td>61</td><td>1970</td><td>3</td></tr>
    <tr><td>52</td><td>1970</td><td>4</td></tr>
    <tr><td>51</td><td>1971</td><td>1</td></tr>
    <tr><td>48</td><td>1971</td><td>2</td></tr>
    <tr><td>54</td><td>1971</td><td>3</td></tr>
    <tr><td>49</td><td>1971</td><td>4</td></tr>
    <tr><td>49</td><td>1972</td><td>1</td></tr>
    <tr><td>61</td><td>1972</td><td>2</td></tr>
    <tr><td>NA</td><td>1972</td><td>3</td></tr>
    <tr><td>NA</td><td>1972</td><td>4</td></tr>
    <tr><td>68</td><td>1973</td><td>1</td></tr>
    <tr><td>44</td><td>1973</td><td>2</td></tr>
    <tr><td>40</td><td>1973</td><td>3</td></tr>
    <tr><td>27</td><td>1973</td><td>4</td></tr>
    <tr><td>28</td><td>1974</td><td>1</td></tr>
    <tr><td>25</td><td>1974</td><td>2</td></tr>
    <tr><td>24</td><td>1974</td><td>3</td></tr>
    <tr><td>24</td><td>1974</td><td>4</td></tr>
</tbody>
</table>



<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>geom_title()</code>æˆ–<code>gem_raster()</code>æ¥ç»˜å›¾ã€‚ç®€å•åœ°å°†å‡ ä¸ªå˜é‡åˆ†åˆ«æ˜ å°„åˆ°x, y å’Œ fillï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">options(repr.plot.height=4 ,repr.plot.width=8)
# åŸºç¡€å›¾å½¢
p &lt;- ggplot(pres_rating, aes(x=year, y=quarter, fill=rating))

# ä½¿ç”¨geom_title()
p + geom_tile()

# ä½¿ç”¨ geom_raster()çœ‹èµ·æ¥ä¸€æ ·ï¼Œä½†æ•ˆç‡ç•¥ä½
p + geom_raster()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_362_0.png" alt="png"></p>
<p><img src="output_362_1.png" alt="png"></p>
<p>ä¸ºäº†æ›´æœ‰æ•ˆåœ°è¡¨è¾¾ä¿¡æ¯ï¼Œå¯èƒ½éœ€è¦è‡ªå®šä¹‰çƒ­å›¾åœ°å¤–è§‚ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œå€’è½¬yè½´ï¼Œè¿™æ ·é¡ºåºå°±æ˜¯ä»ä¸Šåˆ°ä¸‹ï¼Œå¹¶ä¸”åœ¨xè½´ä¸Šï¼Œæ¯éš”4å¹´æ·»åŠ ä¸€ä¸ªåæ ‡åˆ»åº¦æ¥è¡¨ç¤ºä¸€ä¸ªæ€»ç»Ÿä»»æœŸã€‚æ­¤å¤–ï¼Œæ›´æ¢ä¹‹å‰çš„é¢œè‰²æ ‡åº¦ï¼Œä½¿ç”¨scale_fill_graadient2()è°ƒè‰²ç›˜ï¼Œè¯¥è°ƒè‰²ç›˜å¯ä»¥è®¾ç½®ä¸€ä¸ªä¸­ç‚¹å’Œä¸¤ä¸ªç«¯ç‚¹çš„è‰²å½©å€¼ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">p + geom_tile() + 
 scale_x_continuous(breaks = seq(1940, 1976, by=4)) +
 scale_y_reverse() + 
 scale_fill_gradient2(midpoint = 50, mid = 'grey70', limits=c(0,100))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_364_0.png" alt="png"></p>
<h2 id="ç»˜åˆ¶ä¸‰ç»´æ•£ç‚¹å›¾"><a href="#ç»˜åˆ¶ä¸‰ç»´æ•£ç‚¹å›¾" class="headerlink" title="ç»˜åˆ¶ä¸‰ç»´æ•£ç‚¹å›¾"></a>ç»˜åˆ¶ä¸‰ç»´æ•£ç‚¹å›¾</h2><p>ä½¿ç”¨rglåŒ…ï¼Œè¯¥åŒ…æä¾›äº†OpenGLå›¾å½¢åº“çš„3Dç»˜å›¾æ¥å£ã€‚è¦ç”»ä¸‰ç»´æ•£ç‚¹å›¾ï¼Œå¯ä»¥ä½¿ç”¨<code>plot3d()</code>å‡½æ•°ã€‚å…¶è¾“å…¥å‚æ•°å¯ä»¥æ˜¯ä¸¤ç§å½¢å¼ï¼šï¼ˆ1ï¼‰ä¸€ä¸ªæ•°æ®æ¡†ï¼Œå‰ä¸‰åˆ—åˆ†åˆ«è¡¨ç¤ºxã€yã€zï¼›ï¼ˆ2ï¼‰ç›´æ¥ä¼ é€’ä¸‰ä¸ªå‘é‡ï¼Œåˆ†åˆ«è¡¨ç¤ºxã€yã€zçš„åæ ‡ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">library(rgl)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre><code>Warning message:
"package 'rgl' was built under R version 4.0.5"
</code></pre>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">plot3d(mtcars$wt, mtcars$disp, mtcars$mpg, type="s", size=.75, lit=FALSE)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="ç»˜åˆ¶QQå›¾"><a href="#ç»˜åˆ¶QQå›¾" class="headerlink" title="ç»˜åˆ¶QQå›¾"></a>ç»˜åˆ¶QQå›¾</h2><p>â“å¦‚ä½•ç»˜åˆ¶QQå›¾æ¥æ¯”è¾ƒç»éªŒåˆ†å¸ƒå’Œç†è®ºåˆ†å¸ƒï¼Ÿ  </p>
<p>ğŸ’¡ä½¿ç”¨<code>qqnorm()</code>å’Œæ­£æ€åˆ†å¸ƒæ¯”è¾ƒã€‚ç»™<code>qqnorm()</code>ä¸€ä¸ªæ•°å€¼å‘é‡ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šç”¨<code>qqline()</code>åŠ ä¸Šç†è®ºåˆ†å¸ƒã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R"># heightçš„QQå›¾
qqnorm(heightweight$heightIn)
qqline(heightweight$heightIn)

# ageçš„QQå›¾
qqnorm(heightweight$ageYear)
qqline(heightweight$ageYear)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_371_0.png" alt="png"></p>
<p><img src="output_371_1.png" alt="png"></p>
<p>heightIn çš„ ç‚¹å¾ˆæ¥è¿‘ç†è®ºçº¿ï¼Œè¿™æ„å‘³ç€å®ƒçš„åˆ†å¸ƒå¾ˆæ¥è¿‘æ­£æ€åˆ†å¸ƒã€‚ç›¸åï¼ŒageYearçš„ç‚¹è¿œç¦»ç†è®ºçº¿ï¼Œç‰¹åˆ«æ˜¯åœ¨å·¦é¢ï¼Œè¿™è¡¨æ˜æ˜¯æœ‰åç¦»çš„ã€‚æ­¤å¤–ï¼Œç›´æ–¹å›¾åœ¨æ¢ç´¢æ•°æ®çš„åˆ†å¸ƒä¸Šä¹Ÿæ˜¯æœ‰å¸®åŠ©çš„ã€‚</p>
<h2 id="ç»˜åˆ¶ç»éªŒç´¯ç§¯åˆ†å¸ƒå‡½æ•°"><a href="#ç»˜åˆ¶ç»éªŒç´¯ç§¯åˆ†å¸ƒå‡½æ•°" class="headerlink" title="ç»˜åˆ¶ç»éªŒç´¯ç§¯åˆ†å¸ƒå‡½æ•°"></a>ç»˜åˆ¶ç»éªŒç´¯ç§¯åˆ†å¸ƒå‡½æ•°</h2><p>â“å¦‚ä½•ç”»ä¸€ä¸ªæ•°æ®é›†çš„ç»éªŒç´¯ç§¯åˆ†å¸ƒå‡½æ•°å›¾ï¼ˆECDFï¼‰?<br>ğŸ’¡ä½¿ç”¨stat_ecdf():</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R"># heightIn çš„ ecdf
ggplot(heightweight, aes(x=heightIn)) + stat_ecdf()

# ageYearçš„ ecdf
ggplot(heightweight, aes(x=ageYear)) + stat_ecdf()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_375_0.png" alt="png"></p>
<p><img src="output_375_1.png" alt="png"></p>
<p>ecdfè¡¨æ˜äº†åœ¨è§‚æµ‹æ•°æ®ä¸­ï¼Œå°äºæˆ–ç­‰äºç»™å®šxå€¼çš„è§‚æµ‹æ‰€å çš„æ¯”ä¾‹ã€‚å› ä¸ºæ˜¯ç»éªŒçš„ï¼Œæ‰€ä»¥ç´¯ç§¯åˆ†å¸ƒçº¿åœ¨æ¯ä¸ªæœ‰è§‚æµ‹å€¼çš„xå€¼å¤„äº§ç”Ÿä¸€ä¸ªé˜¶æ¢¯ã€‚</p>
<h1 id="ç¬¬åå››ç« -è¾“å‡ºå›¾å½¢ç”¨ä»¥å±•ç¤º"><a href="#ç¬¬åå››ç« -è¾“å‡ºå›¾å½¢ç”¨ä»¥å±•ç¤º" class="headerlink" title="ç¬¬åå››ç«  è¾“å‡ºå›¾å½¢ç”¨ä»¥å±•ç¤º"></a>ç¬¬åå››ç«  è¾“å‡ºå›¾å½¢ç”¨ä»¥å±•ç¤º</h1><h2 id="è¾“å‡ºä¸ºPDFçŸ¢é‡æ–‡ä»¶"><a href="#è¾“å‡ºä¸ºPDFçŸ¢é‡æ–‡ä»¶" class="headerlink" title="è¾“å‡ºä¸ºPDFçŸ¢é‡æ–‡ä»¶"></a>è¾“å‡ºä¸ºPDFçŸ¢é‡æ–‡ä»¶</h2><p>æœ€å¸¸ç”¨çš„æ–¹æ³•æ˜¯ä½¿ç”¨ <code>pdf()</code>æ‰“å¼€PDFå›¾å½¢è®¾å¤‡ï¼Œç»˜åˆ¶å›¾å½¢ï¼Œç„¶åä½¿ç”¨<code>dev.off()</code>å…³é—­å›¾å½¢è®¾å¤‡ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R"># width å’Œ height çš„å•ä½æ˜¯ è‹±å¯¸ï¼š 1cm = 2.54è‹±å¯¸
pdf('myplot.pdf', width=4, height=4)

# ç»˜åˆ¶å›¾å½¢
plot(mtcars$wt, mtcars$mpg)
print(ggplot(mtcars, aes(x=wt, y=mpg)) + geom_point())

dev.off()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><strong>png:</strong> 2</p>
<p>å¦‚æœç»˜åˆ¶çš„å›¾å½¢å¤šäºä¸€å‰¯ï¼Œåˆ™æ¯ä¸€é¡µå°†åœ¨PDFè¾“å‡ºä¸­åˆ—äºç‹¬ç«‹çš„ä¸€é¡µã€‚<br>â—æ³¨æ„ï¼Œä½¿ç”¨<code>print()</code>ï¼Œç¡®ä¿å³ä½¿æ˜¯ä¸€æ®µè„šæœ¬ä¹Ÿèƒ½è¾“å‡ºå›¾å½¢ã€‚</p>
<p>å¦‚æœåœ¨åˆ›å»ºå›¾å½¢è¿‡ç¨‹ä¸­æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼ŒRæ— æ³•æ‰§è¡Œåˆ°<code>dev.off()</code>è¿™ä¸€æ­¥è°ƒç”¨ï¼Œå¹¶å¯èƒ½åœç•™åœ¨PDFè®¾å¤‡ä»ç„¶å¼€å¯çš„çŠ¶æ€ã€‚å½“è¿™ç§æƒ…å†µå‘ç”Ÿæ—¶ï¼Œç›´åˆ°æ‰‹åŠ¨è°ƒç”¨<code>dev.off()</code>ä¹‹å‰ï¼ŒPDFæ–‡ä»¶å°†æ— æ³•æ­£å¸¸æ‰“å¼€ã€‚</p>
<p>ç”¨ggplotåˆ›å»ºå›¾å½¢ï¼Œä½¿ç”¨ggsave()ä¼šç®€å•ä¸€ç‚¹ï¼Œä½†å®ƒåªä¼šä¿å­˜æœ€åä¸€å¹…å›¾å½¢ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">ggplot(mtcars, aes(x=wt, y=mpg)) + geom_point()

# é»˜è®¤ä¸ºè‹±å¯¸å•ä½ï¼Œä¸è¿‡ä¹Ÿå¯æŒ‡å®š
ggsave('myplot-ggsave.pdf', width = 8, height = 8, units = 'cm')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_384_0.png" alt="png"></p>
<h2 id="åœ¨PDFæ–‡ä»¶ä¸­ä½¿ç”¨å­—ä½“"><a href="#åœ¨PDFæ–‡ä»¶ä¸­ä½¿ç”¨å­—ä½“" class="headerlink" title="åœ¨PDFæ–‡ä»¶ä¸­ä½¿ç”¨å­—ä½“"></a>åœ¨PDFæ–‡ä»¶ä¸­ä½¿ç”¨å­—ä½“</h2><p>å¦‚ä½•åœ¨PDFæ–‡ä»¶ä¸­ä½¿ç”¨ç”±Ræä¾›çš„åŸºæœ¬å­—ä½“ä»¥å¤–çš„å­—ä½“ï¼Ÿ</p>
<p>ğŸ’¡ extrafontåŒ…å¯ç”¨äºåˆ›å»ºåŒ…å«å…¶ä»–å­—ä½“çš„PDFæ–‡ä»¶ã€‚<br>éœ€è¦ä¸€æ¬¡æ€§çš„è½¯ä»¶å®‰è£…å’Œé…ç½®ã€‚<br>ä¸‹è½½å¹¶å®‰è£…Ghostscriptï¼Œç„¶åå†Rä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ã€‚  </p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">install.packages('extrafont')
library(extrafont)

# æŸ¥æ‰¾å¹¶ä¿å­˜ç³»ç»Ÿä¸­å·²å®‰è£…å­—ä½“çš„ä¿¡æ¯
font_import()

# åˆ—å‡ºå­—ä½“
fonts()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h1 id="ç¬¬åäº”ç« -æ•°æ®å¡‘å½¢"><a href="#ç¬¬åäº”ç« -æ•°æ®å¡‘å½¢" class="headerlink" title="ç¬¬åäº”ç«  æ•°æ®å¡‘å½¢"></a>ç¬¬åäº”ç«  æ•°æ®å¡‘å½¢</h1><p>æƒ³æ·±å…¥å­¦ä¹ æ•°æ®å¤„ç†ï¼Œå»ºè®®å‰å¾€&lt;Ræ•°æ®ç§‘å­¦&gt;è¿›è¡Œæ·±åº¦å­¦ä¹ </p>
<p>Rä¸­æ•°æ®é›†å¸¸ä»¥æ•°æ®æ¡†çš„å½¢å¼å­˜åœ¨ã€‚å®ƒä»¬éƒ½æ˜¯å…¸å‹çš„äºŒç»´æ•°æ®ç»“æ„ï¼Œæ¯è¡Œä»£è¡¨ä¸€ä¸ªå…·ä½“å¯¹è±¡ï¼ˆcase,objectï¼‰ï¼Œæ¯è¡Œä»£è¡¨ä¸€ä¸ªæè¿°å¯¹è±¡çš„å˜é‡ã€‚<br>æ•°æ®æ¡†æœ¬è´¨ä¸Šæ˜¯ç”±å‘é‡å’Œå› å­ç»„æˆçš„åˆ—è¡¨ï¼Œå…¶ä¸­æ¯ä¸ªå‘é‡æˆ–è€…å› å­ä»£è¡¨äº†æ•°æ®çš„ä¸€åˆ—ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">library(gcookbook)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre><code>Warning message:
"package 'gcookbook' was built under R version 4.0.3"
</code></pre>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">head(heightweight,2)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 2 Ã— 5</caption>
<thead>
    <tr><th></th><th scope="col">sex</th><th scope="col">ageYear</th><th scope="col">ageMonth</th><th scope="col">heightIn</th><th scope="col">weightLb</th></tr>
    <tr><th></th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><th scope="row">1</th><td>f</td><td>11.92</td><td>143</td><td>56.3</td><td> 85</td></tr>
    <tr><th scope="row">2</th><td>f</td><td>12.92</td><td>155</td><td>62.3</td><td>105</td></tr>
</tbody>
</table>



<p>ä½¿ç”¨<code>str()</code>å‡½æ•°äº†è§£æ•°æ®ç»“æ„</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">str(heightweight)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre><code>'data.frame':    236 obs. of  5 variables:
 $ sex     : Factor w/ 2 levels "f","m": 1 1 1 1 1 1 1 1 1 1 ...
 $ ageYear : num  11.9 12.9 12.8 13.4 15.9 ...
 $ ageMonth: int  143 155 153 161 191 171 185 142 160 140 ...
 $ heightIn: num  56.3 62.3 63.3 59 62.5 62.5 59 56.5 62 53.8 ...
 $ weightLb: num  85 105 108 92 112 ...
</code></pre>
<p>æ•°æ®ç¬¬ä¸€åˆ— sex ï¼Œæ˜¯ä¸€ä¸ªä¸¤æ°´å¹³(â€œfâ€ å’Œ â€œmâ€)çš„å› å­ï¼Œå…¶ä½™å››åˆ—éƒ½æ˜¯æ•°å€¼å‹å‘é‡ï¼ˆå…¶ä¸­ageMonthæ˜¯æ•´å‹å‘é‡ï¼Œä½†åœ¨æ­¤å¤„ï¼Œå®ƒä¸å…¶ä»–æ•°å€¼å‘é‡å¹¶æ— æ˜æ˜¾åŒºåˆ«ï¼‰ã€‚</p>
<h2 id="åˆ›å»ºæ•°æ®æ¡†"><a href="#åˆ›å»ºæ•°æ®æ¡†" class="headerlink" title="åˆ›å»ºæ•°æ®æ¡†"></a>åˆ›å»ºæ•°æ®æ¡†</h2><p>å¦‚ä½•å°†è‹¥å¹²å‘é‡ç»„ç»‡æˆæ•°æ®æ¡†</p>
<p>ğŸ’¡å¯ä»¥æŠŠå‘é‡æ”¾åœ¨<code>data.frame()</code>é‡Œé¢ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R"># ä»ä¸¤ä¸ªç®€å•çš„å‘é‡å¼€å§‹
g &lt;- c('A','B','C')
x &lt;- 1:3
gf &lt;- as.factor(g)
dat &lt;- data.frame(g,x,gf)
dat<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 3 Ã— 3</caption>
<thead>
    <tr><th scope="col">g</th><th scope="col">x</th><th scope="col">gf</th></tr>
    <tr><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;fct&gt;</th></tr>
</thead>
<tbody>
    <tr><td>A</td><td>1</td><td>A</td></tr>
    <tr><td>B</td><td>2</td><td>B</td></tr>
    <tr><td>C</td><td>3</td><td>C</td></tr>
</tbody>
</table>



<p>å¦‚æœå‘é‡åœ¨ä¸€ä¸ªåˆ—è¡¨å½“ä¸­ï¼Œå¯ä»¥ç”¨<code>as.data.frame()</code>å‡½æ•°ç›´æ¥å°†å®ƒä»¬è½¬åŒ–æˆæ•°æ®æ¡†ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">lst &lt;- list(group = g, value = x, groupfactor = gf)
dat &lt;- as.data.frame(lst)
dat<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 3 Ã— 3</caption>
<thead>
    <tr><th scope="col">group</th><th scope="col">value</th><th scope="col">groupfactor</th></tr>
    <tr><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;fct&gt;</th></tr>
</thead>
<tbody>
    <tr><td>A</td><td>1</td><td>A</td></tr>
    <tr><td>B</td><td>2</td><td>B</td></tr>
    <tr><td>C</td><td>3</td><td>C</td></tr>
</tbody>
</table>



<h2 id="ä»æ•°æ®æ¡†ä¸­æå–ä¿¡æ¯"><a href="#ä»æ•°æ®æ¡†ä¸­æå–ä¿¡æ¯" class="headerlink" title="ä»æ•°æ®æ¡†ä¸­æå–ä¿¡æ¯"></a>ä»æ•°æ®æ¡†ä¸­æå–ä¿¡æ¯</h2><p><code>str()</code>å‡½æ•°åœ¨æå–æ•°æ®æ¡†æ›´å¤šä¿¡æ¯çš„æ—¶å€™å¾ˆå®ç”¨ã€‚ä¸€ä¸ªå¸¸è§é—®é¢˜æ˜¯ï¼Œæœ‰æ—¶å€™ä¸€ä¸ªæ•°æ®æ¡†åŒ…å«çš„å‘é‡æ˜¯å­—ç¬¦å‹å‘é‡è€Œä¸æ˜¯å› å­ï¼Œåä¹‹äº¦ç„¶ã€‚è¿™ä¸ªé—®é¢˜ä¼šåœ¨åˆ†æå’Œç”»å›¾çš„æ—¶å€™ç»™æˆ‘ä»¬é€ æˆä¸€äº›å›°æ‰°ã€‚</p>
<p>åœ¨Rstudioé‡Œé¢ï¼Œåœ¨æç¤ºç¬¦(&gt;)åé¢è¾“å…¥æ•°æ®æ¡†çš„åç§°ï¼Œç„¶åæ•²ä¸‹å›è½¦é”®ã€‚ä¸ä¼šæ˜¾ç¤ºæ¯åˆ—æ•°æ®çš„ç±»å‹ã€‚åªæœ‰é€šè¿‡<code>str()</code>å‡½æ•°ï¼Œæ‰èƒ½çœ‹å‡ºå®ƒä»¬çš„åŒºåˆ«ã€‚<br>åœ¨jupyterä¸­ï¼Œè¾“å‡ºæ•°æ®æ¡†ï¼Œæ¯åˆ—åç§°ä¸‹é¢ä¼šæ ‡æ³¨æ•°æ®ç±»å‹ã€‚</p>
<p><img src="attachment:da47d489-5b86-4024-8e45-f3ffba956a34.png" alt="image.png"></p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">str(dat)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre><code>'data.frame':    3 obs. of  3 variables:
 $ group      : chr  "A" "B" "C"
 $ value      : int  1 2 3
 $ groupfactor: Factor w/ 3 levels "A","B","C": 1 2 3
</code></pre>
<h2 id="å‘æ•°æ®æ¡†æ·»åŠ åˆ—"><a href="#å‘æ•°æ®æ¡†æ·»åŠ åˆ—" class="headerlink" title="å‘æ•°æ®æ¡†æ·»åŠ åˆ—"></a>å‘æ•°æ®æ¡†æ·»åŠ åˆ—</h2><p>ğŸ’¡åªéœ€æŠŠå€¼èµ‹åˆ°æ–°åˆ—å³å¯ï¼š</p>
<p>å¦‚æœæŠŠå•ä¸ªå€¼èµ‹åˆ°æ–°åˆ—ï¼Œæ•´ä¸ªåˆ—éƒ½å°†æ˜¯è¿™ä¸ªå€¼ã€‚ä¸‹é¢çš„ä¾‹å­æ˜¯å¢åŠ ä¸€ä¸ªæ–°åˆ—ï¼Œå€¼å…¨éƒ½æ˜¯NA</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">dat$newcol &lt;- NA<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="ä»æ•°æ®æ¡†ä¸­åˆ é™¤ä¸€åˆ—"><a href="#ä»æ•°æ®æ¡†ä¸­åˆ é™¤ä¸€åˆ—" class="headerlink" title="ä»æ•°æ®æ¡†ä¸­åˆ é™¤ä¸€åˆ—"></a>ä»æ•°æ®æ¡†ä¸­åˆ é™¤ä¸€åˆ—</h2><p>ğŸ’¡æŠŠè¯¥åˆ—çš„å€¼èµ‹ä¸º NULL å³å¯</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">dat$group &lt;- NULL
dat<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 3 Ã— 3</caption>
<thead>
    <tr><th scope="col">value</th><th scope="col">groupfactor</th><th scope="col">newcol</th></tr>
    <tr><th scope="col">&lt;int&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;lgl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>1</td><td>A</td><td>NA</td></tr>
    <tr><td>2</td><td>B</td><td>NA</td></tr>
    <tr><td>3</td><td>C</td><td>NA</td></tr>
</tbody>
</table>



<p>ä¹Ÿå¯ä»¥ç”¨subset()å‡½æ•°å¹¶å°†ä¸€ä¸ª**<code>-</code>**ï¼ˆå‡å·ï¼‰ç½®äºå¾…åˆ é™¤çš„åˆ—ä¹‹å‰ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R"># è¿”å›ä¸åŒ…å«barcolåˆ—çš„æ•°æ®
dat &lt;- subset(dat, select = -value)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R"># æ’é™¤å¤šåˆ—
dat &lt;- subset(dat, select = c(-groupfactor, -newcol))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h2 id="é‡å‘½åæ•°æ®æ¡†çš„åˆ—å"><a href="#é‡å‘½åæ•°æ®æ¡†çš„åˆ—å" class="headerlink" title="é‡å‘½åæ•°æ®æ¡†çš„åˆ—å"></a>é‡å‘½åæ•°æ®æ¡†çš„åˆ—å</h2><p>ğŸ’¡ä½¿ç”¨<code>names(dat) &lt;-</code> æˆ–è€… <code>colnames(dat) &lt;-</code>å‡½æ•°å³å¯ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">names(dat) &lt;- c('name1', 'name2', 'name3')<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>å¦‚æœä½ æƒ³é€šè¿‡åˆ—åï¼Œé‡å‘½åæŸä¸€åˆ—ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">library(gcookbook) 
names(anthoming)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>'angle'</li><li>'expt'</li><li>'ctrl'</li></ol>




<pre class="line-numbers language-R" data-language="R"><code class="language-R">names(anthoming)[names(anthoming)=='ctrl'] &lt;- c('Control')
names(anthoming)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>'angle'</li><li>'expt'</li><li>'Control'</li></ol>



<p>ä¹Ÿå¯ä»¥é€šè¿‡åå­—çš„æ•°å€¼ä½ç½®é‡å‘½åï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">colnames(anthoming)[1] &lt;- 'Angle'
colnames(anthoming)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>'Angle'</li><li>'expt'</li><li>'Control'</li></ol>



<h2 id="é‡æ’åºæ•°æ®æ¡†çš„åˆ—"><a href="#é‡æ’åºæ•°æ®æ¡†çš„åˆ—" class="headerlink" title="é‡æ’åºæ•°æ®æ¡†çš„åˆ—"></a>é‡æ’åºæ•°æ®æ¡†çš„åˆ—</h2><p>ğŸ’¡é€šè¿‡åˆ—çš„ <strong>æ•°å€¼ä½ç½®</strong> æˆ–è€… <strong>åç§°</strong> é‡æ’åº</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">library(gcookbook)
anthoming<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 5 Ã— 3</caption>
<thead>
    <tr><th scope="col">Angle</th><th scope="col">expt</th><th scope="col">Control</th></tr>
    <tr><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th></tr>
</thead>
<tbody>
    <tr><td>-20</td><td>1</td><td>0</td></tr>
    <tr><td>-10</td><td>7</td><td>3</td></tr>
    <tr><td>  0</td><td>2</td><td>3</td></tr>
    <tr><td> 10</td><td>0</td><td>3</td></tr>
    <tr><td> 20</td><td>0</td><td>1</td></tr>
</tbody>
</table>




<pre class="line-numbers language-R" data-language="R"><code class="language-R"># åˆ—è¡¨é£æ ¼çš„ç´¢å¼•
anthoming[c(1,3,2)]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 5 Ã— 3</caption>
<thead>
    <tr><th scope="col">Angle</th><th scope="col">Control</th><th scope="col">expt</th></tr>
    <tr><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th></tr>
</thead>
<tbody>
    <tr><td>-20</td><td>0</td><td>1</td></tr>
    <tr><td>-10</td><td>3</td><td>7</td></tr>
    <tr><td>  0</td><td>3</td><td>2</td></tr>
    <tr><td> 10</td><td>3</td><td>0</td></tr>
    <tr><td> 20</td><td>1</td><td>0</td></tr>
</tbody>
</table>




<pre class="line-numbers language-R" data-language="R"><code class="language-R"># çŸ©é˜µé£æ ¼çš„ç´¢å¼•
anthoming[,c(1,3,2)] # é€—å·ä¹‹å‰çš„ç©ºç™½è¡¨ç¤ºè¾“å‡ºæ‰€æœ‰è¡Œ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 5 Ã— 3</caption>
<thead>
    <tr><th scope="col">Angle</th><th scope="col">Control</th><th scope="col">expt</th></tr>
    <tr><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th></tr>
</thead>
<tbody>
    <tr><td>-20</td><td>0</td><td>1</td></tr>
    <tr><td>-10</td><td>3</td><td>7</td></tr>
    <tr><td>  0</td><td>3</td><td>2</td></tr>
    <tr><td> 10</td><td>3</td><td>0</td></tr>
    <tr><td> 20</td><td>1</td><td>0</td></tr>
</tbody>
</table>



<p>è¿™ç§æƒ…å†µä¸‹ï¼Œä¸¤ç§æ–¹æ³•éƒ½ä¼šå¾—åˆ°æ•°æ®æ¡†ã€‚<br>â—ç„¶è€Œï¼Œå½“ä½ å•ç‹¬æ£€ç´¢ä¸€åˆ—çš„æ—¶å€™ï¼Œåˆ—è¡¨é£æ ¼çš„ç´¢å¼•ä¼šå¾—åˆ°æ•°æ®æ¡†ï¼Œè€ŒçŸ©é˜µé£æ ¼çš„ç´¢å¼•å¾—åˆ°çš„æ˜¯å‘é‡ï¼Œé™¤éä½ åŠ ä¸Šå‚æ•°<code>drop=FALSE</code>:</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">str(anthoming[3]) # åˆ—è¡¨é£æ ¼çš„ç´¢å¼•<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre><code>'data.frame':    5 obs. of  1 variable:
 $ Control: int  0 3 3 3 1
</code></pre>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">str(anthoming[,3]) # çŸ©é˜µé£æ ¼çš„ç´¢å¼•ï¼Œ è·å¾—å‘é‡<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre><code> int [1:5] 0 3 3 3 1
</code></pre>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">str(anthoming[,3, drop = FALSE]) # çŸ©é˜µé£æ ¼çš„ç´¢å¼•ï¼Œå¹¶æ·»åŠ å‚æ•° drop=FALSE, è·å¾—æ•°æ®æ¡†<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre><code>'data.frame':    5 obs. of  1 variable:
 $ Control: int  0 3 3 3 1
</code></pre>
<h2 id="ä»æ•°æ®æ¡†æå–å­é›†"><a href="#ä»æ•°æ®æ¡†æå–å­é›†" class="headerlink" title="ä»æ•°æ®æ¡†æå–å­é›†"></a>ä»æ•°æ®æ¡†æå–å­é›†</h2><p>ä½¿ç”¨<code>subset()</code>å‡½æ•°ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">library(gcookbook)
str(climate)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<pre><code>'data.frame':    499 obs. of  6 variables:
 $ Source    : chr  "Berkeley" "Berkeley" "Berkeley" "Berkeley" ...
 $ Year      : num  1800 1801 1802 1803 1804 ...
 $ Anomaly1y : num  NA NA NA NA NA NA NA NA NA NA ...
 $ Anomaly5y : num  NA NA NA NA NA NA NA NA NA NA ...
 $ Anomaly10y: num  -0.435 -0.453 -0.46 -0.493 -0.536 -0.541 -0.59 -0.695 -0.763 -0.818 ...
 $ Unc10y    : num  0.505 0.493 0.486 0.489 0.483 0.475 0.468 0.461 0.453 0.451 ...
</code></pre>
<pre class="line-numbers language-R" data-language="R"><code class="language-R"># é€‰å– Source æ˜¯ Berkeley çš„è¡Œï¼Œå¹¶ä¸”é€‰å–åå­—ä¸º Year å’Œ Anomaly10y çš„åˆ—
climate.berkeley &lt;- subset(climate, Source=='Berkeley', select = c(Year, Anomaly10y))
head(climate.berkeley,2)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 2 Ã— 2</caption>
<thead>
    <tr><th></th><th scope="col">Year</th><th scope="col">Anomaly10y</th></tr>
    <tr><th></th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><th scope="row">1</th><td>1800</td><td>-0.435</td></tr>
    <tr><th scope="row">2</th><td>1801</td><td>-0.453</td></tr>
</tbody>
</table>



<p>è¿˜å¯ä»¥é€šè¿‡ä½¿ç”¨ <strong><code>|</code></strong> (<strong>OR</strong>) å’Œ <strong><code>&amp;</code></strong> (<strong>AND</strong>)æ“ä½œç¬¦åŒæ—¶æ–½åŠ å¤šç§ç­›é€‰æ¡ä»¶ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">climate.berkeley.hundred &lt;- subset(climate, Source=='Berkeley' &amp; Year&gt;=1900 &amp; Year&lt;=2000, select = c(Year, Anomaly10y))
head(climate.berkeley.hundred, 2)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 2 Ã— 2</caption>
<thead>
    <tr><th></th><th scope="col">Year</th><th scope="col">Anomaly10y</th></tr>
    <tr><th></th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><th scope="row">101</th><td>1900</td><td>-0.171</td></tr>
    <tr><th scope="row">102</th><td>1901</td><td>-0.162</td></tr>
</tbody>
</table>



<p>ä¹Ÿå¯ä»¥åœ¨æ–¹æ‹¬å·å†…åŠ å…¥ç´¢å¼•æ¥å¾—åˆ°å­æ•°æ®æ¡†ï¼Œè™½ç„¶è¿™ç§æ–¹æ³•ä¸æ˜¯å¾ˆä¼˜é›…ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R"># é€—å·åé¢çš„éƒ¨åˆ†æå–åˆ—
climate.indexsub&lt;- climate[ climate$Source=='Berkeley' &amp; climate$Year &gt;= 1900 &amp; climate$Year &lt;=2000, c('Year', 'Anomaly10y')]
head(climate.indexsub,2)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 2 Ã— 2</caption>
<thead>
    <tr><th></th><th scope="col">Year</th><th scope="col">Anomaly10y</th></tr>
    <tr><th></th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><th scope="row">101</th><td>1900</td><td>-0.171</td></tr>
    <tr><th scope="row">102</th><td>1901</td><td>-0.162</td></tr>
</tbody>
</table>



<p>å¦‚æœç”¨è¿™ç§æ–¹å¼å¾—åˆ°çš„ç»“æœ<u>åªæœ‰ä¸€åˆ—</u>ï¼Œé‚£ä¹ˆå®ƒä¼šè¿”å›ä¸€ä¸ªå‘é‡è€Œä¸æ˜¯æ•°æ®æ¡†ï¼Œé™¤éä½¿ç”¨å‚æ•° <code>drop=FALSE</code>:</p>
<p>æœ€åï¼Œè¿˜å¯ä»¥é€šè¿‡è¡Œå’Œåˆ—çš„æ•°å€¼ä½ç½®æå–å­æ•°æ®æ¡†ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R"># ä¸å»ºè®®ä½¿ç”¨æ•°æ®ç´¢å¼•ï¼Œå¯è¯»æ€§ä¸å¥½
climate.indexpos &lt;- subset(climate[1:100, c(2,5)])<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h2 id="æ”¹å˜å› å­æ°´å¹³çš„é¡ºåº"><a href="#æ”¹å˜å› å­æ°´å¹³çš„é¡ºåº" class="headerlink" title="æ”¹å˜å› å­æ°´å¹³çš„é¡ºåº"></a>æ”¹å˜å› å­æ°´å¹³çš„é¡ºåº</h2><p>ğŸ’¡å› å­çš„æ°´å¹³å¯ä»¥ç”±å‡½æ•°<code>factor()</code>å…·ä½“è®¾å®šã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R"># é»˜è®¤çš„å› å­æ°´å¹³çš„é¡ºåºæ˜¯æŒ‰å­—æ¯æ’åˆ—çš„
sizes &lt;- factor(c('small','large','large','small','medium'))
sizes<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>small</li><li>large</li><li>large</li><li>small</li><li>medium</li></ol>

<details>
    <summary style="display:list-item;cursor:pointer">
        <strong>Levels</strong>:
    </summary>
    <style>
    .list-inline {list-style: none; margin:0; padding: 0}
    .list-inline>li {display: inline-block}
    .list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
    </style>
    <ol class="list-inline"><li>'large'</li><li>'medium'</li><li>'small'</li></ol>
</details>



<pre class="line-numbers language-R" data-language="R"><code class="language-R"># æ”¹å˜å› å­æ°´å¹³çš„é¡ºåº
sizes &lt;- factor(sizes, levels = c('small', 'medium', 'large'))
sizes<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>small</li><li>large</li><li>large</li><li>small</li><li>medium</li></ol>

<details>
    <summary style="display:list-item;cursor:pointer">
        <strong>Levels</strong>:
    </summary>
    <style>
    .list-inline {list-style: none; margin:0; padding: 0}
    .list-inline>li {display: inline-block}
    .list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
    </style>
    <ol class="list-inline"><li>'small'</li><li>'medium'</li><li>'large'</li></ol>
</details>


<p>å› å­çš„é¡ºåºä¹Ÿå¯ä»¥åœ¨ç¬¬ä¸€æ¬¡åˆ›å»ºå› å­æ—¶é€šè¿‡levelså‚æ•°æ¥æŒ‡å®š</p>
<p>ğŸ’¬Rä¸­æœ‰ä¸¤ç§å› å­ï¼šé¡ºåºå› å­ï¼ˆorder factorï¼‰å’Œå¸¸è§„å› å­ï¼ˆregulator factorï¼‰ã€‚åœ¨ä¸¤ç§ç±»å‹ä¸­ï¼Œå› å­æ°´å¹³éƒ½æ˜¯æŒ‰ç…§æŸç§é¡ºåºæ’åˆ—çš„ï¼›åŒºåˆ«åœ¨äºï¼Œå¯¹äºé¡ºåºå› å­ï¼Œå› å­æ°´å¹³çš„é¡ºåºæ˜¯æœ‰æ„ä¹‰çš„ï¼Œè€Œå¯¹äºå¸¸è§„å› å­ï¼Œå› å­æ°´å¹³çš„é¡ºåºå´æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ã€‚</p>
<p>åœ¨ggplot2ç»˜å›¾è¿‡ç¨‹ä¸­ï¼Œå› å­å˜é‡è¢«æ˜ å°„åˆ°å›¾å½¢å±æ€§ä¸­ï¼Œå›¾å½¢å±æ€§ä¼šé‡‡ç”¨å› å­æ°´å¹³çš„é¡ºåºã€‚å¦‚ x è½´ï¼Œx è½´æ ‡ç­¾ä¼šæŒ‰å› å­æ°´å¹³çš„é¡ºåºæ’åˆ—ã€‚</p>
<p>å¦‚æœè¦é¢ å€’å› å­æ°´å¹³çš„é¡ºåºï¼Œå¯ä»¥ä½¿ç”¨å‡½æ•° rev(levels()):</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">factor(sizes, levels = rev(levels(sizes)))<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>small</li><li>large</li><li>large</li><li>small</li><li>medium</li></ol>

<details>
    <summary style="display:list-item;cursor:pointer">
        <strong>Levels</strong>:
    </summary>
    <style>
    .list-inline {list-style: none; margin:0; padding: 0}
    .list-inline>li {display: inline-block}
    .list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
    </style>
    <ol class="list-inline"><li>'large'</li><li>'medium'</li><li>'small'</li></ol>
</details>


<h2 id="æ ¹æ®æ•°æ®çš„å€¼æ”¹å˜å› å­æ°´å¹³çš„é¡ºåº"><a href="#æ ¹æ®æ•°æ®çš„å€¼æ”¹å˜å› å­æ°´å¹³çš„é¡ºåº" class="headerlink" title="æ ¹æ®æ•°æ®çš„å€¼æ”¹å˜å› å­æ°´å¹³çš„é¡ºåº"></a>æ ¹æ®æ•°æ®çš„å€¼æ”¹å˜å› å­æ°´å¹³çš„é¡ºåº</h2><p>ğŸ’¡ä½¿ç”¨å‡½æ•°<code>reorder()</code>ï¼Œè¯¥å‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°ï¼šå› å­ï¼Œæ’åºä¾æ®çš„æ•°æ®ï¼ˆä»¥å“ªä¸€åˆ—åšæ’åºä¾æ®ï¼‰, æ±‡æ€»æ•°æ®çš„å‡½æ•°ï¼ˆæ“ä½œæ•°æ®æ–¹æ³•ï¼‰ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R"># å¤åˆ¶ä¸€ä»½æ•°æ®ï¼Œå› ä¸ºæˆ‘ä»¬è¦ä¿®æ”¹å®ƒ
iss &lt;- InsectSprays
iss$spray<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>A</li><li>A</li><li>A</li><li>A</li><li>A</li><li>A</li><li>A</li><li>A</li><li>A</li><li>A</li><li>A</li><li>A</li><li>B</li><li>B</li><li>B</li><li>B</li><li>B</li><li>B</li><li>B</li><li>B</li><li>B</li><li>B</li><li>B</li><li>B</li><li>C</li><li>C</li><li>C</li><li>C</li><li>C</li><li>C</li><li>C</li><li>C</li><li>C</li><li>C</li><li>C</li><li>C</li><li>D</li><li>D</li><li>D</li><li>D</li><li>D</li><li>D</li><li>D</li><li>D</li><li>D</li><li>D</li><li>D</li><li>D</li><li>E</li><li>E</li><li>E</li><li>E</li><li>E</li><li>E</li><li>E</li><li>E</li><li>E</li><li>E</li><li>E</li><li>E</li><li>F</li><li>F</li><li>F</li><li>F</li><li>F</li><li>F</li><li>F</li><li>F</li><li>F</li><li>F</li><li>F</li><li>F</li></ol>

<details>
    <summary style="display:list-item;cursor:pointer">
        <strong>Levels</strong>:
    </summary>
    <style>
    .list-inline {list-style: none; margin:0; padding: 0}
    .list-inline>li {display: inline-block}
    .list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
    </style>
    <ol class="list-inline"><li>'A'</li><li>'B'</li><li>'C'</li><li>'D'</li><li>'E'</li><li>'F'</li></ol>
</details>



<pre class="line-numbers language-R" data-language="R"><code class="language-R">head(iss,2)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 2 Ã— 2</caption>
<thead>
    <tr><th></th><th scope="col">count</th><th scope="col">spray</th></tr>
    <tr><th></th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;fct&gt;</th></tr>
</thead>
<tbody>
    <tr><th scope="row">1</th><td>10</td><td>A</td></tr>
    <tr><th scope="row">2</th><td> 7</td><td>A</td></tr>
</tbody>
</table>




<pre class="line-numbers language-R" data-language="R"><code class="language-R">iss$spray &lt;- reorder(iss$spray, iss$count, FUN = mean)
iss$spray<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>A</li><li>A</li><li>A</li><li>A</li><li>A</li><li>A</li><li>A</li><li>A</li><li>A</li><li>A</li><li>A</li><li>A</li><li>B</li><li>B</li><li>B</li><li>B</li><li>B</li><li>B</li><li>B</li><li>B</li><li>B</li><li>B</li><li>B</li><li>B</li><li>C</li><li>C</li><li>C</li><li>C</li><li>C</li><li>C</li><li>C</li><li>C</li><li>C</li><li>C</li><li>C</li><li>C</li><li>D</li><li>D</li><li>D</li><li>D</li><li>D</li><li>D</li><li>D</li><li>D</li><li>D</li><li>D</li><li>D</li><li>D</li><li>E</li><li>E</li><li>E</li><li>E</li><li>E</li><li>E</li><li>E</li><li>E</li><li>E</li><li>E</li><li>E</li><li>E</li><li>F</li><li>F</li><li>F</li><li>F</li><li>F</li><li>F</li><li>F</li><li>F</li><li>F</li><li>F</li><li>F</li><li>F</li></ol>

<details>
    <summary style="display:list-item;cursor:pointer">
        <strong>Levels</strong>:
    </summary>
    <style>
    .list-inline {list-style: none; margin:0; padding: 0}
    .list-inline>li {display: inline-block}
    .list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
    </style>
    <ol class="list-inline"><li>'C'</li><li>'E'</li><li>'D'</li><li>'A'</li><li>'B'</li><li>'F'</li></ol>
</details>


<p>èµ·å§‹å› å­æ°´å¹³çš„é¡ºåºæ˜¯ABCDEFï¼Œé‡æ’åçš„é¡ºåºæ˜¯CEDABFã€‚æ–°çš„é¡ºåºæ˜¯ç”± iss$spray ä¸­æ¯ç»„ iss$count çš„å¹³å‡å€¼å†³å®šçš„ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">ggplot(data = iss, aes(x=spray,y=count)) + 
 geom_boxplot() + 
 theme_bw(base_size = 25)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


<p><img src="output_461_0.png" alt="png"></p>
<p>æ³¨æ„åˆ°è¿™äº›ä¸­ä½å€¼å¹¶ä¸æ˜¯ä¸¥æ ¼æŒ‰ç…§ä»å·¦åˆ°å³ä¾æ¬¡é€’å¢çš„é¡ºåºçš„ï¼Œäºæ˜¯åœ¨<code>reorder()</code>å‡½æ•°ä¸­åº”ç”¨ median() å‡½æ•°</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">iss$spray &lt;- reorder(iss$spray, iss$count, FUN = median)
iss$spray<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>A</li><li>A</li><li>A</li><li>A</li><li>A</li><li>A</li><li>A</li><li>A</li><li>A</li><li>A</li><li>A</li><li>A</li><li>B</li><li>B</li><li>B</li><li>B</li><li>B</li><li>B</li><li>B</li><li>B</li><li>B</li><li>B</li><li>B</li><li>B</li><li>C</li><li>C</li><li>C</li><li>C</li><li>C</li><li>C</li><li>C</li><li>C</li><li>C</li><li>C</li><li>C</li><li>C</li><li>D</li><li>D</li><li>D</li><li>D</li><li>D</li><li>D</li><li>D</li><li>D</li><li>D</li><li>D</li><li>D</li><li>D</li><li>E</li><li>E</li><li>E</li><li>E</li><li>E</li><li>E</li><li>E</li><li>E</li><li>E</li><li>E</li><li>E</li><li>E</li><li>F</li><li>F</li><li>F</li><li>F</li><li>F</li><li>F</li><li>F</li><li>F</li><li>F</li><li>F</li><li>F</li><li>F</li></ol>

<details>
    <summary style="display:list-item;cursor:pointer">
        <strong>Levels</strong>:
    </summary>
    <style>
    .list-inline {list-style: none; margin:0; padding: 0}
    .list-inline>li {display: inline-block}
    .list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
    </style>
    <ol class="list-inline"><li>'C'</li><li>'E'</li><li>'D'</li><li>'A'</li><li>'F'</li><li>'B'</li></ol>
</details>



<pre class="line-numbers language-R" data-language="R"><code class="language-R"># ä»¥ count çš„ median è¿›è¡Œæ’åº
ggplot(data = iss, aes(x=spray,y=count)) + 
 geom_boxplot() + 
 theme_bw(base_size = 25)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_464_0.png" alt="png"></p>
<h2 id="æ”¹å˜å› å­æ°´å¹³çš„åç§°"><a href="#æ”¹å˜å› å­æ°´å¹³çš„åç§°" class="headerlink" title="æ”¹å˜å› å­æ°´å¹³çš„åç§°"></a>æ”¹å˜å› å­æ°´å¹³çš„åç§°</h2><p>ä½¿ç”¨ plyråŒ…ä¸­çš„<code>revalue()</code>å‡½æ•°æˆ–<code>mapvalues()</code>å‡½æ•°ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">levels(sizes)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>'small'</li><li>'medium'</li><li>'large'</li></ol>




<pre class="line-numbers language-R" data-language="R"><code class="language-R">library(plyr)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">sizes1 &lt;- revalue(sizes, c(small="S", medium="M", large="L"))
sizes1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>S</li><li>L</li><li>L</li><li>S</li><li>M</li></ol>

<details>
    <summary style="display:list-item;cursor:pointer">
        <strong>Levels</strong>:
    </summary>
    <style>
    .list-inline {list-style: none; margin:0; padding: 0}
    .list-inline>li {display: inline-block}
    .list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
    </style>
    <ol class="list-inline"><li>'S'</li><li>'M'</li><li>'L'</li></ol>
</details>



<pre class="line-numbers language-R" data-language="R"><code class="language-R"># ä¹Ÿå¯ä»¥ä½¿ç”¨å¼•å·â€”â€”å¦‚æœåŸå› å­æ°´å¹³åç§°ä¸­å­˜åœ¨ç©ºæ ¼ç­‰ç‰¹æ®Šå­—ç¬¦ï¼Œè¿™å°†å¾ˆæœ‰ç”¨
revalue(sizes, c("small"="S", "medium"='M', "large"="L"))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>S</li><li>L</li><li>L</li><li>S</li><li>M</li></ol>

<details>
    <summary style="display:list-item;cursor:pointer">
        <strong>Levels</strong>:
    </summary>
    <style>
    .list-inline {list-style: none; margin:0; padding: 0}
    .list-inline>li {display: inline-block}
    .list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
    </style>
    <ol class="list-inline"><li>'S'</li><li>'M'</li><li>'L'</li></ol>
</details>



<pre class="line-numbers language-R" data-language="R"><code class="language-R"># mapvalues()å‡½æ•°ä½¿ç”¨ä¸¤ç»„å‘é‡ï¼Œè€Œä¸æ˜¯ä¸€ç»„æ˜ å°„å…³ç³»å‘é‡
mapvalues(sizes, c("small", "medium", "large"), c("S","M","L"))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>S</li><li>L</li><li>L</li><li>S</li><li>M</li></ol>

<details>
    <summary style="display:list-item;cursor:pointer">
        <strong>Levels</strong>:
    </summary>
    <style>
    .list-inline {list-style: none; margin:0; padding: 0}
    .list-inline>li {display: inline-block}
    .list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
    </style>
    <ol class="list-inline"><li>'S'</li><li>'M'</li><li>'L'</li></ol>
</details>


<p>revalue()å‡½æ•°å’Œmapvalues()å‡½æ•°å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯åœ¨Rä¸­æœ‰ä¸€ä¸ªæ›´ä¼ ç»Ÿï¼ˆä¹Ÿæ›´ç¬¨ï¼‰çš„æ–¹æ³•ï¼Œä½¿ç”¨<code>levels() &lt;- </code>å‡½æ•°</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">sizes &lt;- factor(c('small','large','large','small','medium'))<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">levels(sizes)[levels(sizes)=='large'] &lt;- 'L'
levels(sizes)[levels(sizes)=='medium'] &lt;- 'M'
levels(sizes)[levels(sizes)=='small'] &lt;- 'S'
sizes<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>


<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>S</li><li>L</li><li>L</li><li>S</li><li>M</li></ol>

<details>
    <summary style="display:list-item;cursor:pointer">
        <strong>Levels</strong>:
    </summary>
    <style>
    .list-inline {list-style: none; margin:0; padding: 0}
    .list-inline>li {display: inline-block}
    .list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
    </style>
    <ol class="list-inline"><li>'L'</li><li>'M'</li><li>'S'</li></ol>
</details>


<p>å¦‚æœä½ è¦æ”¹å˜æ‰€æœ‰æ°´å¹³çš„åç§°ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªæ›´ç®€å•çš„æ–¹æ³•ã€‚å¯ä»¥ç»™ levels() ä¼ é€’ä¸€ä¸ª list ç±»å‹çš„å‚æ•°:</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">sizes &lt;- factor(c('small','large','large','small','medium'))
levels(sizes) &lt;- list(S='small', M='medium', L='large')
sizes<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>S</li><li>L</li><li>L</li><li>S</li><li>M</li></ol>

<details>
    <summary style="display:list-item;cursor:pointer">
        <strong>Levels</strong>:
    </summary>
    <style>
    .list-inline {list-style: none; margin:0; padding: 0}
    .list-inline>li {display: inline-block}
    .list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
    </style>
    <ol class="list-inline"><li>'S'</li><li>'M'</li><li>'L'</li></ol>
</details>


<p>åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œæ‰€æœ‰å› å­å¿…é¡»åœ¨ä¸€ä¸ª<code>list</code>é‡Œé¢æŒ‡å®šï¼›å¦‚æœ<code>list</code>é‡Œé¢æœ‰ä»»ä½•çš„ç¼ºå¤±ï¼Œç¼ºå¤±çš„å€¼æœ€ç»ˆä¼šä»¥<code>NA</code>ä»£æ›¿</p>
<h2 id="å»æ‰å› å­ä¸­ä¸å†ä½¿ç”¨çš„æ°´å¹³"><a href="#å»æ‰å› å­ä¸­ä¸å†ä½¿ç”¨çš„æ°´å¹³" class="headerlink" title="å»æ‰å› å­ä¸­ä¸å†ä½¿ç”¨çš„æ°´å¹³"></a>å»æ‰å› å­ä¸­ä¸å†ä½¿ç”¨çš„æ°´å¹³</h2><p>ä½¿ç”¨ <code>droplevels()</code> å‡½æ•°</p>
<h2 id="æŠŠä¸€ä¸ªåˆ†ç±»å˜é‡è½¬åŒ–ä¸ºå¦ä¸€ä¸ªåˆ†ç±»å˜é‡"><a href="#æŠŠä¸€ä¸ªåˆ†ç±»å˜é‡è½¬åŒ–ä¸ºå¦ä¸€ä¸ªåˆ†ç±»å˜é‡" class="headerlink" title="æŠŠä¸€ä¸ªåˆ†ç±»å˜é‡è½¬åŒ–ä¸ºå¦ä¸€ä¸ªåˆ†ç±»å˜é‡"></a>æŠŠä¸€ä¸ªåˆ†ç±»å˜é‡è½¬åŒ–ä¸ºå¦ä¸€ä¸ªåˆ†ç±»å˜é‡</h2><p>ä½¿ç”¨PlantGrowthæ•°æ®é›†çš„ä¸€ä¸ªå­æ•°æ®é›†</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">pg &lt;- PlantGrowth[c(1,2,11,21,22),]
pg<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 5 Ã— 2</caption>
<thead>
    <tr><th></th><th scope="col">weight</th><th scope="col">group</th></tr>
    <tr><th></th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;fct&gt;</th></tr>
</thead>
<tbody>
    <tr><th scope="row">1</th><td>4.17</td><td>ctrl</td></tr>
    <tr><th scope="row">2</th><td>5.58</td><td>ctrl</td></tr>
    <tr><th scope="row">11</th><td>4.81</td><td>trt1</td></tr>
    <tr><th scope="row">21</th><td>6.31</td><td>trt2</td></tr>
    <tr><th scope="row">22</th><td>5.12</td><td>trt2</td></tr>
</tbody>
</table>



<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½¿ç”¨<code>cut()</code>å‡½æ•°æŠŠä¸€ä¸ªè¿ç»­å˜é‡weightè½¬åŒ–ä¸ºåˆ†ç±»å˜é‡wtclass</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">pg$wtclass &lt;- cut(pg$weight, breaks = c(0,2,6,Inf))<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">pg<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 5 Ã— 3</caption>
<thead>
    <tr><th></th><th scope="col">weight</th><th scope="col">group</th><th scope="col">wtclass</th></tr>
    <tr><th></th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th></tr>
</thead>
<tbody>
    <tr><th scope="row">1</th><td>4.17</td><td>ctrl</td><td>(2,6]  </td></tr>
    <tr><th scope="row">2</th><td>5.58</td><td>ctrl</td><td>(2,6]  </td></tr>
    <tr><th scope="row">11</th><td>4.81</td><td>trt1</td><td>(2,6]  </td></tr>
    <tr><th scope="row">21</th><td>6.31</td><td>trt2</td><td>(6,Inf]</td></tr>
    <tr><th scope="row">22</th><td>5.12</td><td>trt2</td><td>(2,6]  </td></tr>
</tbody>
</table>



<p>ğŸ’¬æˆ‘ä»¬ä¸ºä¸‰ä¸ªç±»è®¾å®šäº†å››ä¸ªè¾¹ç•Œï¼Œè¾¹ç•Œå€¼å¯ä»¥åŒ…æ‹¬æ— ç©·<code>Inf</code>.å¦‚æœä¸€ä¸ªå€¼è½åœ¨äº†è§„å®šåŒºé—´å¤–ï¼Œå®ƒçš„ç±»åˆ«å°†è¢«å®šä¸ºNAï¼ˆç¼ºå¤±å€¼ï¼‰ã€‚<code>cut()</code>å‡½æ•°çš„è¾“å‡ºç»“æœæ˜¯ä¸€ä¸ªå› å­ï¼Œå¯ä»¥ä»ä¸‹é¢è¿™ä¸ªä¾‹å­çœ‹å‡ºï¼šå› å­æ°´å¹³çš„åç§°æ˜¯ä»¥ç”Ÿæˆçš„åŒºé—´å‘½åçš„ã€‚</p>
<p>ä¸ºäº†æ”¹å˜å› å­æ°´å¹³çš„åç§°ï¼Œå¯ä»¥ä½¿ç”¨cut()ä¸­çš„labelså‚æ•°</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">pg$wtclass &lt;- cut(pg$weight, breaks = c(0,5,6,Inf), labels = c('small', 'medium', 'large'))
pg<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 5 Ã— 3</caption>
<thead>
    <tr><th></th><th scope="col">weight</th><th scope="col">group</th><th scope="col">wtclass</th></tr>
    <tr><th></th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th></tr>
</thead>
<tbody>
    <tr><th scope="row">1</th><td>4.17</td><td>ctrl</td><td>small </td></tr>
    <tr><th scope="row">2</th><td>5.58</td><td>ctrl</td><td>medium</td></tr>
    <tr><th scope="row">11</th><td>4.81</td><td>trt1</td><td>small </td></tr>
    <tr><th scope="row">21</th><td>6.31</td><td>trt2</td><td>large </td></tr>
    <tr><th scope="row">22</th><td>5.12</td><td>trt2</td><td>medium</td></tr>
</tbody>
</table>



<p>cutç”Ÿæˆçš„åŒºé—´æ˜¯å·¦å¼€å³é—­çš„ã€‚å¯ä»¥é€šè¿‡è®¾ç½® <code>include.lowest=TRUE</code>ä½¿å¾—å®ƒåŒæ—¶åŒ…å«æœ€å°å€¼å’Œæœ€å¤§å€¼ã€‚å¦‚æœæƒ³è®©åŒºé—´æ˜¯å·¦é—­å³å¼€çš„ï¼Œè®¾å®šå‚æ•°<code>right=FALSE</code>:</p>
<h2 id="å˜é‡è½¬æ¢"><a href="#å˜é‡è½¬æ¢" class="headerlink" title="å˜é‡è½¬æ¢"></a>å˜é‡è½¬æ¢</h2><p>å¯ä»¥ä½¿ç”¨<code>$</code>æ“ä½œç¬¦æ¥å¼•ç”¨æ–°åˆ—å¹¶å¯¹é½èµ‹äºˆæ–°å€¼ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">library(gcookbook)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">hw &lt;- heightweight
head(hw,2)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 2 Ã— 5</caption>
<thead>
    <tr><th></th><th scope="col">sex</th><th scope="col">ageYear</th><th scope="col">ageMonth</th><th scope="col">heightIn</th><th scope="col">weightLb</th></tr>
    <tr><th></th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><th scope="row">1</th><td>f</td><td>11.92</td><td>143</td><td>56.3</td><td> 85</td></tr>
    <tr><th scope="row">2</th><td>f</td><td>12.92</td><td>155</td><td>62.3</td><td>105</td></tr>
</tbody>
</table>




<pre class="line-numbers language-R" data-language="R"><code class="language-R">hw$heighCm &lt;- hw$heightIn * 22.54<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>ğŸ’¬ä¸ºäº†ä½¿ä»£ç æ›´å®¹æ˜“é˜…è¯»ï¼Œå¯ä»¥ä½¿ç”¨<code>transform()</code>æˆ–plyråŒ…ä¸­çš„<code>mutate()</code>å‡½æ•°ã€‚<br>åªéœ€æŒ‡å®šæ•°æ®æ¡†ä¸€æ¬¡ï¼Œå°†å…¶ä½œä¸ºå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼›å®ƒä»¬æä¾›äº†éå¸¸æ¸…æ™°çš„è¯­æ³•ï¼Œå°¤å…¶é€‚åˆè½¬æ¢å¤šä¸ªå˜é‡ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">hw &lt;- transform(hw, heightCm = heightIn * 2.54, weightKg = weightLb / 2.204)
head(hw,1)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 1 Ã— 8</caption>
<thead>
    <tr><th></th><th scope="col">sex</th><th scope="col">ageYear</th><th scope="col">ageMonth</th><th scope="col">heightIn</th><th scope="col">weightLb</th><th scope="col">heighCm</th><th scope="col">heightCm</th><th scope="col">weightKg</th></tr>
    <tr><th></th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><th scope="row">1</th><td>f</td><td>11.92</td><td>143</td><td>56.3</td><td>85</td><td>1269.002</td><td>143.002</td><td>38.56624</td></tr>
</tbody>
</table>




<pre class="line-numbers language-R" data-language="R"><code class="language-R">library(dplyr)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre><code>Warning message:
"package 'dplyr' was built under R version 4.0.5"

Attaching package: 'dplyr'


The following objects are masked from 'package:plyr':

    arrange, count, desc, failwith, id, mutate, rename, summarise,
    summarize


The following objects are masked from 'package:stats':

    filter, lag


The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union
</code></pre>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">hw &lt;- mutate(hw, heightCm = heightIn * 2.54, weightKg = weightLb / 2.204)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>ä¹Ÿå¯ä»¥æ ¹æ®å¤šä¸ªå˜é‡äº§ç”Ÿä¸€ä¸ªæ–°çš„å˜é‡ï¼š</p>
<p>transform() å’Œ mutate() å‡½æ•°çš„æœ€å¤§åŒºåˆ«æ˜¯ transform() ä¼šåŒæ—¶è®¡ç®—æ‰€æœ‰çš„æ–°åˆ—ï¼Œè€Œ mutate() å°†ä¾æ¬¡è®¡ç®—æ–°åˆ—ï¼Œè¿™æ ·åœ¨è®¡ç®—æ–°åˆ—æ—¶ï¼Œå°±å¯ä»¥ä¾èµ–ä¹‹å‰çš„æ–°åˆ—ã€‚ç”±äºbmiæ˜¯ç”± heightCm å’Œ weightKg è®¡ç®—æ¥çš„ï¼Œå› æ­¤ç”¨ transform() ä¸èƒ½åŒæ—¶è®¡ç®—è¿™äº›å˜é‡ï¼›å…ˆç®—å¾—åˆ° heightCm å’Œ weightKg ï¼Œå†è®¡ç®— bmiã€‚è€Œ mutate å¯ä»¥ä¸€æ¬¡å®Œæˆè®¡ç®—ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">hw &lt;- mutate(hw,
       heightCm = heightIn * 2.54,
       weightKg = weightLb / 2.204,
       bmi = weightKg / (heightCm / 100)^2
)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">head(hw,2)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 2 Ã— 9</caption>
<thead>
    <tr><th></th><th scope="col">sex</th><th scope="col">ageYear</th><th scope="col">ageMonth</th><th scope="col">heightIn</th><th scope="col">weightLb</th><th scope="col">heighCm</th><th scope="col">heightCm</th><th scope="col">weightKg</th><th scope="col">bmi</th></tr>
    <tr><th></th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><th scope="row">1</th><td>f</td><td>11.92</td><td>143</td><td>56.3</td><td> 85</td><td>1269.002</td><td>143.002</td><td>38.56624</td><td>18.85919</td></tr>
    <tr><th scope="row">2</th><td>f</td><td>12.92</td><td>155</td><td>62.3</td><td>105</td><td>1404.242</td><td>158.242</td><td>47.64065</td><td>19.02542</td></tr>
</tbody>
</table>



<h2 id="æŒ‰ç»„è½¬æ¢æ•°æ®"><a href="#æŒ‰ç»„è½¬æ¢æ•°æ®" class="headerlink" title="æŒ‰ç»„è½¬æ¢æ•°æ®"></a>æŒ‰ç»„è½¬æ¢æ•°æ®</h2><p>ğŸ’¡ä½¿ç”¨ plyr åŒ…ä¸­çš„ ddply() å‡½æ•°ï¼Œåœ¨å‚æ•°ä¸­è°ƒç”¨ transform()ï¼Œå¹¶æŒ‡å®šè¿ç®—ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">library(MASS)
library(dplyr)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<pre><code>Warning message:
"package 'MASS' was built under R version 4.0.5"

Attaching package: 'MASS'


The following object is masked from 'package:dplyr':

    select
</code></pre>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">head(cabbages,2)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 2 Ã— 4</caption>
<thead>
    <tr><th></th><th scope="col">Cult</th><th scope="col">Date</th><th scope="col">HeadWt</th><th scope="col">VitC</th></tr>
    <tr><th></th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th></tr>
</thead>
<tbody>
    <tr><th scope="row">1</th><td>c39</td><td>d16</td><td>2.5</td><td>51</td></tr>
    <tr><th scope="row">2</th><td>c39</td><td>d16</td><td>2.2</td><td>55</td></tr>
</tbody>
</table>




<pre class="line-numbers language-R" data-language="R"><code class="language-R">cb &lt;- ddply(cabbages, "Cult", transform, DevWt = HeadWt - mean(HeadWt))<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">head(cb,2)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 2 Ã— 5</caption>
<thead>
    <tr><th></th><th scope="col">Cult</th><th scope="col">Date</th><th scope="col">HeadWt</th><th scope="col">VitC</th><th scope="col">DevWt</th></tr>
    <tr><th></th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><th scope="row">1</th><td>c39</td><td>d16</td><td>2.5</td><td>51</td><td>-0.4066667</td></tr>
    <tr><th scope="row">2</th><td>c39</td><td>d16</td><td>2.2</td><td>55</td><td>-0.7066667</td></tr>
</tbody>
</table>



<p>ä¸Šé¢çš„ä»£ç é¦–å…ˆä¼šå°†cabbagesæ•°æ®æ ¹æ®Cultåˆ†å‰²æˆå‡ ä¸ªç‹¬ç«‹çš„æ•°æ®æ¡†ã€‚ Cult ä¸Šæœ‰ä¸¤ä¸ªæ°´å¹³ï¼Œc39 å’Œ c52, å› æ­¤ä¹Ÿå°±æ˜¯åˆ†å‰²æˆä¸¤ä¸ªã€‚ç„¶ååœ¨è¿™ä¸¤ä¸ªæ•°æ®æ¡†ä¸Šä½¿ç”¨ <code>transform()</code> å‡½æ•°ï¼Œå…¶ä»–å‚æ•°ä¿æŒä¸å˜ã€‚</p>
<p>ä¹Ÿå¯ä»¥æ ¹æ®å¤šä¸ªå˜é‡åˆ†ç»„ã€åˆ‡å‰²æ•°æ®æ¡†ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥åœ¨å¤šä¸ªå˜é‡ä¸Šè¿›è¡Œè¿ç®—ã€‚æœ¬ä¾‹ä¸­å°†ä¼šæ ¹æ® Cult å’Œ Date åˆ‡å‰²æ•°æ®ï¼Œå½¢æˆä¸¤è€…ç»„åˆå¾—åˆ°çš„åˆ†ç»„ï¼Œç„¶åè®¡ç®— HeadWt å’Œ VitC åœ¨å„ä¸ªç»„çš„åå·®ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">cb &lt;- ddply(cabbages, c('Cult','Date'), transform,
     DevWt = HeadWt - mean(HeadWt), DevVitC = VitC - mean(VitC))
head(cb,2)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 2 Ã— 6</caption>
<thead>
    <tr><th></th><th scope="col">Cult</th><th scope="col">Date</th><th scope="col">HeadWt</th><th scope="col">VitC</th><th scope="col">DevWt</th><th scope="col">DevVitC</th></tr>
    <tr><th></th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><th scope="row">1</th><td>c39</td><td>d16</td><td>2.5</td><td>51</td><td>-0.68</td><td>0.7</td></tr>
    <tr><th scope="row">2</th><td>c39</td><td>d16</td><td>2.2</td><td>55</td><td>-0.98</td><td>4.7</td></tr>
</tbody>
</table>



<h2 id="åˆ†ç»„æ±‡æ€»æ•°æ®"><a href="#åˆ†ç»„æ±‡æ€»æ•°æ®" class="headerlink" title="åˆ†ç»„æ±‡æ€»æ•°æ®"></a>åˆ†ç»„æ±‡æ€»æ•°æ®</h2><p>é…åˆ summarise() å‡½æ•°ä½¿ç”¨ plyr åŒ…ä¸­çš„ <code>ddply()</code> å‡½æ•°ï¼Œå¹¶æŒ‡å®šæ“ä½œä¸º summarise</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">library(MASS)
library(plyr)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">ddply(cabbages, c("Cult", "Date"), summarise, Weight = mean(HeadWt),
     VitC = mean(VitC))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 6 Ã— 4</caption>
<thead>
    <tr><th scope="col">Cult</th><th scope="col">Date</th><th scope="col">Weight</th><th scope="col">VitC</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>c39</td><td>d16</td><td>3.18</td><td>50.3</td></tr>
    <tr><td>c39</td><td>d20</td><td>2.80</td><td>49.4</td></tr>
    <tr><td>c39</td><td>d21</td><td>2.74</td><td>54.8</td></tr>
    <tr><td>c52</td><td>d16</td><td>2.26</td><td>62.5</td></tr>
    <tr><td>c52</td><td>d20</td><td>3.11</td><td>58.9</td></tr>
    <tr><td>c52</td><td>d21</td><td>1.47</td><td>71.8</td></tr>
</tbody>
</table>




<pre class="line-numbers language-R" data-language="R"><code class="language-R">summarise(cabbages, Weight = mean(HeadWt))<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 1 Ã— 1</caption>
<thead>
    <tr><th scope="col">Weight</th></tr>
    <tr><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>2.593333</td></tr>
</tbody>
</table>



<p><code>summarise()</code>è®¡ç®—å‡å€¼ä¼šæ›´åˆé€‚ï¼Œå¾—åˆ°ä¸€è¡Œä¸€åˆ—çš„æ•°æ®æ¡†ï¼Œåä¸º Weightã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">ddply(cabbages, 'Cult', summarise, Weight = mean(HeadWt))<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 2 Ã— 2</caption>
<thead>
    <tr><th scope="col">Cult</th><th scope="col">Weight</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>c39</td><td>2.906667</td></tr>
    <tr><td>c52</td><td>2.280000</td></tr>
</tbody>
</table>



<p>ä¸Šé¢çš„ä»£ç é¦–å…ˆæ ¹æ® Cult çš„å€¼å°†æ•°æ®æ¡† cabbages åˆ‡å‰²æˆäº†å‡ ä¸ªå°æ•°æ®æ¡†ã€‚å› å­ Cult æœ‰ä¸¤ä¸ªæ°´å¹³ï¼Œc39å’Œc52ï¼Œå› æ­¤ä¹Ÿå°±æœ‰ä¸¤ä¸ªæ•°æ®æ¡†ï¼Œç„¶ååœ¨æ¯ä¸ªæ•°æ®æ¡†ä¸Šå¥—ç”¨ <code>summarise()</code>ï¼Œåˆ©ç”¨ <code>mean()</code> å‡½æ•°è®¡ç®—æ¯ä¸ªæ•°æ®æ¡†ä¸­ HeadWt çš„å‡å€¼å¹¶èµ‹ç»™æ–°çš„åˆ— Weightã€‚ç»“æœå°±å¾—åˆ°äº†ä¸¤ä¸ªä¸€è¡Œçš„æ•°æ®æ¡†ï¼Œç„¶å ddply() å°†å®ƒä»¬åˆå¹¶ä¸ºä¸€ä¸ªã€‚</p>
<p>é™¤äº†æ±‚å‡å€¼ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åšå¾ˆå¤šå…¶ä»–çš„äº‹ã€‚æ¯”æ–¹è¯´ï¼Œä½ å¯èƒ½æƒ³è®¡ç®—æ¯ä¸ªç»„çš„æ ‡å‡†å·®å’Œé¢‘æ•°ï¼›ä½¿ç”¨ sd() æ¥è®¡ç®—æ ‡å‡†å·®ï¼Œ length() æ¥è®¡ç®—é¢‘æ•°</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">colnames(cabbages)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>'Cult'</li><li>'Date'</li><li>'HeadWt'</li><li>'VitC'</li></ol>




<pre class="line-numbers language-R" data-language="R"><code class="language-R">ddply(cabbages, c('Cult','Date'), summarise, Weight = mean(HeadWt),sd = sd(HeadWt), n = length(HeadWt))<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 6 Ã— 5</caption>
<thead>
    <tr><th scope="col">Cult</th><th scope="col">Date</th><th scope="col">Weight</th><th scope="col">sd</th><th scope="col">n</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th></tr>
</thead>
<tbody>
    <tr><td>c39</td><td>d16</td><td>3.18</td><td>0.9566144</td><td>10</td></tr>
    <tr><td>c39</td><td>d20</td><td>2.80</td><td>0.2788867</td><td>10</td></tr>
    <tr><td>c39</td><td>d21</td><td>2.74</td><td>0.9834181</td><td>10</td></tr>
    <tr><td>c52</td><td>d16</td><td>2.26</td><td>0.4452215</td><td>10</td></tr>
    <tr><td>c52</td><td>d20</td><td>3.11</td><td>0.7908505</td><td>10</td></tr>
    <tr><td>c52</td><td>d21</td><td>1.47</td><td>0.2110819</td><td>10</td></tr>
</tbody>
</table>



<p>è¿˜æœ‰ä¸€äº›æœ‰ç”¨çš„å‡½æ•°ä¹Ÿèƒ½å¤Ÿå¾—åˆ°æ±‡æ€»ç»Ÿè®¡é‡ï¼ŒåŒ…æ‹¬ min(), max(), median() ç­‰</p>
<h3 id="å¤„ç†ç¼ºå¤±å€¼"><a href="#å¤„ç†ç¼ºå¤±å€¼" class="headerlink" title="å¤„ç†ç¼ºå¤±å€¼"></a>å¤„ç†ç¼ºå¤±å€¼</h3><p>é¦–å…ˆè¯•ä¸€ä¸‹ä¼šå‘ç”Ÿä»€ä¹ˆ</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">c1 &lt;- cabbages
c1$HeadWt[c(1,20,45)] &lt;- NA<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">ddply(c1, c('Cult','Date'), summarise,
     Weight = mean(HeadWt),
     sd = sd(HeadWt),
     n = length(HeadWt))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 6 Ã— 5</caption>
<thead>
    <tr><th scope="col">Cult</th><th scope="col">Date</th><th scope="col">Weight</th><th scope="col">sd</th><th scope="col">n</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th></tr>
</thead>
<tbody>
    <tr><td>c39</td><td>d16</td><td>  NA</td><td>       NA</td><td>10</td></tr>
    <tr><td>c39</td><td>d20</td><td>  NA</td><td>       NA</td><td>10</td></tr>
    <tr><td>c39</td><td>d21</td><td>2.74</td><td>0.9834181</td><td>10</td></tr>
    <tr><td>c52</td><td>d16</td><td>2.26</td><td>0.4452215</td><td>10</td></tr>
    <tr><td>c52</td><td>d20</td><td>  NA</td><td>       NA</td><td>10</td></tr>
    <tr><td>c52</td><td>d21</td><td>1.47</td><td>0.2110819</td><td>10</td></tr>
</tbody>
</table>



<p>ä¸¤ä¸ªé—®é¢˜ã€‚<br>ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœä»»ä¸€è¾“å…¥å€¼åŒ…å«NAï¼Œmean() å’Œ sd()å‡½æ•°éƒ½ä¼šè¿”å›NAã€‚å¹¸è¿çš„æ˜¯ï¼Œè¿™äº›å‡½æ•°éƒ½æœ‰ä¸€ä¸ªå‚æ•°æ¥å¤„ç†è¿™ä¸ªé—®é¢˜ï¼šè®¾ç½® na.rm=TRUEå³å¯å¿½ç•¥ç¼ºå¤±å€¼ã€‚</p>
<p>ç¬¬äºŒä¸ªé—®é¢˜ï¼š<code>length()</code>æ²¡æœ‰å¯¹ç¼ºå¤±å€¼è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œè€Œæ˜¯å°†å®ƒä»¬è§†ä¸ºæ­£å¸¸å€¼ï¼Œä½†è¿™æ˜¯ä¸å¯¹çš„ã€‚å¯ä»¥ä½¿ç”¨<code>sum(!is.na(...))</code>è¾¾åˆ°ç›¸åŒçš„æ•ˆæœã€‚ <code>is.na()</code> è¿”å›ä¸€ä¸ªé€»è¾‘å‘é‡ï¼šNAè¿”å›TRUEï¼ŒéNAè¿”å›TRUEã€‚ç”¨ ! å–ååï¼Œå†ç”¨ <code>sum()</code> å‡½æ•°å°†TRUEçš„æ•°é‡åŠ èµ·æ¥ã€‚æœ€ç»ˆçš„ç»“æœå°±æ˜¯éç¼ºå¤±å€¼çš„é¢‘æ•°ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">ddply(c1, c('Cult','Date'), summarise,
     Weight = mean(HeadWt, na.rm = TRUE),
     sd = sd(HeadWt, na.rm = TRUE),
     n = sum(!is.na(HeadWt)))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 6 Ã— 5</caption>
<thead>
    <tr><th scope="col">Cult</th><th scope="col">Date</th><th scope="col">Weight</th><th scope="col">sd</th><th scope="col">n</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th></tr>
</thead>
<tbody>
    <tr><td>c39</td><td>d16</td><td>3.255556</td><td>0.9824855</td><td> 9</td></tr>
    <tr><td>c39</td><td>d20</td><td>2.722222</td><td>0.1394433</td><td> 9</td></tr>
    <tr><td>c39</td><td>d21</td><td>2.740000</td><td>0.9834181</td><td>10</td></tr>
    <tr><td>c52</td><td>d16</td><td>2.260000</td><td>0.4452215</td><td>10</td></tr>
    <tr><td>c52</td><td>d20</td><td>3.044444</td><td>0.8094923</td><td> 9</td></tr>
    <tr><td>c52</td><td>d21</td><td>1.470000</td><td>0.2110819</td><td>10</td></tr>
</tbody>
</table>



<h3 id="ç»„åˆç¼ºå¤±"><a href="#ç»„åˆç¼ºå¤±" class="headerlink" title="ç»„åˆç¼ºå¤±"></a>ç»„åˆç¼ºå¤±</h3><p>å¦‚æœåœ¨åˆ†ç±»å˜é‡ä¸­æœ‰ä»»ä½•â€˜ç©ºç»„åˆâ€™ï¼Œå®ƒä»¬å°±ä¸ä¼šå‡ºç°åœ¨æ±‡æ€»çš„æ•°æ®æ¡†ä¸­ã€‚ç¼ºå¤±ç»„åˆä¼šç»™ç»˜å›¾å¸¦æ¥éº»çƒ¦ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R"># å¤åˆ¶ cabbages å¹¶ç§»é™¤åŒæ—¶åŒ…å«c52å’Œd21çš„è¡Œ
c2 &lt;- subset(c1, !(Cult=='c52' &amp; Date=='d21'))

c2a &lt;- ddply(c2, c('Cult','Date'), summarise,
     Weight = mean(HeadWt, na.rm = TRUE),
     sd = sd(HeadWt, na.rm = TRUE),
     n = sum(!is.na(HeadWt)))
c2a<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 5 Ã— 5</caption>
<thead>
    <tr><th scope="col">Cult</th><th scope="col">Date</th><th scope="col">Weight</th><th scope="col">sd</th><th scope="col">n</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th></tr>
</thead>
<tbody>
    <tr><td>c39</td><td>d16</td><td>3.255556</td><td>0.9824855</td><td> 9</td></tr>
    <tr><td>c39</td><td>d20</td><td>2.722222</td><td>0.1394433</td><td> 9</td></tr>
    <tr><td>c39</td><td>d21</td><td>2.740000</td><td>0.9834181</td><td>10</td></tr>
    <tr><td>c52</td><td>d16</td><td>2.260000</td><td>0.4452215</td><td>10</td></tr>
    <tr><td>c52</td><td>d20</td><td>3.044444</td><td>0.8094923</td><td> 9</td></tr>
</tbody>
</table>




<pre class="line-numbers language-R" data-language="R"><code class="language-R">ggplot(c2a, aes(x=Date, y=Weight, fill=Cult)) + 
 geom_bar(stat='identity', position = position_dodge()) + 
 theme_bw(base_size = 25)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


<p><img src="output_533_0.png" alt="png"></p>
<p>ä¸ºäº†å¡«å……ç¼ºå¤±çš„ç»„åˆï¼Œåœ¨ddply() å‡½æ•°ä¸­ä½¿ç”¨ <code>.drop=FALSE</code>å³å¯ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">c2b &lt;- ddply(c2, c('Cult','Date'), .drop = FALSE, summarise,
     Weight = mean(HeadWt, na.rm = TRUE),
     sd = sd(HeadWt, na.rm = TRUE),
     n = sum(!is.na(HeadWt)))
c2b<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 6 Ã— 5</caption>
<thead>
    <tr><th scope="col">Cult</th><th scope="col">Date</th><th scope="col">Weight</th><th scope="col">sd</th><th scope="col">n</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th></tr>
</thead>
<tbody>
    <tr><td>c39</td><td>d16</td><td>3.255556</td><td>0.9824855</td><td> 9</td></tr>
    <tr><td>c39</td><td>d20</td><td>2.722222</td><td>0.1394433</td><td> 9</td></tr>
    <tr><td>c39</td><td>d21</td><td>2.740000</td><td>0.9834181</td><td>10</td></tr>
    <tr><td>c52</td><td>d16</td><td>2.260000</td><td>0.4452215</td><td>10</td></tr>
    <tr><td>c52</td><td>d20</td><td>3.044444</td><td>0.8094923</td><td> 9</td></tr>
    <tr><td>c52</td><td>d21</td><td>     NaN</td><td>       NA</td><td> 0</td></tr>
</tbody>
</table>




<pre class="line-numbers language-R" data-language="R"><code class="language-R">ggplot(c2b, aes(x=Date, y=Weight, fill=Cult)) + 
 geom_bar(stat='identity', position = position_dodge()) + 
 theme_bw(base_size = 25)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<pre><code>Warning message:
"Removed 1 rows containing missing values (geom_bar)."
</code></pre>
<p><img src="output_536_1.png" alt="png"></p>
<h2 id="ä½¿ç”¨æ ‡å‡†è¯¯å·®å’Œç½®ä¿¡åŒºé—´æ¥æ±‡æ€»æ•°æ®"><a href="#ä½¿ç”¨æ ‡å‡†è¯¯å·®å’Œç½®ä¿¡åŒºé—´æ¥æ±‡æ€»æ•°æ®" class="headerlink" title="ä½¿ç”¨æ ‡å‡†è¯¯å·®å’Œç½®ä¿¡åŒºé—´æ¥æ±‡æ€»æ•°æ®"></a>ä½¿ç”¨æ ‡å‡†è¯¯å·®å’Œç½®ä¿¡åŒºé—´æ¥æ±‡æ€»æ•°æ®</h2><pre class="line-numbers language-R" data-language="R"><code class="language-R">ca &lt;- ddply(cabbages, c('Cult', 'Date'), summarise,
     Weight = mean(HeadWt, na.rm = TRUE), 
     sd = sd(HeadWt, na.rm = TRUE),
     n = sum(!is.na(HeadWt)),
     se = sd / sqrt(n))
ca<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 6 Ã— 6</caption>
<thead>
    <tr><th scope="col">Cult</th><th scope="col">Date</th><th scope="col">Weight</th><th scope="col">sd</th><th scope="col">n</th><th scope="col">se</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>c39</td><td>d16</td><td>3.18</td><td>0.9566144</td><td>10</td><td>0.30250803</td></tr>
    <tr><td>c39</td><td>d20</td><td>2.80</td><td>0.2788867</td><td>10</td><td>0.08819171</td></tr>
    <tr><td>c39</td><td>d21</td><td>2.74</td><td>0.9834181</td><td>10</td><td>0.31098410</td></tr>
    <tr><td>c52</td><td>d16</td><td>2.26</td><td>0.4452215</td><td>10</td><td>0.14079141</td></tr>
    <tr><td>c52</td><td>d20</td><td>3.11</td><td>0.7908505</td><td>10</td><td>0.25008887</td></tr>
    <tr><td>c52</td><td>d21</td><td>1.47</td><td>0.2110819</td><td>10</td><td>0.06674995</td></tr>
</tbody>
</table>



<p>è®¡ç®—å‡å€¼çš„æ ‡å‡†å·®åŒ…æ‹¬ä¸¤æ­¥ï¼šé¦–å…ˆè®¡ç®—å„ç»„çš„æ ‡å‡†å·®å’Œé¢‘æ•°ï¼Œç„¶åç”¨è¿™äº›å€¼æ¥è®¡ç®—å¾—åˆ°æ ‡å‡†è¯¯å·®ã€‚å„ç»„çš„æ ‡å‡†è¯¯å·®å°±æ˜¯æ ‡å‡†å·®é™¤ä»¥æ ·æœ¬é‡çš„å¹³æ–¹æ ¹ã€‚</p>
<h2 id="ç½®ä¿¡åŒºé—´"><a href="#ç½®ä¿¡åŒºé—´" class="headerlink" title="ç½®ä¿¡åŒºé—´"></a>ç½®ä¿¡åŒºé—´</h2><p>ç½®ä¿¡åŒºé—´æ˜¯é€šè¿‡å‡å€¼çš„æ ‡å‡†è¯¯å·®å’Œè‡ªç”±åº¦è®¡ç®—å¾—åˆ°çš„ã€‚è¦è®¡ç®—ç½®ä¿¡åŒºé—´ï¼Œé¦–å…ˆä½¿ç”¨<code>qt()</code>å¾—åˆ°åˆ†ä½æ•°ï¼Œç„¶åå’Œæ ‡å‡†è¯¯å·®ç›¸ä¹˜å³å¯ã€‚<br>ç»™å®šæ¦‚ç‡å€¼å’Œè‡ªç”±åº¦ï¼Œ<code>qt()</code> å‡½æ•°ä¼šè®¡ç®—å‡ºå¯¹åº”tåˆ†å¸ƒçš„åˆ†ä½æ•°ã€‚<br>å¯¹95%çš„ç½®ä¿¡åŒºé—´æ¥è¯´ï¼Œåº”è¯¥ä½¿ç”¨0.975çš„æ¦‚ç‡å€¼ï¼›å¯¹é’Ÿå½¢çš„tåˆ†å¸ƒï¼Œè¿™å¯¹åº”äº†æ›²çº¿ä¸¤ç«¯å„2.5%çš„é¢ç§¯ã€‚è‡ªç”±åº¦æ˜¯æ ·æœ¬é‡å¤§å°å‡å»1.</p>
<p>ä¸‹é¢çš„ä»£ç å°†ä¼šè®¡ç®—æ¯ç»„æ ‡å‡†è¯¯å·®çš„ä¹˜æ•°ã€‚ç”±äºä¸€å…±æœ‰6ä¸ªç»„ï¼Œå¹¶ä¸”æ¯ä¸ªç»„éƒ½æœ‰10ä¸ªè§‚æµ‹å€¼ï¼Œå› æ­¤å®ƒä»¬ä¼šæœ‰ç›¸åŒçš„ä¹˜æ•°ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">ciMult &lt;- qt(.975, ca$n-1)
ciMult<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>2.2621571627982</li><li>2.2621571627982</li><li>2.2621571627982</li><li>2.2621571627982</li><li>2.2621571627982</li><li>2.2621571627982</li></ol>



<p>ç°åœ¨æˆ‘ä»¬å°†ä¸Šé¢çš„å‘é‡ä¹˜ä»¥æ ‡å‡†è¯¯å·®æ¥å¾—åˆ°95%çš„ç½®ä¿¡åŒºé—´ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">ca$ci &lt;- ca$se * ciMult<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">ca<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 6 Ã— 7</caption>
<thead>
    <tr><th scope="col">Cult</th><th scope="col">Date</th><th scope="col">Weight</th><th scope="col">sd</th><th scope="col">n</th><th scope="col">se</th><th scope="col">ci</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>c39</td><td>d16</td><td>3.18</td><td>0.9566144</td><td>10</td><td>0.30250803</td><td>0.6843207</td></tr>
    <tr><td>c39</td><td>d20</td><td>2.80</td><td>0.2788867</td><td>10</td><td>0.08819171</td><td>0.1995035</td></tr>
    <tr><td>c39</td><td>d21</td><td>2.74</td><td>0.9834181</td><td>10</td><td>0.31098410</td><td>0.7034949</td></tr>
    <tr><td>c52</td><td>d16</td><td>2.26</td><td>0.4452215</td><td>10</td><td>0.14079141</td><td>0.3184923</td></tr>
    <tr><td>c52</td><td>d20</td><td>3.11</td><td>0.7908505</td><td>10</td><td>0.25008887</td><td>0.5657403</td></tr>
    <tr><td>c52</td><td>d21</td><td>1.47</td><td>0.2110819</td><td>10</td><td>0.06674995</td><td>0.1509989</td></tr>
</tbody>
</table>



<p>è¯¯å·®æ¡è¡¨ç¤ºå‡å€¼çš„æ ‡å‡†è¯¯å·®ï¼Œå®ƒå’Œç½®ä¿¡åŒºé—´æœ‰ç›¸åŒçš„åŠŸèƒ½ï¼šä¼°è®¡æ€»ä½“å‡å€¼çš„å¥½åç¨‹åº¦ã€‚<br>æ ‡å‡†è¯¯å·®æ˜¯æŠ½æ ·åˆ†å¸ƒçš„æ ‡å‡†å·®</p>
<h2 id="æŠŠæ•°æ®ä»â€œå®½â€å˜â€œé•¿â€"><a href="#æŠŠæ•°æ®ä»â€œå®½â€å˜â€œé•¿â€" class="headerlink" title="æŠŠæ•°æ®ä»â€œå®½â€å˜â€œé•¿â€"></a>æŠŠæ•°æ®ä»â€œå®½â€å˜â€œé•¿â€</h2><p>ğŸ’¡ä½¿ç”¨ reshape2 åŒ…ä¸­çš„ <code>melt()</code> å‡½æ•°ã€‚åœ¨ anthoming æ•°æ®é›†ä¸­ï¼Œangle è¡¨ç¤ºèš‚èšè¡Œè¿›æ–¹å‘ä¸å®¶çš„æ–¹å‘çš„è§’åº¦ï¼Œå®éªŒç»„ï¼ˆexptï¼‰ã€å¯¹ç…§ç»„ï¼ˆctrlï¼‰çš„æ•°å€¼è¡¨ç¤ºåœ¨ä¸¤ç»„ä¸­èš‚èšçš„æ•°é‡ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">library(gcookbook)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">anthoming<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 5 Ã— 3</caption>
<thead>
    <tr><th scope="col">Angle</th><th scope="col">expt</th><th scope="col">Control</th></tr>
    <tr><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th></tr>
</thead>
<tbody>
    <tr><td>-20</td><td>1</td><td>0</td></tr>
    <tr><td>-10</td><td>7</td><td>3</td></tr>
    <tr><td>  0</td><td>2</td><td>3</td></tr>
    <tr><td> 10</td><td>0</td><td>3</td></tr>
    <tr><td> 20</td><td>0</td><td>1</td></tr>
</tbody>
</table>



<p>ä¸ºäº†å¾—åˆ°ä¾¿äºåˆ†æç»˜å›¾çš„æ•°æ®ç»“æœï¼Œå¯¹ä»¥ä¸Šæ•°æ®è¿›è¡Œç»“æ„é‡å¡‘</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">library(reshape2)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R"># 'Angle' ä¸º æ ‡è¯†å˜é‡ï¼Œ 'expt' å’Œ 'control' ä¸ºéæ ‡è¯†å˜é‡ï¼Œè¿™é‡Œä¸¤ä¸ªéæ ‡è¯†å˜é‡éƒ½æˆä¸ºäº†åº¦é‡å˜é‡ï¼Œæ±‡æˆäº† condition çš„ä¸€éƒ¨åˆ†ã€‚
melt(anthoming, id.vars = 'Angle', variable.name = 'condition', value.name = 'count')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 10 Ã— 3</caption>
<thead>
    <tr><th scope="col">Angle</th><th scope="col">condition</th><th scope="col">count</th></tr>
    <tr><th scope="col">&lt;int&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th></tr>
</thead>
<tbody>
    <tr><td>-20</td><td>expt   </td><td>1</td></tr>
    <tr><td>-10</td><td>expt   </td><td>7</td></tr>
    <tr><td>  0</td><td>expt   </td><td>2</td></tr>
    <tr><td> 10</td><td>expt   </td><td>0</td></tr>
    <tr><td> 20</td><td>expt   </td><td>0</td></tr>
    <tr><td>-20</td><td>Control</td><td>0</td></tr>
    <tr><td>-10</td><td>Control</td><td>3</td></tr>
    <tr><td>  0</td><td>Control</td><td>3</td></tr>
    <tr><td> 10</td><td>Control</td><td>3</td></tr>
    <tr><td> 20</td><td>Control</td><td>1</td></tr>
</tbody>
</table>



<p>å¦‚æœä¸æƒ³ç”¨æ‰€æœ‰çš„éæ ‡è¯†å˜é‡(å¦‚ä¸Šçš„ â€˜exptâ€™ å’Œ â€˜controlâ€™)ä½œä¸ºåº¦é‡å˜é‡ï¼Œå¯ä»¥æŒ‡æ˜å“ªäº›å˜é‡æ˜¯ä½ éœ€è¦çš„(ä½¿ç”¨ measure.vars)ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">drunk<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 2 Ã— 6</caption>
<thead>
    <tr><th scope="col">sex</th><th scope="col">0-29</th><th scope="col">30-39</th><th scope="col">40-49</th><th scope="col">50-59</th><th scope="col">60+</th></tr>
    <tr><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th></tr>
</thead>
<tbody>
    <tr><td>male  </td><td>185</td><td>207</td><td>260</td><td>180</td><td>71</td></tr>
    <tr><td>female</td><td>  4</td><td> 13</td><td> 10</td><td>  7</td><td>10</td></tr>
</tbody>
</table>




<pre class="line-numbers language-R" data-language="R"><code class="language-R">melt(drunk, id.vars = 'sex', measure.vars = c('0-29','30-39'), variable.name = 'age', value.name = 'count')<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 4 Ã— 3</caption>
<thead>
    <tr><th scope="col">sex</th><th scope="col">age</th><th scope="col">count</th></tr>
    <tr><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th></tr>
</thead>
<tbody>
    <tr><td>male  </td><td>0-29 </td><td>185</td></tr>
    <tr><td>female</td><td>0-29 </td><td>  4</td></tr>
    <tr><td>male  </td><td>30-39</td><td>207</td></tr>
    <tr><td>female</td><td>30-39</td><td> 13</td></tr>
</tbody>
</table>



<p>åŒæ—¶ï¼Œä¹Ÿå¯ä»¥ç”¨å¤šåˆ—ä½œä¸ºæ ‡è¯†åº¦é‡ï¼š</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">plum_wide<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 4 Ã— 4</caption>
<thead>
    <tr><th scope="col">length</th><th scope="col">time</th><th scope="col">dead</th><th scope="col">alive</th></tr>
    <tr><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th></tr>
</thead>
<tbody>
    <tr><td>long </td><td>at_once  </td><td> 84</td><td>156</td></tr>
    <tr><td>long </td><td>in_spring</td><td>156</td><td> 84</td></tr>
    <tr><td>short</td><td>at_once  </td><td>133</td><td>107</td></tr>
    <tr><td>short</td><td>in_spring</td><td>209</td><td> 31</td></tr>
</tbody>
</table>




<pre class="line-numbers language-R" data-language="R"><code class="language-R">melt(plum_wide, id.vars = c('length', 'time'), variable.name = 'survival', value.name = 'count')<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 8 Ã— 4</caption>
<thead>
    <tr><th scope="col">length</th><th scope="col">time</th><th scope="col">survival</th><th scope="col">count</th></tr>
    <tr><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th></tr>
</thead>
<tbody>
    <tr><td>long </td><td>at_once  </td><td>dead </td><td> 84</td></tr>
    <tr><td>long </td><td>in_spring</td><td>dead </td><td>156</td></tr>
    <tr><td>short</td><td>at_once  </td><td>dead </td><td>133</td></tr>
    <tr><td>short</td><td>in_spring</td><td>dead </td><td>209</td></tr>
    <tr><td>long </td><td>at_once  </td><td>alive</td><td>156</td></tr>
    <tr><td>long </td><td>in_spring</td><td>alive</td><td> 84</td></tr>
    <tr><td>short</td><td>at_once  </td><td>alive</td><td>107</td></tr>
    <tr><td>short</td><td>in_spring</td><td>alive</td><td> 31</td></tr>
</tbody>
</table>



<p>æœ‰äº›æ•°æ®é›†å¹¶ä¸å…·å¤‡æ ‡è¯†å˜é‡ã€‚è¿™ç§æƒ…å†µä¸­ï¼Œå¯ä»¥åœ¨ç”¨ <code>melt()</code> å‡½æ•°ä¹‹å‰ï¼Œç»™è¿™ä¸ªæ•°æ®æ¡†æ·»åŠ ä¸€ä¸ªæ ‡è¯†å˜é‡ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">co &lt;- corneas
co<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 8 Ã— 2</caption>
<thead>
    <tr><th scope="col">affected</th><th scope="col">notaffected</th></tr>
    <tr><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th></tr>
</thead>
<tbody>
    <tr><td>488</td><td>484</td></tr>
    <tr><td>478</td><td>478</td></tr>
    <tr><td>480</td><td>492</td></tr>
    <tr><td>426</td><td>444</td></tr>
    <tr><td>440</td><td>436</td></tr>
    <tr><td>410</td><td>398</td></tr>
    <tr><td>458</td><td>464</td></tr>
    <tr><td>460</td><td>476</td></tr>
</tbody>
</table>




<pre class="line-numbers language-R" data-language="R"><code class="language-R"># æ·»åŠ æ ‡è¯†åˆ—
co$id &lt;- as.character(1:nrow(co)) # ç”¨æ•°å€¼åšæ ‡è¯†åˆ—ï¼Œåœ¨åç»­åˆ†æä¸­å¾ˆå¯èƒ½ä¼šå‡ºé—®é¢˜ï¼Œæ‰€ä»¥ ç”¨ as.character() å‡½æ•°æˆ–è€… ç”¨ factor() è½¬åŒ–ä¸€ä¸‹<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">melt(co, id.vars = 'id', variable.name = 'eye', value.name = 'count')<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 16 Ã— 3</caption>
<thead>
    <tr><th scope="col">id</th><th scope="col">eye</th><th scope="col">count</th></tr>
    <tr><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th></tr>
</thead>
<tbody>
    <tr><td>1</td><td>affected   </td><td>488</td></tr>
    <tr><td>2</td><td>affected   </td><td>478</td></tr>
    <tr><td>3</td><td>affected   </td><td>480</td></tr>
    <tr><td>4</td><td>affected   </td><td>426</td></tr>
    <tr><td>5</td><td>affected   </td><td>440</td></tr>
    <tr><td>6</td><td>affected   </td><td>410</td></tr>
    <tr><td>7</td><td>affected   </td><td>458</td></tr>
    <tr><td>8</td><td>affected   </td><td>460</td></tr>
    <tr><td>1</td><td>notaffected</td><td>484</td></tr>
    <tr><td>2</td><td>notaffected</td><td>478</td></tr>
    <tr><td>3</td><td>notaffected</td><td>492</td></tr>
    <tr><td>4</td><td>notaffected</td><td>444</td></tr>
    <tr><td>5</td><td>notaffected</td><td>436</td></tr>
    <tr><td>6</td><td>notaffected</td><td>398</td></tr>
    <tr><td>7</td><td>notaffected</td><td>464</td></tr>
    <tr><td>8</td><td>notaffected</td><td>476</td></tr>
</tbody>
</table>



<h2 id="æŠŠæ•°æ®æ¡†ä»â€œé•¿â€åˆ°å®½"><a href="#æŠŠæ•°æ®æ¡†ä»â€œé•¿â€åˆ°å®½" class="headerlink" title="æŠŠæ•°æ®æ¡†ä»â€œé•¿â€åˆ°å®½"></a>æŠŠæ•°æ®æ¡†ä»â€œé•¿â€åˆ°å®½</h2><p>ä½¿ç”¨ reshape2 åŒ…ä¸­çš„ dcast() å‡½æ•°ã€‚</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">library(gcookbook)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">plum<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 8 Ã— 4</caption>
<thead>
    <tr><th scope="col">length</th><th scope="col">time</th><th scope="col">survival</th><th scope="col">count</th></tr>
    <tr><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th></tr>
</thead>
<tbody>
    <tr><td>long </td><td>at_once  </td><td>dead </td><td> 84</td></tr>
    <tr><td>long </td><td>in_spring</td><td>dead </td><td>156</td></tr>
    <tr><td>short</td><td>at_once  </td><td>dead </td><td>133</td></tr>
    <tr><td>short</td><td>in_spring</td><td>dead </td><td>209</td></tr>
    <tr><td>long </td><td>at_once  </td><td>alive</td><td>156</td></tr>
    <tr><td>long </td><td>in_spring</td><td>alive</td><td> 84</td></tr>
    <tr><td>short</td><td>at_once  </td><td>alive</td><td>107</td></tr>
    <tr><td>short</td><td>in_spring</td><td>alive</td><td> 31</td></tr>
</tbody>
</table>




<pre class="line-numbers language-R" data-language="R"><code class="language-R">library(reshape2)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R"># ~ å·¦ä¾§ä¸ºæ ‡è¯†å˜é‡ï¼Œ å³è¾¹è¡¨ç¤ºå¯å˜å˜é‡
dcast(plum, length + time ~ survival, value.var = 'count')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 4 Ã— 4</caption>
<thead>
    <tr><th scope="col">length</th><th scope="col">time</th><th scope="col">dead</th><th scope="col">alive</th></tr>
    <tr><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th></tr>
</thead>
<tbody>
    <tr><td>long </td><td>at_once  </td><td> 84</td><td>156</td></tr>
    <tr><td>long </td><td>in_spring</td><td>156</td><td> 84</td></tr>
    <tr><td>short</td><td>at_once  </td><td>133</td><td>107</td></tr>
    <tr><td>short</td><td>in_spring</td><td>209</td><td> 31</td></tr>
</tbody>
</table>

<h1 id="åœ¨ggplot2å›¾å½¢ä¸Šæ·»åŠ æ˜¾è‘—æ€§å·®å¼‚æ³¨é‡Š"><a href="#åœ¨ggplot2å›¾å½¢ä¸Šæ·»åŠ æ˜¾è‘—æ€§å·®å¼‚æ³¨é‡Š" class="headerlink" title="åœ¨ggplot2å›¾å½¢ä¸Šæ·»åŠ æ˜¾è‘—æ€§å·®å¼‚æ³¨é‡Š"></a>åœ¨ggplot2å›¾å½¢ä¸Šæ·»åŠ æ˜¾è‘—æ€§å·®å¼‚æ³¨é‡Š</h1><p>å‚è€ƒèµ„æ–™:<br><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1692505">å¦‚ä½•åœ¨ggplot2å›¾å½¢ä¸Šæ·»åŠ æ˜¾è‘—æ€§å·®å¼‚æ³¨é‡Š</a></p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">library(ggsignif)
library(ggplot2)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">data(iris)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<pre class="line-numbers language-R" data-language="R"><code class="language-R">head(iris,2)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<table class="dataframe">
<caption>A data.frame: 2 Ã— 5</caption>
<thead>
    <tr><th></th><th scope="col">Sepal.Length</th><th scope="col">Sepal.Width</th><th scope="col">Petal.Length</th><th scope="col">Petal.Width</th><th scope="col">Species</th></tr>
    <tr><th></th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;fct&gt;</th></tr>
</thead>
<tbody>
    <tr><th scope="row">1</th><td>5.1</td><td>3.5</td><td>1.4</td><td>0.2</td><td>setosa</td></tr>
    <tr><th scope="row">2</th><td>4.9</td><td>3.0</td><td>1.4</td><td>0.2</td><td>setosa</td></tr>
</tbody>
</table>




<pre class="line-numbers language-R" data-language="R"><code class="language-R">ggplot(iris, aes(x=Species, y=Sepal.Length)) + 
 geom_boxplot() +
 theme_bw(base_size = 25) +
 theme(panel.grid = element_blank()) +
 geom_signif(comparisons = list(c("setosa", "versicolor"),
                                 c("setosa", "virginica"),
                                 c("versicolor", "virginica")),
              y_position=c(7.5, 8.5, 8.2), 
              tip_length = c(0.2, 0.05, 0.2, 0.05, 0.1, 0.05),
              map_signif_level=TRUE,
              textsize=8)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p><img src="output_578_0.png" alt="png"></p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">ggplot(dat, aes(Group, Value)) +
  geom_bar(aes(fill = Sub), stat="identity", position="dodge", width=.5) +
  geom_signif(y_position=c(6.0, 8.5), xmin=c(0.85, 1.85), xmax=c(1.15, 2.15),
              annotation=c("**", "NS"), tip_length=0.04) + 
  geom_signif(comparisons=list(c("S1", "S2")),
              y_position = 9.3, tip_length = 0.04, vjust=0.2)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<pre><code>1. ggplot(dat, aes(Group, Value))
</code></pre>
<h2 id="å‚æ•°è§£é‡Š"><a href="#å‚æ•°è§£é‡Š" class="headerlink" title="å‚æ•°è§£é‡Š"></a>å‚æ•°è§£é‡Š</h2><p>mapping # ç”±aes()æˆ–aes_()åˆ›å»ºçš„ç¾å­¦æ˜ å°„é›†ã€‚å¦‚æœæŒ‡å®šä¸”inherit.aes=TRUEï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œå®ƒå°†ä¸ç»˜å›¾é¡¶å±‚çš„é»˜è®¤æ˜ å°„ç»“åˆã€‚å¦‚æœæ²¡æœ‰ç»˜å›¾æ˜ å°„ï¼Œåˆ™å¿…é¡»æä¾›æ˜ å°„ã€‚<br>data # ç»˜å›¾æ•°æ®æ‰€åœ¨çš„æ•°æ®æ¡†<br>position # ä½ç½®è°ƒæ•´ï¼›å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯ä½ç½®è°ƒæ•´å‡½æ•°çš„ç»“æœ<br>na.rm # é€»è¾‘è¯ï¼Œé»˜è®¤ä¸ºFALSEï¼Œç§»é™¤ç¼ºå¤±å€¼æ—¶æ˜¾ç¤ºè­¦å‘Šä¿¡æ¯ï¼Œä¸ºTRUEï¼Œåˆ™ä¸æ˜¾ç¤ºè­¦å‘Šä¿¡æ¯ã€‚<br>show.legend # é€»è¾‘è¯ï¼Œæ˜¯å¦æ˜¾ç¤ºå›¾ä¾‹<br>comparisons # é•¿åº¦ä¸º2çš„å‘é‡åˆ—è¡¨<br>test # è¿›è¡Œç»Ÿè®¡æ£€éªŒçš„æ–¹æ³•åç§°ï¼Œå¦‚t.testã€wilcox.testã€aov()ã€anova()ã€kruskal.test() ç­‰ã€‚<br>test.args # æ£€éªŒæ–¹æ³•çš„å…¶ä»–å‚æ•°<br>annotations # æ›¿æ¢På€¼æ³¨é‡Šçš„å­—ç¬¦å‘é‡<br>map_signif_level # å¸ƒå°”å€¼ï¼Œæ£€éªŒç»“æœPå€¼ä½¿ç”¨æ³¨é‡Šæˆ–è€…æ˜Ÿå·ä»£æ›¿<br>y_position # æ‹¬å·çº¿åœ¨å¯¹é½yè½´é«˜åº¦çš„æ•°å­—å‘é‡<br>xmin # æ‹¬å·çº¿å·¦ä¾§ä½ç½®çš„æ•°å­—å‘é‡<br>xmax # æ‹¬å·çº¿å³ä¾§ä½ç½®çš„æ•°å­—å‘é‡<br>step_increase # æ•°å­—å‘é‡ï¼Œå‡å°‘æ‹¬å·çº¿çš„é‡å <br>tip_length # æ•°å­—å‘é‡ï¼Œæ˜¾ç¤ºæ‹¬å·çº¿ä¸¤ç«¯çš„ä¸‹é™çš„å°ç«–çº¿ï¼Œç”¨æ¥æŒ‡å‘ç²¾ç¡®çš„ç»„åˆ«<br>size # è®¾ç½®æ‹¬å·çº¿çš„å®½åº¦<br>textsize # è®¾ç½®æ–‡æœ¬å­—ä½“å¤§å°<br>family # è®¾ç½®æ–‡æœ¬å­—ä½“<br>vjust # ç›¸å¯¹äºæ‹¬å·çº¿ï¼Œä¸Šä¸‹è°ƒæ•´æ–‡æœ¬çš„è·ç¦»<br>parse # é€»è¾‘è¯ï¼Œä¸ºTRUEï¼Œåˆ™æ ‡ç­¾å°†è§£æä¸ºè¡¨è¾¾å¼  </p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        æ–‡ç« ä½œè€…:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">æ¢ç»æ³¢</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        æ–‡ç« é“¾æ¥:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://liangshaw.github.io/2022/01/02/RDataVisualization-2/">https://liangshaw.github.io/2022/01/02/RDataVisualization-2/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        ç‰ˆæƒå£°æ˜:
                    </i>
                </span>
                <span class="reprint-info">
                    æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ¥å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº
                    <a href="/about" target="_blank">æ¢ç»æ³¢</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>å¤åˆ¶æˆåŠŸï¼Œè¯·éµå¾ªæœ¬æ–‡çš„è½¬è½½è§„åˆ™</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">æŸ¥çœ‹</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/R/">
                                    <span class="chip bg-color">R</span>
                                </a>
                            
                                <a href="/tags/ggplot2/">
                                    <span class="chip bg-color">ggplot2</span>
                                </a>
                            
                                <a href="/tags/handbook/">
                                    <span class="chip bg-color">handbook</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="qq,qzone,wechat,weibo,douban" data-wechat-qrcode-helper="<p>å¾®ä¿¡æ‰«ä¸€æ‰«å³å¯åˆ†äº«ï¼</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
        </div>
    </div>

    

    

    

    

    
        <style>
    .valine-card {
        margin: 1.5rem auto;
    }

    .valine-card .card-content {
        padding: 20px 20px 5px 20px;
    }

    #vcomments textarea {
        box-sizing: border-box;
        background: url("/medias/comment_bg.png") 100% 100% no-repeat;
    }

    #vcomments p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }

    #vcomments blockquote p {
        text-indent: 0.2rem;
    }

    #vcomments a {
        padding: 0 2px;
        color: #4cbf30;
        font-weight: 500;
        text-decoration: none;
    }

    #vcomments img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
    }

    #vcomments ol li {
        list-style-type: decimal;
    }

    #vcomments ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }

    #vcomments ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }

    #vcomments ul li {
        list-style-type: disc;
    }

    #vcomments ul ul li {
        list-style-type: circle;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    #vcomments table, th, td {
        border: 0;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }

    #vcomments h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }

    #vcomments h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }

    #vcomments h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    #vcomments h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }

    #vcomments h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }

    #vcomments p {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    #vcomments hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }

    #vcomments blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }

    #vcomments pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }

    #vcomments code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }

    #vcomments pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }

    #vcomments pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }

    #vcomments code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    #vcomments b,
    strong {
        font-weight: bold;
    }

    #vcomments dfn {
        font-style: italic;
    }

    #vcomments small {
        font-size: 85%;
    }

    #vcomments cite {
        font-style: normal;
    }

    #vcomments mark {
        background-color: #fcf8e3;
        padding: .2em;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }
</style>

<div class="card valine-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; padding-left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>è¯„è®º</span>
    </div>
    <div id="vcomments" class="card-content" style="display: grid">
    </div>
</div>

<script src="/libs/valine/av-min.js"></script>
<script src="/libs/valine/Valine.min.js"></script>
<script>
    new Valine({
        el: '#vcomments',
        appId: 'QweMbL6pJuEjzHeRLcd4sxIW-gzGzoHsz',
        appKey: 'JdA69Wq6tDpDu1DWdKmY4DJy',
        notify: 'false' === 'true',
        verify: 'false' === 'true',
        visitor: 'true' === 'true',
        avatar: 'retro',
        pageSize: '10',
        lang: 'zh-cn',
        placeholder: 'è¯·ç•™ä¸‹å‹å–„çš„è¯„è®º~'
    });
</script>

<!--é…·Qæ¨é€-->


    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;ä¸Šä¸€ç¯‡</div>
            <div class="card">
                <a href="/2022/01/02/Git_instructions/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/10.jpg" class="responsive-img" alt="git/github basic usage guide">
                        
                        <span class="card-title">git/github basic usage guide</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            ä¸€äº› git å¸¸ç”¨å‘½ä»¤ï¼Œç”¨ä½œå¤‡å¿˜å½•ã€ä½¿ç”¨æ‰‹å†Œï¼Œæ–¹ä¾¿å¿«é€ŸæŸ¥é˜…
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2022-01-02
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            æ¢ç»æ³¢
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/git/">
                        <span class="chip bg-color">git</span>
                    </a>
                    
                    <a href="/tags/Github/">
                        <span class="chip bg-color">Github</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                ä¸‹ä¸€ç¯‡&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2022/01/02/RDataVisualization-1/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/18.jpg" class="responsive-img" alt="Ræ•°æ®å¯è§†åŒ–æ‰‹å†Œ-ä¸Š">
                        
                        <span class="card-title">Ræ•°æ®å¯è§†åŒ–æ‰‹å†Œ-ä¸Š</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            åšä¸»æœ€å¼€å§‹æ­£å¼å­¦ä¹  R è¯­è¨€çš„æ—¶å€™ï¼Œæ˜¯å‡ºäºæ•°æ®å¯è§†åŒ–çš„ç›®çš„ï¼Œä»¥ Oreilly çš„ã€ŠRæ•°æ®å¯è§†åŒ–æ‰‹å†Œã€‹ ä¸º handbookï¼Œå°†æ­¤ä¹¦çš„ 90% å†…å®¹åœ¨ jupyter ä¸­éƒ½å¤ç°äº†ä¸€éã€‚jupyter åŸå§‹æ–‡ä»¶å¯åˆ°æˆ‘çš„ Github ç›¸åº”ä»“åº“ä¸­è·å–ã€‚ç”±äºå†…å®¹è¾ƒå¤šï¼Œåˆ†ä¸ºäº†ä¸Šä¸‹ä¸¤éƒ¨åˆ†ã€‚
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2022-01-02
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/R%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E6%89%8B%E5%86%8C/" class="post-category">
                                    Ræ•°æ®å¯è§†åŒ–æ‰‹å†Œ
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/R/">
                        <span class="chip bg-color">R</span>
                    </a>
                    
                    <a href="/tags/ggplot2/">
                        <span class="chip bg-color">ggplot2</span>
                    </a>
                    
                    <a href="/tags/handbook/">
                        <span class="chip bg-color">handbook</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE' || selection.getRangeAt(0).commonAncestorContainer.nodeName === 'CODE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + 'æ¥æº: Shaw<br />'
            + 'æ–‡ç« ä½œè€…: æ¢ç»æ³¢<br />'
            + 'æ–‡ç« é“¾æ¥: <a href="' + url + '">' + url + '</a><br />'
            + 'æœ¬æ–‡ç« è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ï¼Œä»»ä½•å½¢å¼çš„è½¬è½½éƒ½è¯·æ³¨æ˜å‡ºå¤„ã€‚';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- ä»£ç å—åŠŸèƒ½ä¾èµ– -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- ä»£ç è¯­è¨€ -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- ä»£ç å—å¤åˆ¶ -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- ä»£ç å—æ”¶ç¼© -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;ç›®å½•</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC æ‚¬æµ®æŒ‰é’®. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h1, h2, h3, h4, h5, h6'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4, h5, h6').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* ä¿®å¤æ–‡ç« å¡ç‰‡ div çš„å®½åº¦. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // åˆ‡æ¢TOCç›®å½•å±•å¼€æ”¶ç¼©çš„ç›¸å…³æ“ä½œ.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    

    <div class="container row center-align"
         style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2022-2023</span>
            
            <a href="/about" target="_blank">æ¢ç»æ³¢</a>
            |&nbsp;ç‰ˆæƒæ‰€æœ‰
            |&nbsp;Theme Source&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;<i class="far fa-eye"></i>&nbsp;æ€»è®¿é—®é‡:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;æ€»è®¿é—®äººæ•°:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- è¿è¡Œå¤©æ•°æé†’. -->
            <i class="fas fa-chart-area"></i>&nbsp;
            
                <span id="sitetime"> Loading ...</span>
                <script>
                    var calcSiteTime = function () {
                        var seconds = 1000;
                        var minutes = seconds * 60;
                        var hours = minutes * 60;
                        var days = hours * 24;
                        var years = days * 365;
                        var today = new Date();
                        var startYear = "2022";
                        var startMonth = "1";
                        var startDate = "1";
                        var startHour = "0";
                        var startMinute = "0";
                        var startSecond = "0";
                        var todayYear = today.getFullYear();
                        var todayMonth = today.getMonth() + 1;
                        var todayDate = today.getDate();
                        var todayHour = today.getHours();
                        var todayMinute = today.getMinutes();
                        var todaySecond = today.getSeconds();
                        var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                        var diff = t2 - t1;
                        var diffYears = Math.floor(diff / years);
                        var diffDays = Math.floor((diff / days) - diffYears * 365);

                        // åŒºåˆ†æ˜¯å¦æœ‰å¹´ä»½.
                        var language = 'zh-CN';
                        if (startYear === String(todayYear)) {
                            document.getElementById("year").innerHTML = todayYear;
                            var daysTip = 'This site has been running for ' + diffDays + ' days';
                            if (language === 'zh-CN') {
                                daysTip = 'æœ¬ç«™å·²è¿è¡Œ ' + diffDays + ' å¤©';
                            } else if (language === 'zh-HK') {
                                daysTip = 'æœ¬ç«™å·²é‹è¡Œ ' + diffDays + ' å¤©';
                            }
                            document.getElementById("sitetime").innerHTML = daysTip;
                        } else {
                            document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                            var yearsAndDaysTip = 'This site has been running for ' + diffYears + ' years and '
                                + diffDays + ' days';
                            if (language === 'zh-CN') {
                                yearsAndDaysTip = 'æœ¬ç«™å·²è¿è¡Œ ' + diffYears + ' å¹´ ' + diffDays + ' å¤©';
                            } else if (language === 'zh-HK') {
                                yearsAndDaysTip = 'æœ¬ç«™å·²é‹è¡Œ ' + diffYears + ' å¹´ ' + diffDays + ' å¤©';
                            }
                            document.getElementById("sitetime").innerHTML = yearsAndDaysTip;
                        }
                    }

                    calcSiteTime();
                </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/LiangShaw" class="tooltipped" target="_blank" data-tooltip="è®¿é—®æˆ‘çš„GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:shaoboliang@whu.edu.cn" class="tooltipped" target="_blank" data-tooltip="é‚®ä»¶è”ç³»æˆ‘" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1323909095" class="tooltipped" target="_blank" data-tooltip="QQè”ç³»æˆ‘: 1323909095" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







</div>
    </div>
</footer>

<div class="progress-bar"></div>

    <!-- æœç´¢é®ç½©æ¡† -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;æœç´¢</span>
            <input type="search" id="searchInput" name="s" placeholder="è¯·è¾“å…¥æœç´¢çš„å…³é”®å­—"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- å›åˆ°é¡¶éƒ¨æŒ‰é’® -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    

    <!-- é›ªèŠ±ç‰¹æ•ˆ -->
    

    <!-- é¼ æ ‡æ˜Ÿæ˜Ÿç‰¹æ•ˆ -->
    

     
        <script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
        <script src="/libs/others/TencentCaptcha.js"></script>
        <button id="TencentCaptcha" data-appid="xxxxxxxxxx" data-cbfn="callback" type="button" hidden></button>
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--è…¾è®¯å…”å°å·¢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
